<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.49" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://xingheblog.dyl.fit/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html"><meta property="og:site_name" content="小段要努力学习！"><meta property="og:title" content="SpringBoot2 核心技术与响应式编程"><meta property="og:type" content="website"><meta property="og:locale" content="zh-CN"><meta property="article:tag" content="Spring"><meta property="article:published_time" content="2022-10-04T00:00:00.000Z"><link rel="manifest" href="/manifest.webmanifest" crossorigin="use-credentials"><meta name="theme-color" content="#46bd87"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"><title>SpringBoot2 核心技术与响应式编程 | 小段要努力学习！</title><meta name="description" content="一个以 vuepress-theme-hope 主题搭建的博客">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.483290c4.css">
    <link rel="modulepreload" href="/assets/app.c80e5150.js"><link rel="modulepreload" href="/assets/SpringBoot 2 雷神视频总结.html.87af3790.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/SpringBoot 2 雷神视频总结.html.69832523.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/img/avatar.png" alt="小段要努力学习！"><!----><span class="site-name hide-in-pad">小段要努力学习！</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="博客主页"><span class="icon iconfont icon-home"></span>博客主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="博客内容"><span class="icon iconfont icon-article"></span>博客内容<!----></a></div><div class="nav-item hide-in-mobile"><a href="/category/" class="nav-link" aria-label="分类"><span class="icon iconfont icon-category"></span>分类<!----></a></div><div class="nav-item hide-in-mobile"><a href="/tag/" class="nav-link" aria-label="标签"><span class="icon iconfont icon-tag"></span>标签<!----></a></div><div class="nav-item hide-in-mobile"><a href="/views/about/" class="nav-link" aria-label="关于我"><span class="icon iconfont icon-people"></span>关于我<!----></a></div></nav><!----></div><div class="navbar-right"><!----><div class="nav-item"><a class="repo-link" href="https://github.com/xingheDYL/Blog" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="博客主页"><span class="icon iconfont icon-home"></span>博客主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-guide"></span><span class="title">使用案例</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-algorithm"></span><a href="/views/algorithm/" class="title">算法</a><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-note"></span><a href="/views/interview/" class="title">面试</a><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-note2"></span><a href="/views/notes/" class="title">笔记</a><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-mysql"></span><span class="title">MySQL</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable active"><span class="icon iconfont icon-spring"></span><span class="title">Spring</span><span class="arrow down"></span></button><ul class="sidebar-links"><li><!--[--><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="SpringBoot"><span class="icon iconfont icon-spring"></span>SpringBoot<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、为什么要用-springboot" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、为什么要用 SpringBoot"><!---->1、为什么要用 SpringBoot<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、springboot-优点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、SpringBoot 优点"><!---->2、SpringBoot 优点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、springboot-缺点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、SpringBoot 缺点"><!---->3、SpringBoot 缺点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、微服务" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、微服务"><!---->4、微服务<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、分布式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、分布式"><!---->5、分布式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#分布式的困难" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="分布式的困难"><!---->分布式的困难<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#分布式的解决" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="分布式的解决"><!---->分布式的解决<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、云原生-cloud-native" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、云原生（Cloud Native）"><!---->6、云原生（Cloud Native）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#上云的困难" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="上云的困难"><!---->上云的困难<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#上云的解决" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="上云的解决"><!---->上云的解决<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、环境准备" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、环境准备"><!---->1、环境准备<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-1-maven-设置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 Maven 设置"><!---->1.1 Maven 设置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-2-idea-设置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 IDEA 设置"><!---->1.2 IDEA 设置<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、helloworld" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、HelloWorld"><!---->2、HelloWorld<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-创建一个-maven-工程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 创建一个 Maven 工程"><!---->2.1 创建一个 Maven 工程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-导入-springboot-相关的依赖" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 导入 SpringBoot 相关的依赖"><!---->2.2 导入 SpringBoot 相关的依赖<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-编写主程序-mainapplication" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 编写主程序 MainApplication"><!---->2.3 编写主程序 MainApplication<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-4-编写-controller、service" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 编写 Controller、Service"><!---->2.4 编写 Controller、Service<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-5-运行主程序测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.5 运行主程序测试"><!---->2.5 运行主程序测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-6-简化部署" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.6 简化部署"><!---->2.6 简化部署<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、hello-world-探究" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、Hello World 探究"><!---->3、Hello World 探究<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-pom-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 POM 文件"><!---->3.1 POM 文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-主程序类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 主程序类"><!---->3.2 主程序类<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、快速创建-springboot-项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、快速创建 SpringBoot 项目"><!---->4、快速创建 SpringBoot 项目<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-idea-使用-spring-initializer-快速创建项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 IDEA：使用 Spring Initializer 快速创建项目"><!---->4.1 IDEA：使用 Spring Initializer 快速创建项目<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、配置文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、配置文件"><!---->1、配置文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、yaml语法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、YAML语法"><!---->2、YAML语法<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-基本语法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 基本语法"><!---->2.1 基本语法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-值的写法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 值的写法"><!---->2.2 值的写法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、配置文件值注入" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、配置文件值注入"><!---->3、配置文件值注入<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-配置文件的坑" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 配置文件的坑"><!---->3.1 配置文件的坑<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-value和-configurationproperties比较" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 @Value和@ConfigurationProperties比较"><!---->3.3 @Value和@ConfigurationProperties比较<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、输入数据校验" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、输入数据校验"><!---->4、输入数据校验<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、加载配置文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、加载配置文件"><!---->5、加载配置文件<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-1-propertysource" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 @PropertySource"><!---->5.1 @PropertySource<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-2-importresource" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 @ImportResource"><!---->5.2 @ImportResource<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、配置件占位符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、配置件占位符"><!---->6、配置件占位符<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-1-随机数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 随机数"><!---->6.1 随机数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-2-使用占位符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2 使用占位符"><!---->6.2 使用占位符<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7、profile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、Profile"><!---->7、Profile<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-1-多-profile-文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 多 Profile 文件"><!---->7.1 多 Profile 文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-2-yml-支持多文档块方式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 yml 支持多文档块方式"><!---->7.2 yml 支持多文档块方式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-3-激活指定-profile" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 激活指定 Profile"><!---->7.3 激活指定 Profile<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8、配置文件加载位置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8、配置文件加载位置"><!---->8、配置文件加载位置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9、自动配置原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9、自动配置原理"><!---->9、自动配置原理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-1-引导加载自动配置类" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.1 引导加载自动配置类"><!---->9.1 引导加载自动配置类<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-2-按需开启自动配置项" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.2 按需开启自动配置项"><!---->9.2 按需开启自动配置项<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-3-spring-mvc-自动配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.3 Spring MVC 自动配置"><!---->9.3 Spring MVC 自动配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-4-扩展springmvc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.4 扩展SpringMVC"><!---->9.4 扩展SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-5-全面接管-springmvc" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.5 全面接管 SpringMVC"><!---->9.5 全面接管 SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-6-修改默认配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.6 修改默认配置"><!---->9.6 修改默认配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-7-总结" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.7 总结"><!---->9.7 总结<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-8-最佳实践" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.8 最佳实践"><!---->9.8 最佳实践<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-9-示例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.9 示例"><!---->9.9 示例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、日志框架" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、日志框架"><!---->1、日志框架<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、slf4j-使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、SLF4j 使用"><!---->2、SLF4j 使用<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-如何在系统中使用-slf4j" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 如何在系统中使用 SLF4j"><!---->2.1 如何在系统中使用 SLF4j<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-遗留问题" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 遗留问题"><!---->2.2 遗留问题<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、springboot-日志关系" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、SpringBoot 日志关系"><!---->3、SpringBoot 日志关系<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、日志使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、日志使用"><!---->4、日志使用<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-默认配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 默认配置"><!---->4.1 默认配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-2-指定配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 指定配置"><!---->4.2 指定配置<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、切换日志框架" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、切换日志框架"><!---->5、切换日志框架<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、简介"><!---->1、简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、简单功能分析" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、简单功能分析"><!---->2、简单功能分析<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-静态资源访问" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 静态资源访问"><!---->2.1 静态资源访问<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-欢迎页" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 欢迎页"><!---->2.2 欢迎页<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-自定义-favicon" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 自定义 Favicon"><!---->2.3 自定义 Favicon<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-4-静态资源配置原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 静态资源配置原理"><!---->2.4 静态资源配置原理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、请求响应参数处理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、请求响应参数处理"><!---->3、请求响应参数处理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-请求映射" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 请求映射"><!---->3.1 请求映射<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-普通参数与基本注解" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 普通参数与基本注解"><!---->3.2 普通参数与基本注解<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-自定义类型参数-pojo-封装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 自定义类型参数：POJO 封装"><!---->3.3 自定义类型参数：POJO 封装<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-4-参数处理原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 参数处理原理"><!---->3.4 参数处理原理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、数据响应与内容协商" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、数据响应与内容协商"><!---->4、数据响应与内容协商<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-响应-json" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 响应 JSON"><!---->4.1 响应 JSON<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-2-内容协商" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 内容协商"><!---->4.2 内容协商<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、视图解析与模板引擎" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、视图解析与模板引擎"><!---->5、视图解析与模板引擎<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-1-视图解析原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.1 视图解析原理"><!---->5.1 视图解析原理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-2-thymeleaf-语法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.2 Thymeleaf 语法"><!---->5.2 Thymeleaf 语法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-3-thymeleaf-使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5.3 Thymeleaf 使用"><!---->5.3 Thymeleaf 使用<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、构建后台管理系统" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、构建后台管理系统"><!---->6、构建后台管理系统<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-1-创建项目" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.1 创建项目"><!---->6.1 创建项目<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-2静态资源处理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.2静态资源处理"><!---->6.2静态资源处理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-3-路径构建" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.3 路径构建"><!---->6.3 路径构建<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-4-页面跳转" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.4 页面跳转"><!---->6.4 页面跳转<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-5-数据渲染" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.5 数据渲染"><!---->6.5 数据渲染<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-6-模板页面" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.6 模板页面"><!---->6.6 模板页面<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-7-国际化" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6.7 国际化"><!---->6.7 国际化<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7、restful-的-crud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、RESTful 的 CRUD"><!---->7、RESTful 的 CRUD<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-1-实验要求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.1 实验要求"><!---->7.1 实验要求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-2-crud-员工列表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.2 CRUD-员工列表"><!---->7.2 CRUD-员工列表<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-3-crud-员工添加" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.3 CRUD-员工添加"><!---->7.3 CRUD-员工添加<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-4-crud-员工修改" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.4 CRUD-员工修改"><!---->7.4 CRUD-员工修改<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-5-crud-员工删除" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7.5 CRUD-员工删除"><!---->7.5 CRUD-员工删除<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8、拦截器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8、拦截器"><!---->8、拦截器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8-1-handlerinterceptor-接口" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.1 HandlerInterceptor 接口"><!---->8.1 HandlerInterceptor 接口<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8-2-配置拦截器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.2 配置拦截器"><!---->8.2 配置拦截器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8-3-拦截器原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="8.3 拦截器原理"><!---->8.3 拦截器原理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9、文件上传" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9、文件上传"><!---->9、文件上传<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-1-页面表单" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.1 页面表单"><!---->9.1 页面表单<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-2-限制上传文件大小" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.2 限制上传文件大小"><!---->9.2 限制上传文件大小<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-3-文件上传代码" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.3 文件上传代码"><!---->9.3 文件上传代码<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-4-自动配置原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="9.4 自动配置原理"><!---->9.4 自动配置原理<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10、异常处理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10、异常处理"><!---->10、异常处理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-默认规则" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1 默认规则"><!---->10.1 默认规则<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-定制异常处理逻辑" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2 定制异常处理逻辑"><!---->10.2 定制异常处理逻辑<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-异常处理自动配置原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.3 异常处理自动配置原理"><!---->10.3 异常处理自动配置原理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-异常处理流程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.4 异常处理流程"><!---->10.4 异常处理流程<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_11、web-原生组件注入-servlet、filter、listener" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11、Web 原生组件注入（Servlet、Filter、Listener）"><!---->11、Web 原生组件注入（Servlet、Filter、Listener）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_11-1-使用-servlet-api" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.1 使用 Servlet API"><!---->11.1 使用 Servlet API<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_11-2-使用-registrationbean" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="11.2 使用 RegistrationBean"><!---->11.2 使用 RegistrationBean<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_12、配置-servlet-容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12、配置 Servlet 容器"><!---->12、配置 Servlet 容器<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_12-1-切换嵌入式servlet容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.1 切换嵌入式Servlet容器"><!---->12.1 切换嵌入式Servlet容器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_12-2-定制-servlet-容器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="12.2 定制 Servlet 容器"><!---->12.2 定制 Servlet 容器<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、简介-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、简介"><!---->1、简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、核心概念" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、核心概念"><!---->2、核心概念<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、安装docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、安装Docker"><!---->3、安装Docker<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-安装-wsl2-版-linux" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 安装 WSL2 版 Linux"><!---->3.1 安装 WSL2 版 Linux<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-linux-上安装-docker" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 Linux 上安装 Docker"><!---->3.2 Linux 上安装 Docker<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、docker-常用命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、Docker 常用命令"><!---->4、Docker 常用命令<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-镜像操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.1 镜像操作"><!---->4.1 镜像操作<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-2-容器操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.2 容器操作"><!---->4.2 容器操作<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-3-安装-mysql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.3 安装 MySQL"><!---->4.3 安装 MySQL<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-4-安装-redis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4.4 安装 Redis"><!---->4.4 安装 Redis<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、sql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、SQL"><!---->1、SQL<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-1-数据源的自动配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 数据源的自动配置"><!---->1.1 数据源的自动配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-2-使用-druid-数据源" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 使用 Druid 数据源"><!---->1.2 使用 Druid 数据源<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-3-整合-mybatis-操作" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 整合 MyBatis 操作"><!---->1.3 整合 MyBatis 操作<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-4-整合-mybatis-plus-完成-crud" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4 整合 MyBatis-Plus 完成 CRUD"><!---->1.4 整合 MyBatis-Plus 完成 CRUD<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、nosql" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、NoSQL"><!---->2、NoSQL<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-redis-自动配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 Redis 自动配置"><!---->2.1 Redis 自动配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-redistemplate-使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 RedisTemplate 使用"><!---->2.2 RedisTemplate 使用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-切换至-jedis" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 切换至 Jedis"><!---->2.3 切换至 Jedis<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、junit5-的变化" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、JUnit5 的变化"><!---->1、JUnit5 的变化<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、junit5-常用注解" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、JUnit5 常用注解"><!---->2、JUnit5 常用注解<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、断言-assertions" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、断言（Assertions）"><!---->3、断言（Assertions）<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-简单断言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 简单断言"><!---->3.1 简单断言<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-数组断言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 数组断言"><!---->3.2 数组断言<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-组合断言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 组合断言"><!---->3.3 组合断言<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-4-异常断言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 异常断言"><!---->3.4 异常断言<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-5-超时断言" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.5 超时断言"><!---->3.5 超时断言<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-6-快速失败" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.6 快速失败"><!---->3.6 快速失败<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、前置条件-assumptions" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4、前置条件（Assumptions）"><!---->4、前置条件（Assumptions）<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、嵌套测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5、嵌套测试"><!---->5、嵌套测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、参数化测试" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6、参数化测试"><!---->6、参数化测试<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7、迁移指南" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="7、迁移指南"><!---->7、迁移指南<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、springboot-actuator" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1、SpringBoot Actuator"><!---->1、SpringBoot Actuator<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-1-简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1 简介"><!---->1.1 简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-2-1-x-与-2-x-的不同" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2 1.x 与 2.x 的不同"><!---->1.2 1.x 与 2.x 的不同<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-3-如何使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3 如何使用"><!---->1.3 如何使用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-4-可视化" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4 可视化"><!---->1.4 可视化<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、actuator-endpoint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2、Actuator Endpoint"><!---->2、Actuator Endpoint<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-最常使用的-endpoint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.1 最常使用的 Endpoint"><!---->2.1 最常使用的 Endpoint<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-health-endpoint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.2 Health Endpoint"><!---->2.2 Health Endpoint<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-metrics-endpoint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.3 Metrics Endpoint"><!---->2.3 Metrics Endpoint<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-4-管理-endpoints" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.4 管理 Endpoints"><!---->2.4 管理 Endpoints<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、定制-endpoint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3、定制 Endpoint"><!---->3、定制 Endpoint<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-定制-health-信息" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 定制 Health 信息"><!---->3.1 定制 Health 信息<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-定制info信息" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 定制info信息"><!---->3.2 定制info信息<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-定制-metrics-信息" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 定制 Metrics 信息"><!---->3.3 定制 Metrics 信息<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-4定制-endpoint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4定制 Endpoint"><!---->3.4定制 Endpoint<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-profile-功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1 Profile 功能"><!---->10.1 Profile 功能<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-1-application-profile-功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1.1 application-profile 功能"><!---->10.1.1 application-profile 功能<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-2-profile-条件装配功能" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1.2 @Profile 条件装配功能"><!---->10.1.2 @Profile 条件装配功能<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-3-profile-分组" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.1.3 Profile 分组"><!---->10.1.3 Profile 分组<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-外部化配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2 外部化配置"><!---->10.2 外部化配置<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-1-外部配置源" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2.1 外部配置源"><!---->10.2.1 外部配置源<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-2-配置文件查找位置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2.2 配置文件查找位置"><!---->10.2.2 配置文件查找位置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-3-配置文件加载顺序" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2.3 配置文件加载顺序："><!---->10.2.3 配置文件加载顺序：<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-4-指定环境优先-外部优先-后面的可以覆盖前面的同名配置项" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.2.4 指定环境优先，外部优先，后面的可以覆盖前面的同名配置项"><!---->10.2.4 指定环境优先，外部优先，后面的可以覆盖前面的同名配置项<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-自定义-starter" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.3 自定义 starter"><!---->10.3 自定义 starter<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-1-starter-启动原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.3.1 starter 启动原理"><!---->10.3.1 starter 启动原理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-2-自定义-starter" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.3.2 自定义 starter"><!---->10.3.2 自定义 starter<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-springboot-原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.4 SpringBoot 原理"><!---->10.4 SpringBoot 原理<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-1-springboot-启动过程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.4.1 SpringBoot 启动过程"><!---->10.4.1 SpringBoot 启动过程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-2-application-events-and-listeners" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.4.2 Application Events and Listeners"><!---->10.4.2 Application Events and Listeners<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-3-applicationrunner-与-commandlinerunner" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="10.4.3 ApplicationRunner  与  CommandLineRunner"><!---->10.4.3 ApplicationRunner  与  CommandLineRunner<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-mybatisplus"></span><span class="title">MyBatis-Plus</span><span class="arrow right"></span></button><!----></section><!--]--></li><li><!--[--><section class="sidebar-group"><button class="sidebar-heading clickable"><span class="icon iconfont icon-project"></span><span class="title">项目</span><span class="arrow right"></span></button><!----></section><!--]--></li></ul></section><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-spring"></span>SpringBoot2 核心技术与响应式编程</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年10月4日" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://xinghe.dyl.fit" target="_blank" rel="noopener noreferrer">DYL</a></span><span property="author" content="DYL"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年10月4日</span><meta property="datePublished" content="2022-10-04T00:00:00.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" localizeddate="2022年10月4日" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category8 clickable" role="navigation">笔记</li><meta property="articleSection" content="笔记"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" localizeddate="2022年10月4日" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag1 clickable" role="navigation">Spring</li></ul><meta property="keywords" content="Spring"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年10月4日" isoriginal="false" pageview="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 101 分钟</span><meta property="timeRequired" content="PT101M"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、为什么要用-springboot" class="router-link-active router-link-exact-active toc-link level2">1、为什么要用 SpringBoot</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、springboot-优点" class="router-link-active router-link-exact-active toc-link level2">2、SpringBoot 优点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、springboot-缺点" class="router-link-active router-link-exact-active toc-link level2">3、SpringBoot 缺点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、微服务" class="router-link-active router-link-exact-active toc-link level2">4、微服务</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、分布式" class="router-link-active router-link-exact-active toc-link level2">5、分布式</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#分布式的困难" class="router-link-active router-link-exact-active toc-link level3">分布式的困难</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#分布式的解决" class="router-link-active router-link-exact-active toc-link level3">分布式的解决</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、云原生-cloud-native" class="router-link-active router-link-exact-active toc-link level2">6、云原生（Cloud Native）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#上云的困难" class="router-link-active router-link-exact-active toc-link level3">上云的困难</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#上云的解决" class="router-link-active router-link-exact-active toc-link level3">上云的解决</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、环境准备" class="router-link-active router-link-exact-active toc-link level2">1、环境准备</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-1-maven-设置" class="router-link-active router-link-exact-active toc-link level3">1.1 Maven 设置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-2-idea-设置" class="router-link-active router-link-exact-active toc-link level3">1.2 IDEA 设置</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、helloworld" class="router-link-active router-link-exact-active toc-link level2">2、HelloWorld</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-创建一个-maven-工程" class="router-link-active router-link-exact-active toc-link level3">2.1 创建一个 Maven 工程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-导入-springboot-相关的依赖" class="router-link-active router-link-exact-active toc-link level3">2.2 导入 SpringBoot 相关的依赖</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-编写主程序-mainapplication" class="router-link-active router-link-exact-active toc-link level3">2.3 编写主程序 MainApplication</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-4-编写-controller、service" class="router-link-active router-link-exact-active toc-link level3">2.4 编写 Controller、Service</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-5-运行主程序测试" class="router-link-active router-link-exact-active toc-link level3">2.5 运行主程序测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-6-简化部署" class="router-link-active router-link-exact-active toc-link level3">2.6 简化部署</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、hello-world-探究" class="router-link-active router-link-exact-active toc-link level2">3、Hello World 探究</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-pom-文件" class="router-link-active router-link-exact-active toc-link level3">3.1 POM 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-主程序类" class="router-link-active router-link-exact-active toc-link level3">3.2 主程序类</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、快速创建-springboot-项目" class="router-link-active router-link-exact-active toc-link level2">4、快速创建 SpringBoot 项目</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-idea-使用-spring-initializer-快速创建项目" class="router-link-active router-link-exact-active toc-link level3">4.1 IDEA：使用 Spring Initializer 快速创建项目</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、配置文件" class="router-link-active router-link-exact-active toc-link level2">1、配置文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、yaml语法" class="router-link-active router-link-exact-active toc-link level2">2、YAML语法</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-基本语法" class="router-link-active router-link-exact-active toc-link level3">2.1 基本语法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-值的写法" class="router-link-active router-link-exact-active toc-link level3">2.2 值的写法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、配置文件值注入" class="router-link-active router-link-exact-active toc-link level2">3、配置文件值注入</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-配置文件的坑" class="router-link-active router-link-exact-active toc-link level3">3.1 配置文件的坑</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-value和-configurationproperties比较" class="router-link-active router-link-exact-active toc-link level3">3.3 @Value和@ConfigurationProperties比较</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、输入数据校验" class="router-link-active router-link-exact-active toc-link level2">4、输入数据校验</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、加载配置文件" class="router-link-active router-link-exact-active toc-link level2">5、加载配置文件</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-1-propertysource" class="router-link-active router-link-exact-active toc-link level3">5.1 @PropertySource</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-2-importresource" class="router-link-active router-link-exact-active toc-link level3">5.2 @ImportResource</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、配置件占位符" class="router-link-active router-link-exact-active toc-link level2">6、配置件占位符</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-1-随机数" class="router-link-active router-link-exact-active toc-link level3">6.1 随机数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-2-使用占位符" class="router-link-active router-link-exact-active toc-link level3">6.2 使用占位符</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7、profile" class="router-link-active router-link-exact-active toc-link level2">7、Profile</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-1-多-profile-文件" class="router-link-active router-link-exact-active toc-link level3">7.1 多 Profile 文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-2-yml-支持多文档块方式" class="router-link-active router-link-exact-active toc-link level3">7.2 yml 支持多文档块方式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-3-激活指定-profile" class="router-link-active router-link-exact-active toc-link level3">7.3 激活指定 Profile</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8、配置文件加载位置" class="router-link-active router-link-exact-active toc-link level2">8、配置文件加载位置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9、自动配置原理" class="router-link-active router-link-exact-active toc-link level2">9、自动配置原理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-1-引导加载自动配置类" class="router-link-active router-link-exact-active toc-link level3">9.1 引导加载自动配置类</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-2-按需开启自动配置项" class="router-link-active router-link-exact-active toc-link level3">9.2 按需开启自动配置项</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-3-spring-mvc-自动配置" class="router-link-active router-link-exact-active toc-link level3">9.3 Spring MVC 自动配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-4-扩展springmvc" class="router-link-active router-link-exact-active toc-link level3">9.4 扩展SpringMVC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-5-全面接管-springmvc" class="router-link-active router-link-exact-active toc-link level3">9.5 全面接管 SpringMVC</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-6-修改默认配置" class="router-link-active router-link-exact-active toc-link level3">9.6 修改默认配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-7-总结" class="router-link-active router-link-exact-active toc-link level3">9.7 总结</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-8-最佳实践" class="router-link-active router-link-exact-active toc-link level3">9.8 最佳实践</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-9-示例" class="router-link-active router-link-exact-active toc-link level3">9.9 示例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、日志框架" class="router-link-active router-link-exact-active toc-link level2">1、日志框架</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、slf4j-使用" class="router-link-active router-link-exact-active toc-link level2">2、SLF4j 使用</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-如何在系统中使用-slf4j" class="router-link-active router-link-exact-active toc-link level3">2.1 如何在系统中使用 SLF4j</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-遗留问题" class="router-link-active router-link-exact-active toc-link level3">2.2 遗留问题</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、springboot-日志关系" class="router-link-active router-link-exact-active toc-link level2">3、SpringBoot 日志关系</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、日志使用" class="router-link-active router-link-exact-active toc-link level2">4、日志使用</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-默认配置" class="router-link-active router-link-exact-active toc-link level3">4.1 默认配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-2-指定配置" class="router-link-active router-link-exact-active toc-link level3">4.2 指定配置</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、切换日志框架" class="router-link-active router-link-exact-active toc-link level2">5、切换日志框架</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、简介" class="router-link-active router-link-exact-active toc-link level2">1、简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、简单功能分析" class="router-link-active router-link-exact-active toc-link level2">2、简单功能分析</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-静态资源访问" class="router-link-active router-link-exact-active toc-link level3">2.1 静态资源访问</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-欢迎页" class="router-link-active router-link-exact-active toc-link level3">2.2 欢迎页</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-自定义-favicon" class="router-link-active router-link-exact-active toc-link level3">2.3 自定义 Favicon</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-4-静态资源配置原理" class="router-link-active router-link-exact-active toc-link level3">2.4 静态资源配置原理</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、请求响应参数处理" class="router-link-active router-link-exact-active toc-link level2">3、请求响应参数处理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-请求映射" class="router-link-active router-link-exact-active toc-link level3">3.1 请求映射</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-普通参数与基本注解" class="router-link-active router-link-exact-active toc-link level3">3.2 普通参数与基本注解</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-自定义类型参数-pojo-封装" class="router-link-active router-link-exact-active toc-link level3">3.3 自定义类型参数：POJO 封装</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-4-参数处理原理" class="router-link-active router-link-exact-active toc-link level3">3.4 参数处理原理</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、数据响应与内容协商" class="router-link-active router-link-exact-active toc-link level2">4、数据响应与内容协商</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-响应-json" class="router-link-active router-link-exact-active toc-link level3">4.1 响应 JSON</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-2-内容协商" class="router-link-active router-link-exact-active toc-link level3">4.2 内容协商</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、视图解析与模板引擎" class="router-link-active router-link-exact-active toc-link level2">5、视图解析与模板引擎</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-1-视图解析原理" class="router-link-active router-link-exact-active toc-link level3">5.1 视图解析原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-2-thymeleaf-语法" class="router-link-active router-link-exact-active toc-link level3">5.2 Thymeleaf 语法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5-3-thymeleaf-使用" class="router-link-active router-link-exact-active toc-link level3">5.3 Thymeleaf 使用</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、构建后台管理系统" class="router-link-active router-link-exact-active toc-link level2">6、构建后台管理系统</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-1-创建项目" class="router-link-active router-link-exact-active toc-link level3">6.1 创建项目</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-2静态资源处理" class="router-link-active router-link-exact-active toc-link level3">6.2静态资源处理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-3-路径构建" class="router-link-active router-link-exact-active toc-link level3">6.3 路径构建</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-4-页面跳转" class="router-link-active router-link-exact-active toc-link level3">6.4 页面跳转</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-5-数据渲染" class="router-link-active router-link-exact-active toc-link level3">6.5 数据渲染</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-6-模板页面" class="router-link-active router-link-exact-active toc-link level3">6.6 模板页面</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6-7-国际化" class="router-link-active router-link-exact-active toc-link level3">6.7 国际化</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7、restful-的-crud" class="router-link-active router-link-exact-active toc-link level2">7、RESTful 的 CRUD</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-1-实验要求" class="router-link-active router-link-exact-active toc-link level3">7.1 实验要求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-2-crud-员工列表" class="router-link-active router-link-exact-active toc-link level3">7.2 CRUD-员工列表</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-3-crud-员工添加" class="router-link-active router-link-exact-active toc-link level3">7.3 CRUD-员工添加</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-4-crud-员工修改" class="router-link-active router-link-exact-active toc-link level3">7.4 CRUD-员工修改</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7-5-crud-员工删除" class="router-link-active router-link-exact-active toc-link level3">7.5 CRUD-员工删除</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8、拦截器" class="router-link-active router-link-exact-active toc-link level2">8、拦截器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8-1-handlerinterceptor-接口" class="router-link-active router-link-exact-active toc-link level3">8.1 HandlerInterceptor 接口</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8-2-配置拦截器" class="router-link-active router-link-exact-active toc-link level3">8.2 配置拦截器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_8-3-拦截器原理" class="router-link-active router-link-exact-active toc-link level3">8.3 拦截器原理</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9、文件上传" class="router-link-active router-link-exact-active toc-link level2">9、文件上传</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-1-页面表单" class="router-link-active router-link-exact-active toc-link level3">9.1 页面表单</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-2-限制上传文件大小" class="router-link-active router-link-exact-active toc-link level3">9.2 限制上传文件大小</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-3-文件上传代码" class="router-link-active router-link-exact-active toc-link level3">9.3 文件上传代码</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_9-4-自动配置原理" class="router-link-active router-link-exact-active toc-link level3">9.4 自动配置原理</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10、异常处理" class="router-link-active router-link-exact-active toc-link level2">10、异常处理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-默认规则" class="router-link-active router-link-exact-active toc-link level3">10.1 默认规则</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-定制异常处理逻辑" class="router-link-active router-link-exact-active toc-link level3">10.2 定制异常处理逻辑</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-异常处理自动配置原理" class="router-link-active router-link-exact-active toc-link level3">10.3 异常处理自动配置原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-异常处理流程" class="router-link-active router-link-exact-active toc-link level3">10.4 异常处理流程</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_11、web-原生组件注入-servlet、filter、listener" class="router-link-active router-link-exact-active toc-link level2">11、Web 原生组件注入（Servlet、Filter、Listener）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_11-1-使用-servlet-api" class="router-link-active router-link-exact-active toc-link level3">11.1 使用 Servlet API</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_11-2-使用-registrationbean" class="router-link-active router-link-exact-active toc-link level3">11.2 使用 RegistrationBean</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_12、配置-servlet-容器" class="router-link-active router-link-exact-active toc-link level2">12、配置 Servlet 容器</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_12-1-切换嵌入式servlet容器" class="router-link-active router-link-exact-active toc-link level3">12.1 切换嵌入式Servlet容器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_12-2-定制-servlet-容器" class="router-link-active router-link-exact-active toc-link level3">12.2 定制 Servlet 容器</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、简介-1" class="router-link-active router-link-exact-active toc-link level2">1、简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、核心概念" class="router-link-active router-link-exact-active toc-link level2">2、核心概念</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、安装docker" class="router-link-active router-link-exact-active toc-link level2">3、安装Docker</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-安装-wsl2-版-linux" class="router-link-active router-link-exact-active toc-link level3">3.1 安装 WSL2 版 Linux</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-linux-上安装-docker" class="router-link-active router-link-exact-active toc-link level3">3.2 Linux 上安装 Docker</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、docker-常用命令" class="router-link-active router-link-exact-active toc-link level2">4、Docker 常用命令</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-1-镜像操作" class="router-link-active router-link-exact-active toc-link level3">4.1 镜像操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-2-容器操作" class="router-link-active router-link-exact-active toc-link level3">4.2 容器操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-3-安装-mysql" class="router-link-active router-link-exact-active toc-link level3">4.3 安装 MySQL</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4-4-安装-redis" class="router-link-active router-link-exact-active toc-link level3">4.4 安装 Redis</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、sql" class="router-link-active router-link-exact-active toc-link level2">1、SQL</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-1-数据源的自动配置" class="router-link-active router-link-exact-active toc-link level3">1.1 数据源的自动配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-2-使用-druid-数据源" class="router-link-active router-link-exact-active toc-link level3">1.2 使用 Druid 数据源</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-3-整合-mybatis-操作" class="router-link-active router-link-exact-active toc-link level3">1.3 整合 MyBatis 操作</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-4-整合-mybatis-plus-完成-crud" class="router-link-active router-link-exact-active toc-link level3">1.4 整合 MyBatis-Plus 完成 CRUD</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、nosql" class="router-link-active router-link-exact-active toc-link level2">2、NoSQL</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-redis-自动配置" class="router-link-active router-link-exact-active toc-link level3">2.1 Redis 自动配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-redistemplate-使用" class="router-link-active router-link-exact-active toc-link level3">2.2 RedisTemplate 使用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-切换至-jedis" class="router-link-active router-link-exact-active toc-link level3">2.3 切换至 Jedis</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、junit5-的变化" class="router-link-active router-link-exact-active toc-link level2">1、JUnit5 的变化</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、junit5-常用注解" class="router-link-active router-link-exact-active toc-link level2">2、JUnit5 常用注解</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、断言-assertions" class="router-link-active router-link-exact-active toc-link level2">3、断言（Assertions）</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-简单断言" class="router-link-active router-link-exact-active toc-link level3">3.1 简单断言</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-数组断言" class="router-link-active router-link-exact-active toc-link level3">3.2 数组断言</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-组合断言" class="router-link-active router-link-exact-active toc-link level3">3.3 组合断言</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-4-异常断言" class="router-link-active router-link-exact-active toc-link level3">3.4 异常断言</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-5-超时断言" class="router-link-active router-link-exact-active toc-link level3">3.5 超时断言</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-6-快速失败" class="router-link-active router-link-exact-active toc-link level3">3.6 快速失败</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_4、前置条件-assumptions" class="router-link-active router-link-exact-active toc-link level2">4、前置条件（Assumptions）</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_5、嵌套测试" class="router-link-active router-link-exact-active toc-link level2">5、嵌套测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_6、参数化测试" class="router-link-active router-link-exact-active toc-link level2">6、参数化测试</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_7、迁移指南" class="router-link-active router-link-exact-active toc-link level2">7、迁移指南</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1、springboot-actuator" class="router-link-active router-link-exact-active toc-link level2">1、SpringBoot Actuator</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-1-简介" class="router-link-active router-link-exact-active toc-link level3">1.1 简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-2-1-x-与-2-x-的不同" class="router-link-active router-link-exact-active toc-link level3">1.2 1.x 与 2.x 的不同</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-3-如何使用" class="router-link-active router-link-exact-active toc-link level3">1.3 如何使用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_1-4-可视化" class="router-link-active router-link-exact-active toc-link level3">1.4 可视化</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2、actuator-endpoint" class="router-link-active router-link-exact-active toc-link level2">2、Actuator Endpoint</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-1-最常使用的-endpoint" class="router-link-active router-link-exact-active toc-link level3">2.1 最常使用的 Endpoint</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-2-health-endpoint" class="router-link-active router-link-exact-active toc-link level3">2.2 Health Endpoint</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-3-metrics-endpoint" class="router-link-active router-link-exact-active toc-link level3">2.3 Metrics Endpoint</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_2-4-管理-endpoints" class="router-link-active router-link-exact-active toc-link level3">2.4 管理 Endpoints</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3、定制-endpoint" class="router-link-active router-link-exact-active toc-link level2">3、定制 Endpoint</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-1-定制-health-信息" class="router-link-active router-link-exact-active toc-link level3">3.1 定制 Health 信息</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-2-定制info信息" class="router-link-active router-link-exact-active toc-link level3">3.2 定制info信息</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-3-定制-metrics-信息" class="router-link-active router-link-exact-active toc-link level3">3.3 定制 Metrics 信息</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_3-4定制-endpoint" class="router-link-active router-link-exact-active toc-link level3">3.4定制 Endpoint</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-profile-功能" class="router-link-active router-link-exact-active toc-link level2">10.1 Profile 功能</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-1-application-profile-功能" class="router-link-active router-link-exact-active toc-link level3">10.1.1 application-profile 功能</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-2-profile-条件装配功能" class="router-link-active router-link-exact-active toc-link level3">10.1.2 @Profile 条件装配功能</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-1-3-profile-分组" class="router-link-active router-link-exact-active toc-link level3">10.1.3 Profile 分组</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-外部化配置" class="router-link-active router-link-exact-active toc-link level2">10.2 外部化配置</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-1-外部配置源" class="router-link-active router-link-exact-active toc-link level3">10.2.1 外部配置源</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-2-配置文件查找位置" class="router-link-active router-link-exact-active toc-link level3">10.2.2 配置文件查找位置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-3-配置文件加载顺序" class="router-link-active router-link-exact-active toc-link level3">10.2.3 配置文件加载顺序：</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-2-4-指定环境优先-外部优先-后面的可以覆盖前面的同名配置项" class="router-link-active router-link-exact-active toc-link level3">10.2.4 指定环境优先，外部优先，后面的可以覆盖前面的同名配置项</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-自定义-starter" class="router-link-active router-link-exact-active toc-link level2">10.3 自定义 starter</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-1-starter-启动原理" class="router-link-active router-link-exact-active toc-link level3">10.3.1 starter 启动原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-3-2-自定义-starter" class="router-link-active router-link-exact-active toc-link level3">10.3.2 自定义 starter</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-springboot-原理" class="router-link-active router-link-exact-active toc-link level2">10.4 SpringBoot 原理</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-1-springboot-启动过程" class="router-link-active router-link-exact-active toc-link level3">10.4.1 SpringBoot 启动过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-2-application-events-and-listeners" class="router-link-active router-link-exact-active toc-link level3">10.4.2 Application Events and Listeners</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/views/notes/Spring/SpringBoot%202%20%E9%9B%B7%E7%A5%9E%E8%A7%86%E9%A2%91%E6%80%BB%E7%BB%93.html#_10-4-3-applicationrunner-与-commandlinerunner" class="router-link-active router-link-exact-active toc-link level3">10.4.3 ApplicationRunner  与  CommandLineRunner</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><blockquote><p><a href="https://www.yuque.com/atguigu/springboot" target="_blank" rel="noopener noreferrer">SpringBoot2 核心技术与响应式编程<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h1 id="一、了解-springboot" tabindex="-1"><a class="header-anchor" href="#一、了解-springboot" aria-hidden="true">#</a> 一、了解 SpringBoot</h1><h2 id="_1、为什么要用-springboot" tabindex="-1"><a class="header-anchor" href="#_1、为什么要用-springboot" aria-hidden="true">#</a> 1、为什么要用 SpringBoot</h2><blockquote><p>Spring Boot makes it easy to create stand-alone, production-grade Spring based Applications that you can &quot;just run&quot;.</p><p>能快速创建出生产级别的 Spring 应用。</p></blockquote><h2 id="_2、springboot-优点" tabindex="-1"><a class="header-anchor" href="#_2、springboot-优点" aria-hidden="true">#</a> 2、SpringBoot 优点</h2><ul><li><p>Create stand-alone Spring applications</p><p>创建独立 Spring 应用</p></li><li><p>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</p><p>内嵌 Web 服务器（默认使用 Tomcat）</p></li><li><p>Provide opinionated &#39;starter&#39; dependencies to simplify your build configuration</p><p>自动starter依赖，简化构建配置</p></li><li><p>Automatically configure Spring and 3rd party libraries whenever possible</p><p>自动配置 Spring 以及第三方功能</p></li><li><p>Provide production-ready features such as metrics, health checks, and externalized configuration</p><p>提供生产级别的监控、健康检查及外部化配置</p></li><li><p>Absolutely no code generation and no requirement for XML configuration</p><p>无代码生成、无需编写 XML</p></li></ul><blockquote><p>SpringBoot 是整合 Spring 技术栈的一站式框架。</p><p>SpringBoot 是简化 Spring 技术栈的快速开发脚手架。</p></blockquote><h2 id="_3、springboot-缺点" tabindex="-1"><a class="header-anchor" href="#_3、springboot-缺点" aria-hidden="true">#</a> 3、SpringBoot 缺点</h2><ul><li>迭代快，需要时刻关注版本变化。</li><li>封装太深，内部原理复杂，不容易精通。</li></ul><h2 id="_4、微服务" tabindex="-1"><a class="header-anchor" href="#_4、微服务" aria-hidden="true">#</a> 4、微服务</h2><p><a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="noopener noreferrer">James Lewis and Martin Fowler (2014)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 提出<a href="https://martinfowler.com/microservices/" target="_blank" rel="noopener noreferrer">微服务<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>完整概念。</p><blockquote><p>In short, the <strong>microservice architectural style</strong> is an approach to developing a single application as a <strong>suite of small services</strong>, each <strong>running in its own process</strong> and communicating with <strong>lightweight</strong> mechanisms, often an <strong>HTTP</strong> resource API. These services are <strong>built around business capabilities</strong> and <strong>independently deployable</strong> by fully <strong>automated deployment</strong> machinery. There is a <strong>bare minimum of centralized management</strong> of these services, which may be <strong>written in different programming languages</strong> and use different data storage technologies.-- <a href="https://martinfowler.com/articles/microservices.html" target="_blank" rel="noopener noreferrer">James Lewis and Martin Fowler (2014)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><ul><li>微服务是一种<strong>架构风格</strong></li><li>一个应用拆分为<strong>一组小型服务</strong></li><li>每个服务运行在自己的进程内，也就是可<strong>独立部署和升级</strong></li><li>服务之间使用轻量级 <strong>HTTP 交互</strong></li><li>服务围绕业务功能<strong>拆分</strong></li><li>可以由<strong>全自动部署</strong>机制独立部署</li><li><strong>去中心化</strong>，<strong>服务自治</strong>。服务可以使用<strong>不同的语言</strong>、<strong>不同的存储技术</strong></li></ul><h2 id="_5、分布式" tabindex="-1"><a class="header-anchor" href="#_5、分布式" aria-hidden="true">#</a> 5、分布式</h2><h3 id="分布式的困难" tabindex="-1"><a class="header-anchor" href="#分布式的困难" aria-hidden="true">#</a> 分布式的困难</h3><ul><li>配置管理</li><li>服务发现</li><li>远程调用</li><li>负载均衡</li><li>服务容错</li><li>服务监控</li><li>链路追踪</li><li>日志管理</li><li>任务调度</li><li>......</li></ul><h3 id="分布式的解决" tabindex="-1"><a class="header-anchor" href="#分布式的解决" aria-hidden="true">#</a> 分布式的解决</h3><ul><li>SpringBoot + SpringCloud</li></ul><h2 id="_6、云原生-cloud-native" tabindex="-1"><a class="header-anchor" href="#_6、云原生-cloud-native" aria-hidden="true">#</a> 6、云原生（Cloud Native）</h2><p>原生应用如何上云。</p><h3 id="上云的困难" tabindex="-1"><a class="header-anchor" href="#上云的困难" aria-hidden="true">#</a> 上云的困难</h3><ul><li>服务自愈</li><li>弹性伸缩</li><li>服务隔离</li><li>自动化部署</li><li>灰度发布</li><li>流量治理</li><li>......</li></ul><h3 id="上云的解决" tabindex="-1"><a class="header-anchor" href="#上云的解决" aria-hidden="true">#</a> 上云的解决</h3><ul><li><strong>Docker</strong> 容器化技术</li><li><strong>Kubernetes</strong> 容器编排，简称 k8s</li><li><strong>DevOps</strong>，企业 <strong>CI/CD</strong>，构建企业云平台</li><li>拥抱新一代架构 <strong>Service Mesh</strong> 与 <strong>Serverless</strong></li></ul><h1 id="二、基础入门" tabindex="-1"><a class="header-anchor" href="#二、基础入门" aria-hidden="true">#</a> 二、基础入门</h1><h2 id="_1、环境准备" tabindex="-1"><a class="header-anchor" href="#_1、环境准备" aria-hidden="true">#</a> 1、环境准备</h2><p>参照<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/getting-started.html#getting-started-installing-the-cli" target="_blank" rel="noopener noreferrer">官方帮助文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>配置：</p><ul><li><a href="https://www.oracle.com/cn/java/technologies/javase/javase-jdk8-downloads.html" target="_blank" rel="noopener noreferrer">Java 8<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 及以上。</li><li><a href="https://maven.apache.org/download.cgi" target="_blank" rel="noopener noreferrer">Maven 3.3+<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：项目管理工具，可以对 Java 项目进行构建、依赖管理。</li><li><a href="https://www.jetbrains.com.cn/idea/download/" target="_blank" rel="noopener noreferrer">IntellIJ IDEA<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：项目开发工具。</li></ul><h3 id="_1-1-maven-设置" tabindex="-1"><a class="header-anchor" href="#_1-1-maven-设置" aria-hidden="true">#</a> 1.1 Maven 设置</h3><p>给 Maven 的 <strong>settings.xml</strong> 中添加默认 <strong>JDK</strong> 版本、默认 **UTF-**8 编码以及阿里云的镜像源。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>JDK1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdk</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jdk</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.compilerVersion</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.compilerVersion</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--编译编码--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">&gt;</span></span>
	 <span class="token comment">&lt;!-- 阿里云仓库 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>aliyun maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-idea-设置" tabindex="-1"><a class="header-anchor" href="#_1-2-idea-设置" aria-hidden="true">#</a> 1.2 IDEA 设置</h3><p>将 Maven 整合进来，IDEA 中 <strong>设置</strong> 和 <strong>新项目设置</strong> 中的 Maven 都要设定。</p><p><img src="https://qiniu.dyl.fit/maven设置.png" alt="Maven 设置"></p><h2 id="_2、helloworld" tabindex="-1"><a class="header-anchor" href="#_2、helloworld" aria-hidden="true">#</a> 2、HelloWorld</h2><p>功能：浏览器发送<code>/hello</code>请求，服务器接受请求并处理，响应 <strong>Hello World</strong> 字符串。</p><h3 id="_2-1-创建一个-maven-工程" tabindex="-1"><a class="header-anchor" href="#_2-1-创建一个-maven-工程" aria-hidden="true">#</a> 2.1 创建一个 Maven 工程</h3><p>新建一个名为 <strong>spring-boot-01-helloworld</strong> 的 Maven 工程。</p><h3 id="_2-2-导入-springboot-相关的依赖" tabindex="-1"><a class="header-anchor" href="#_2-2-导入-springboot-相关的依赖" aria-hidden="true">#</a> 2.2 导入 SpringBoot 相关的依赖</h3><p><strong>pom.xml</strong> 中加入 SpringBoot 依赖。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Web 应用开发场景 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-编写主程序-mainapplication" tabindex="-1"><a class="header-anchor" href="#_2-3-编写主程序-mainapplication" aria-hidden="true">#</a> 2.3 编写主程序 MainApplication</h3><p><strong>src\main\java</strong> 下新建一个 com.xxx.<code>HelloWorldMainApplication</code>类。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>/**
 *  SpringBootApplication 标注一个主程序类，说明这是一个SpringBoot应用
 */
@SpringBootApplication
public class HelloWorldMainApplication {
    public static void main(String[] args) {
        // 启动Spring应用
        SpringApplication.run(HelloWorldMainApplication.class,args);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-4-编写-controller、service" tabindex="-1"><a class="header-anchor" href="#_2-4-编写-controller、service" aria-hidden="true">#</a> 2.4 编写 Controller、Service</h3><p><strong>src\main\java</strong> 下新建一个 <code>controller.HelloController</code> 类。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Controller // 作为控制器组件注册到容器中
public class HelloController {
    @ResponseBody // 返回结果（json或xml）直接写入 HTTP response body 中，一般在Ajax异步获取数据时使用
    @RequestMapping(&quot;/hello&quot;) // 映射/hello请求，即该方法处理/hello请求
    public String hello(){
        return &quot;Hello World!&quot;;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-5-运行主程序测试" tabindex="-1"><a class="header-anchor" href="#_2-5-运行主程序测试" aria-hidden="true">#</a> 2.5 运行主程序测试</h3><p><code>Ctrl+F5</code> 运行 <code>HelloWorldMainApplication</code>。</p><h3 id="_2-6-简化部署" tabindex="-1"><a class="header-anchor" href="#_2-6-简化部署" aria-hidden="true">#</a> 2.6 简化部署</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- Maven 插件，可以将应用打包成一个可执行的 jar 包 --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token comment">&lt;!-- 打包时跳过测试 --&gt;</span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>skipTests</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>skipTests</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>将这个应用打成 jar 包，直接使用<code>java -jar</code>的命令进行执行。</p><blockquote><p>注意：spring-boot-maven-plugin 报红的解决办法：指定具体的版本，如果依旧不行，把本地 maven 仓库中的 spring-boot-maven-plugin 文件夹删除，重新使用 maven 导入项目</p></blockquote><h2 id="_3、hello-world-探究" tabindex="-1"><a class="header-anchor" href="#_3、hello-world-探究" aria-hidden="true">#</a> 3、Hello World 探究</h2><h3 id="_3-1-pom-文件" tabindex="-1"><a class="header-anchor" href="#_3-1-pom-文件" aria-hidden="true">#</a> 3.1 POM 文件</h3><h4 id="_3-1-1-父项目" tabindex="-1"><a class="header-anchor" href="#_3-1-1-父项目" aria-hidden="true">#</a> 3.1.1 父项目</h4><p>项目下的 <strong>pom.xml</strong>：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- SpringBoot 的版本注册中心 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>spring-boot-starter-parent 包下的 spring-boot-starter-parent-<strong>a.b.c</strong>.pom（<strong>a.b.c</strong> 就是上面 pom.xml 中的版本号，本文是 <strong>2.6.4</strong>）：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 管理SpringBoot应用里面的所有默认依赖版本 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">&gt;</span></span>../../spring-boot-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relativePath</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以后我们导入默认依赖是不需要写版本号的（没有在 <strong>dependencies</strong> 里面管理的依赖需要声明版本号）。</p><h4 id="_3-1-2-启动器" tabindex="-1"><a class="header-anchor" href="#_3-1-2-启动器" aria-hidden="true">#</a> 3.1.2 启动器</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Web 应用开发场景 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>spring-boot-starter-*</strong>：SpringBoot 官方场景启动器，会导入相关开发场景所需的所有依赖。</p><p>*<strong>-spring-boot-starter</strong>：自定义的场景启动器。</p><p>SpringBoot 将所有的功能场景都<strong>抽取</strong>出来，做成一个个的 <strong>starter</strong>（启动器），只需要在项目里面<strong>引入</strong>这些 <strong>starter</strong>，相关场景的所有依赖都会<strong>导入</strong>进来。要用什么功能就导入什么场景的启动器，引入之后记得点击编辑区右上角的 <strong>m 图标</strong>，来下载这些依赖。</p><blockquote><p>SpringBoot 支持的<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter" target="_blank" rel="noopener noreferrer">所有场景<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p></blockquote><h3 id="_3-2-主程序类" tabindex="-1"><a class="header-anchor" href="#_3-2-主程序类" aria-hidden="true">#</a> 3.2 主程序类</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 *  SpringBootApplication 标注一个主程序类，说明这是一个SpringBoot应用
 */</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorldMainApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 启动Spring应用</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HelloWorldMainApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>@SpringBootApplication</code>：标注在某个类上说明这个类是 SpringBoot 的主配置类，SpringBoot 就应该运行这个类的 <code>main()</code> 方法来启动 SpringBoot 应用。</p><h2 id="_4、快速创建-springboot-项目" tabindex="-1"><a class="header-anchor" href="#_4、快速创建-springboot-项目" aria-hidden="true">#</a> 4、快速创建 SpringBoot 项目</h2><h3 id="_4-1-idea-使用-spring-initializer-快速创建项目" tabindex="-1"><a class="header-anchor" href="#_4-1-idea-使用-spring-initializer-快速创建项目" aria-hidden="true">#</a> 4.1 IDEA：使用 Spring Initializer 快速创建项目</h3><p>项目类型选择 <strong>Spring Initializr</strong>，修改完<strong>组</strong>（公司名）、<strong>工件</strong>（项目名）和<strong>Java版本</strong>后，选择我们需要的模块（如 Spring Web），向导会联网创建 SpringBoot 项目并下载到本地。</p><ul><li>主程序已经生成好了，只需编写自己的业务代码。</li><li><strong>resources</strong>文件夹中目录结构 <ul><li><strong>static</strong>：静态资源， js、css、images。</li><li><strong>templates</strong>：模板页面（SpringBoot 默认默认不支持 jsp 页面），可以使用模板引擎（<strong>FreeMarker</strong>、<strong>Thymeleaf</strong>）。</li><li><strong>application.properties</strong>：配置文件，可以修改一些默认设置。</li></ul></li></ul><h1 id="三、容器功能" tabindex="-1"><a class="header-anchor" href="#三、容器功能" aria-hidden="true">#</a> 三、容器功能</h1><h2 id="_1、配置文件" tabindex="-1"><a class="header-anchor" href="#_1、配置文件" aria-hidden="true">#</a> 1、配置文件</h2><p>SpringBoot 使用一个全局的配置文件，配置文件名是固定的。</p><ul><li><strong>application.properties</strong></li><li><strong>application.yml</strong> 或 <strong>application.yam</strong>l（建议使用）</li></ul><p>配置文件的作用：修改 SpringBoot 自动配置的默认值。</p><p>YAML（YAML Ain&#39;t Markup Language）</p><p>​ YAML A Markup Language：是一种<strong>标记语言</strong></p><p>​ YAML isn&#39;t Markup Language：不是一种标记语言</p><p>​ Yet another Markup Language：仍是一种标记语言</p><p>优点：<strong>没有</strong>额外的定界符，更<strong>轻量</strong>，更<strong>易读</strong>。</p><h2 id="_2、yaml语法" tabindex="-1"><a class="header-anchor" href="#_2、yaml语法" aria-hidden="true">#</a> 2、YAML语法</h2><h3 id="_2-1-基本语法" tabindex="-1"><a class="header-anchor" href="#_2-1-基本语法" aria-hidden="true">#</a> 2.1 基本语法</h3><ul><li><code>key: value</code> -&gt; <strong>value</strong> 前面一定要有<strong>空格</strong></li><li>大小写<strong>敏感</strong></li><li>使用<strong>缩进</strong>表示层级关系</li><li>缩进不允许使用tab，只允许<strong>空格</strong></li><li>缩进的空格数不重要，只要相同层级的元素<strong>左对齐</strong>即可</li><li><code>#</code> 表示注释</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>
    <span class="token key atrule">path</span><span class="token punctuation">:</span> /hello
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-值的写法" tabindex="-1"><a class="header-anchor" href="#_2-2-值的写法" aria-hidden="true">#</a> 2.2 值的写法</h3><h4 id="_2-2-1-字面量" tabindex="-1"><a class="header-anchor" href="#_2-2-1-字面量" aria-hidden="true">#</a> 2.2.1 字面量</h4><p>普通的值（<strong>数字</strong>，<strong>字符串</strong>，<strong>布尔值</strong>）</p><p><code>k: v</code></p><p>​ 字符串默认不用加上单引号或者双引号。</p><p>​ &quot;&quot;：双引号。<strong>不会转义</strong>字符串里面的特殊字符，特殊字符会作为本身想表示的意思。</p><p>​ <code>name: &quot;zhangsan \n lisi&quot;</code> 输出：<strong>zhangsan</strong> <strong>换行</strong> <strong>lisi</strong></p><p>​ &#39;&#39;：单引号。<strong>会转义</strong>特殊字符，特殊字符最终只是一个普通的字符串数据。</p><p>​ <code>name: &#39;zhangsan \n lisi&#39;</code> 输出：<strong>zhangsan</strong> <strong>\n</strong> <strong>lisi</strong></p><h4 id="_2-2-2-对象、map" tabindex="-1"><a class="header-anchor" href="#_2-2-2-对象、map" aria-hidden="true">#</a> 2.2.2 对象、Map</h4><p>（<strong>属性和值</strong>、<strong>键值对</strong>）</p><p><code>k: v</code> 在下一行来写对象的属性和值的关系，注意缩进。</p><p>​ 对象还是 <code>k: v</code> 的方式：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">friends</span><span class="token punctuation">:</span>
    <span class="token key atrule">lastName</span><span class="token punctuation">:</span> zhangsan
    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">20</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 行内写法：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">friends</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">lastName</span><span class="token punctuation">:</span> zhangsan<span class="token punctuation">,</span><span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-2-3-数组-list、set" tabindex="-1"><a class="header-anchor" href="#_2-2-3-数组-list、set" aria-hidden="true">#</a> 2.2.3 数组（List、Set）</h4><p>用 <code>- 值</code> 表示数组中的一个元素：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">pets</span><span class="token punctuation">:</span> 
	<span class="token punctuation">-</span> cat
	<span class="token punctuation">-</span> dog 
	<span class="token punctuation">-</span> pig
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>行内写法：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">pets</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>cat<span class="token punctuation">,</span> dog<span class="token punctuation">,</span> pig<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3、配置文件值注入" tabindex="-1"><a class="header-anchor" href="#_3、配置文件值注入" aria-hidden="true">#</a> 3、配置文件值注入</h2><p>配置文件 <strong>application.yml</strong>：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># yaml表示以上对象</span>
<span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">userName</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">boss</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">birth</span><span class="token punctuation">:</span> 2019/12/12 20<span class="token punctuation">:</span><span class="token datetime number">12:33</span>
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">pet</span><span class="token punctuation">:</span> 
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
    <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">23.4</span>
  <span class="token key atrule">interests</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>篮球<span class="token punctuation">,</span>游泳<span class="token punctuation">]</span>
  <span class="token key atrule">animal</span><span class="token punctuation">:</span> 
    <span class="token punctuation">-</span> jerry
    <span class="token punctuation">-</span> mario
  <span class="token key atrule">score</span><span class="token punctuation">:</span>
    <span class="token key atrule">english</span><span class="token punctuation">:</span> 
      <span class="token key atrule">first</span><span class="token punctuation">:</span> <span class="token number">30</span>
      <span class="token key atrule">second</span><span class="token punctuation">:</span> <span class="token number">40</span>
      <span class="token key atrule">third</span><span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token key atrule">math</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">131</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">148</span><span class="token punctuation">]</span>
    <span class="token key atrule">chinese</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">first</span><span class="token punctuation">:</span> <span class="token number">128</span><span class="token punctuation">,</span><span class="token key atrule">second</span><span class="token punctuation">:</span> <span class="token number">136</span><span class="token punctuation">}</span>
  <span class="token key atrule">salarys</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3999</span><span class="token punctuation">,</span><span class="token number">4999.98</span><span class="token punctuation">,</span><span class="token number">5999.99</span><span class="token punctuation">]</span>
  <span class="token key atrule">allPets</span><span class="token punctuation">:</span>
    <span class="token key atrule">sick</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> tom<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> jerry<span class="token punctuation">,</span><span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">47</span><span class="token punctuation">}</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> mario<span class="token punctuation">,</span><span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">47</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JavaBean：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定。
 */</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment">// 只有将组件注册到容器中，才能使用容器提供的ConfigurationProperties功能。</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;person&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 映射到配置文件中的person属性。</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Boolean</span> boss<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Date</span> birth<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Pet</span> pet<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> interests<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> animal<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> score<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Double</span><span class="token punctuation">&gt;</span></span> salarys<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Pet</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> allPets<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Pet</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Double</span> weight<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自定义的类和配置文件绑定一般没有提示，我们可以导入<strong>配置文件处理器</strong>。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 导入配置文件处理器，配置文件进行绑定就会有提示 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-1-配置文件的坑" tabindex="-1"><a class="header-anchor" href="#_3-1-配置文件的坑" aria-hidden="true">#</a> 3.1 配置文件的坑</h3><h4 id="_3-1-1-中文乱码" tabindex="-1"><a class="header-anchor" href="#_3-1-1-中文乱码" aria-hidden="true">#</a> 3.1.1 中文乱码</h4><p><strong>application.properties</strong> 配置中文值的时候，读取出来的属性值会出现乱码问题。但是 <strong>application.yml</strong> 不会出现乱码问题。原因是，Spring Boot 是以 <strong>ISO-8859-1</strong> 的编码方式读取 <strong>application.properties</strong> 配置文件。</p><h4 id="_3-1-2-加载顺序" tabindex="-1"><a class="header-anchor" href="#_3-1-2-加载顺序" aria-hidden="true">#</a> 3.1.2 加载顺序</h4><p>Java 的 <code>Properties</code> 加载属性文件后是无法保证输出的顺序与文件中一致的，因为 <code>Properties</code> 是继承自 <code>Hashtable</code> 的， <strong>key/value</strong> 都是直接存在 <code>Hashtable</code> 中的，而 <code>Hashtable</code> 是不保证进出顺序的。</p><p>所以如果需要属性保持有序，请使用 <strong>application.yml</strong>。</p><h4 id="_3-1-3-用户名" tabindex="-1"><a class="header-anchor" href="#_3-1-3-用户名" aria-hidden="true">#</a> 3.1.3 用户名</h4><p>如果定义一个键值对 <code>user.name=xxx</code> , 这里会读取不到对应写的属性值。为什么呢？SpringBoot 的默认 <code>StandardEnvironment</code> 首先将会加载 <strong>systemEnvironment</strong> 作为首个 <strong>PropertySource</strong>。而 <strong>source</strong> 即为 <code>System.getProperties()</code>，按照读取顺序，返回 <strong>systemEnvironment</strong> 的值即 <code>System.getProperty(&quot;user.name&quot;)</code>，Mac 电脑会读取自己的登录账号。</p><h3 id="_3-3-value和-configurationproperties比较" tabindex="-1"><a class="header-anchor" href="#_3-3-value和-configurationproperties比较" aria-hidden="true">#</a> 3.3 <code>@Value</code>和<code>@ConfigurationProperties</code>比较</h3><table><thead><tr><th>项目</th><th><strong>@ConfigurationProperties</strong></th><th><strong>@Value</strong></th></tr></thead><tbody><tr><td>功能</td><td>批量注入配置文件中的属性</td><td>分别指定</td></tr><tr><td>松散绑定（松散语法）</td><td>支持</td><td>不支持</td></tr><tr><td>SpEL</td><td>不支持</td><td>支持</td></tr><tr><td>JSR-303数据校验</td><td>支持</td><td>不支持</td></tr><tr><td>复杂类型封装</td><td>支持</td><td>不支持</td></tr></tbody></table><p>无论配置文件是 <strong>yml</strong> 还是 <strong>properties</strong> 他们都能获取到值。</p><p>如果说，我们只是在某个业务逻辑中需要获取一下配置文件中的某项值，使用 <code>@Value</code>。</p><p>如果说，我们专门编写了一个 JavaBean 来和配置文件进行映射，我们就直接使用<code>@ConfigurationProperties</code>。</p><h2 id="_4、输入数据校验" tabindex="-1"><a class="header-anchor" href="#_4、输入数据校验" aria-hidden="true">#</a> 4、输入数据校验</h2><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Component
@ConfigurationProperties(prefix = &quot;person&quot;)
@Validated // 启用数据校验
public class Person {
    /**
     * &lt;bean class=&quot;Person&quot;&gt;
     *      &lt;property name=&quot;lastName&quot; value=&quot;字面量/${key}从环境变量、配置文件中获取值/#{SpEL}&quot;&gt;&lt;/property&gt;
     * &lt;bean/&gt;
     */

    // lastName必须是邮箱格式
    @Email
    // @Value(&quot;${person.last-name}&quot;)
    private String lastName;
    // @Value(&quot;#{11*2}&quot;)
    private Integer age;
    // @Value(&quot;true&quot;)
    private Boolean boss;

    private Date birth;
    private Map&lt;String,Object&gt; maps;
    private List&lt;Object&gt; lists;
    private Dog dog;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5、加载配置文件" tabindex="-1"><a class="header-anchor" href="#_5、加载配置文件" aria-hidden="true">#</a> 5、加载配置文件</h2><h3 id="_5-1-propertysource" tabindex="-1"><a class="header-anchor" href="#_5-1-propertysource" aria-hidden="true">#</a> 5.1 <code>@PropertySource</code></h3><p>加载指定的 <strong>properties</strong> 配置文件。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>/**
 * @ConfigurationProperties：告诉SpringBoot将本类中的所有属性和配置文件中相关的配置进行绑定。
 */
@Component // 只有将组件注册到容器中，才能使用容器提供的ConfigurationProperties功能。
@PropertySource(value = {&quot;classpath:person.properties&quot;}) // 指定加载配置文件person.properties。
@ConfigurationProperties(prefix = &quot;person&quot;) // 映射到配置文件中的person属性。
//@Validated
public class Person {
    /**
     * &lt;bean class=&quot;Person&quot;&gt;
     *      &lt;property name=&quot;lastName&quot; value=&quot;字面量/${key}从环境变量、配置文件中获取值/#{SpEL}&quot;&gt;&lt;/property&gt;
     * &lt;bean/&gt;
     */

   //lastName必须是邮箱格式
   // @Email
    //@Value(&quot;${person.last-name}&quot;)
    private String lastName;
    //@Value(&quot;#{11*2}&quot;)
    private Integer age;
    //@Value(&quot;true&quot;)
    private Boolean boss;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-importresource" tabindex="-1"><a class="header-anchor" href="#_5-2-importresource" aria-hidden="true">#</a> 5.2 <code>@ImportResource</code></h3><p>为了兼容 Spring 应用，导入 Spring 的 <strong>xml</strong> 配置文件，让配置文件里面的内容生效。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@ImportResource(locations = {&quot;classpath:beans.xml&quot;}) // 导入Spring的配置文件@SpringBootApplicationpublic class SpringBoot02ConfigApplication {
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>beans.xml：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans<span class="token punctuation">&quot;</span></span>       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>helloService<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.springboot.service.HelloService<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>SpringBoot 推荐给容器中添加组件的方式。推荐使用全注解的方式：</p><p>1、配置类 <code>@Configuration</code> Spring 配置文件</p><p>2、使用 <code>@Bean</code> 给容器中添加组件</p><p>3、组件注解：<code>@Component</code>、<code>@Controller</code>、<code>@Service</code>、<code>@Repository</code></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>/**
 * @Configuration指明当前类是一个配置类，替代Spring配置文件。
 * 在配置文件中是使用&lt;bean&gt;&lt;/bean&gt;标签添加组件。
 */
@Configuration
public class MyAppConfig {
    // 将方法的返回值添加到容器中，容器中这个组件默认的ID就就是方法名
    @Bean
    public HelloService helloService() {
        System.out.println(&quot;配置类使用@Bean给容器中添加组件&quot;);
        return new HelloService();
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6、配置件占位符" tabindex="-1"><a class="header-anchor" href="#_6、配置件占位符" aria-hidden="true">#</a> 6、配置件占位符</h2><h3 id="_6-1-随机数" tabindex="-1"><a class="header-anchor" href="#_6-1-随机数" aria-hidden="true">#</a> 6.1 随机数</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>${random.uuid}、${random.value}、${random.int}、${random.long}${random.int(10)}、${random.int[1024,65536]}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6-2-使用占位符" tabindex="-1"><a class="header-anchor" href="#_6-2-使用占位符" aria-hidden="true">#</a> 6.2 使用占位符</h3><p>占位符获取之前配置的值，可以使用 <code>:</code> 指定默认值。</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">person.last-name</span><span class="token punctuation">=</span><span class="token value attr-value">王五${random.uuid}person.age=${random.int}person.birth=2020/04/18person.boss=falseperson.maps.k11=v11person.maps.k22=v22person.lists=a,b,cperson.dog.name=${person.hello:hello}_小黑person.dog.age=2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_7、profile" tabindex="-1"><a class="header-anchor" href="#_7、profile" aria-hidden="true">#</a> 7、Profile</h2><h3 id="_7-1-多-profile-文件" tabindex="-1"><a class="header-anchor" href="#_7-1-多-profile-文件" aria-hidden="true">#</a> 7.1 多 Profile 文件</h3><p>我们在主配置文件编写的时候，文件名可以是 <strong>application-{profile}.properties/yml/yaml</strong>。</p><p>默认使用 <strong>application.properties</strong> 的配置。</p><h3 id="_7-2-yml-支持多文档块方式" tabindex="-1"><a class="header-anchor" href="#_7-2-yml-支持多文档块方式" aria-hidden="true">#</a> 7.2 yml 支持多文档块方式</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> prod

<span class="token punctuation">---</span>
<span class="token comment"># 文档块2</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8083</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev

<span class="token punctuation">---</span>
<span class="token comment"># 文档块3</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8084</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span> prod  <span class="token comment">#指定属于哪个环境</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-激活指定-profile" tabindex="-1"><a class="header-anchor" href="#_7-3-激活指定-profile" aria-hidden="true">#</a> 7.3 激活指定 Profile</h3><p>1、在 <strong>application.properties</strong> 配置文件中指定：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.profiles.active</span><span class="token punctuation">=</span><span class="token value attr-value">dev</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>2、命令行：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">java</span> <span class="token value attr-value">-jar spring-boot-02-config-0.0.1-SNAPSHOT.jar --spring.profiles.active=dev</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可以直接在测试的时候，配置传入命令行参数。</p><p>3、虚拟机参数：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">-Dspring.profiles.active</span><span class="token punctuation">=</span><span class="token value attr-value">dev</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_8、配置文件加载位置" tabindex="-1"><a class="header-anchor" href="#_8、配置文件加载位置" aria-hidden="true">#</a> 8、配置文件加载位置</h2><p>SpringBoot 启动会扫描以下位置的 <strong>application.properties</strong> 或者 <strong>application.yml</strong> 文件作为 SpringBoot 的默认配置文件。</p><p>当前工程根目录和 <strong>resources</strong> 文件夹下：</p><p>/config/</p><p>/</p><p>优先级由高到底，高优先级的配置会覆盖低优先级的配置。</p><p>SpringBoot 会从这四个位置全部加载主配置文件，共同起作用形成<strong>互补配置</strong>。</p><p>我们还可以通过 <code>spring.config.location</code> 来改变默认的配置文件位置。</p><p>项目打包好以后，我们可以使用<strong>命令行参数</strong>的形式，启动项目的时候来指定配置文件的新位置。</p><p>指定配置文件和默认加载的这些配置文件共同起作用形成<strong>互补配置</strong>。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java -jar spring-boot-02-config-02-0.0.1-SNAPSHOT.jar --spring.config.location=D:/application.properties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>多个配置用空格分开，*--配置项**=*<em>值</em>。</p><p>SpringBoot 也可以<a href="https://docs.spring.io/spring-boot/docs/2.5.3/reference/htmlsingle/#features.external-config" target="_blank" rel="noopener noreferrer">从外部加载配置<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><h2 id="_9、自动配置原理" tabindex="-1"><a class="header-anchor" href="#_9、自动配置原理" aria-hidden="true">#</a> 9、自动配置原理</h2><h3 id="_9-1-引导加载自动配置类" tabindex="-1"><a class="header-anchor" href="#_9-1-引导加载自动配置类" aria-hidden="true">#</a> 9.1 <strong>引导加载自动配置类</strong></h3><p>SpringBoot 启动的时候加载主配置类，主配置类上的 <code>@SpringBootApplication</code> 注解开启了自动配置功能 <code>@EnableAutoConfiguration</code>。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfiguration</span>
<span class="token annotation punctuation">@EnableAutoConfiguration</span> <span class="token comment">// 开启自动配置</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>excludeFilters <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span>CUSTOM<span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">TypeExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">FilterType</span><span class="token punctuation">.</span>CUSTOM<span class="token punctuation">,</span> classes <span class="token operator">=</span> <span class="token class-name">AutoConfigurationExcludeFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_9-1-1-springbootconfiguration" tabindex="-1"><a class="header-anchor" href="#_9-1-1-springbootconfiguration" aria-hidden="true">#</a> 9.1.1 <code>@SpringBootConfiguration</code></h4><p>标注在某个类上，表示这是一个 SpringBoot 的配置类。</p><p><code>@Configuration</code>：配置类上使用这个注解。</p><p>配置类 → 配置文件，配置类也是容器中的一个组件（<code>@Component</code>）。</p><h4 id="_9-1-2-componentscan" tabindex="-1"><a class="header-anchor" href="#_9-1-2-componentscan" aria-hidden="true">#</a> 9.1.2 <code>@ComponentScan</code></h4><p>指定扫描哪些包，默认扫描主程序 <code>MainApplication</code> 所在的包及其子包。</p><h4 id="_9-1-3-enableautoconfiguration" tabindex="-1"><a class="header-anchor" href="#_9-1-3-enableautoconfiguration" aria-hidden="true">#</a> 9.1.3 <code>@EnableAutoConfiguration</code></h4><p>开启自动配置功能。</p><p>以前我们需要配置的东西，SpringBoot 帮我们自动配置。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@AutoConfigurationPackage</span>
    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><code>@AutoConfigurationPackage</code>：自动配置包。</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Registrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AutoConfigurationPackage</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>​ Spring 的底层注解 <code>@Import</code>，给容器中导入一个 <code>Registrar.class</code> 类型的组件。</p><p>​ 然后利用 <code>Registrar</code> 将主程序 <code>MainApplication</code> 所在的包及其子包里面的所有组件扫描并配置到 Spring 容器。</p><ul><li><p><code>@Import({AutoConfigurationImportSelector.class})</code>：导入组件。</p><ul><li><p>利用 <code>AutoConfigurationImportSelector.getAutoConfigurationEntry(AnnotationMetadata annotationMetadata)</code> 给容器中导入一些组件；</p></li><li><p>可以查看 <code>AutoConfigurationImportSelector.selectImports(AnnotationMetadata annotationMetadata)</code> 方法的内容；</p></li><li><p>获取候选的配置项。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>加载配置</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSpringFactoriesLoaderFactoryClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><p>扫描所有 jar 包类路径下 <strong>META-INF/spring.factories</strong>，把扫描到的这些文件的内容包装成 <strong>properties</strong> 对象。</p><p>从 <strong>properties</strong> 中获取到 <code>EnableAutoConfiguration</code> 属性下的类全限定名列表，然后把他们添加到容器中。</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># Auto Configure</span>
<span class="token key attr-name">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span><span class="token punctuation">=</span><span class="token value attr-value">\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\
...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>每一个这样的 <code>xxxAutoConfiguration</code> 类都是容器中的一个组件，都加入到容器中，用他们来做自动配置。</p><h3 id="_9-2-按需开启自动配置项" tabindex="-1"><a class="header-anchor" href="#_9-2-按需开启自动配置项" aria-hidden="true">#</a> 9.2 按需开启自动配置项</h3><h4 id="_9-2-1-conditional" tabindex="-1"><a class="header-anchor" href="#_9-2-1-conditional" aria-hidden="true">#</a> 9.2.1 <code>@Conditional</code></h4><p>作用：必须是 <code>@Conditional</code> 指定的条件成立，才给容器中添加组件，配置里面的所有内容才生效。</p><table><thead><tr><th>@Conditional扩展注解</th><th>作用（判断是否满足当前指定条件）</th></tr></thead><tbody><tr><td><a href="https://www.yuque.com/ConditionalOnJava" target="_blank" rel="noopener noreferrer">@ConditionalOnJava <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>系统的java版本是否符合要求</td></tr><tr><td><a href="https://www.yuque.com/ConditionalOnBean" target="_blank" rel="noopener noreferrer">@ConditionalOnBean <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>容器中存在指定Bean；</td></tr><tr><td>@ConditionalOnMissingBean</td><td>容器中不存在指定Bean；</td></tr><tr><td>@ConditionalOnExpression</td><td>满足SpEL表达式指定</td></tr><tr><td><a href="https://www.yuque.com/ConditionalOnClass" target="_blank" rel="noopener noreferrer">@ConditionalOnClass<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>系统中有指定的类</td></tr><tr><td>@ConditionalOnMissingClass</td><td>系统中没有指定的类</td></tr><tr><td>@ConditionalOnSingleCandidate</td><td>容器中只有一个指定的Bean，或者这个Bean是首选Bean</td></tr><tr><td>@ConditionalOnProperty</td><td>系统中指定的属性是否有指定的值</td></tr><tr><td>@ConditionalOnResource</td><td>类路径下是否存在指定资源文件</td></tr><tr><td>@ConditionalOnWebApplication</td><td>当前是web环境</td></tr><tr><td>@ConditionalOnNotWebApplication</td><td>当前不是web环境</td></tr><tr><td><a href="https://www.yuque.com/ConditionalOnJndi" target="_blank" rel="noopener noreferrer">@ConditionalOnJndi<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></td><td>JNDI存在指定项</td></tr></tbody></table><p><strong>自动配置类必须在一定的条件下才能生效。</strong></p><p>我们怎么知道哪些自动配置类生效？</p><p>我们可以通过启用 <code>debug=true</code> 属性，来让控制台打印自动配置报告，这样我们就可以很方便地知道哪些自动配置类生效。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>
AUTO<span class="token operator">-</span><span class="token class-name">CONFIGURATION</span> REPORT
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>


<span class="token class-name">Positive</span> matches<span class="token operator">:</span> <span class="token comment">// 自动配置类启用的</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

   <span class="token class-name">DispatcherServletAutoConfiguration</span> matched<span class="token operator">:</span>
      <span class="token operator">-</span> <span class="token annotation punctuation">@ConditionalOnClass</span> found required <span class="token keyword">class</span> &#39;<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span>DispatcherServlet</span>&#39;<span class="token punctuation">;</span> <span class="token annotation punctuation">@ConditionalOnMissingClass</span> did not find unwanted <span class="token keyword">class</span> <span class="token punctuation">(</span><span class="token class-name">OnClassCondition</span><span class="token punctuation">)</span>
      <span class="token operator">-</span> <span class="token annotation punctuation">@ConditionalOnWebApplication</span> <span class="token punctuation">(</span>required<span class="token punctuation">)</span> found <span class="token class-name">StandardServletEnvironment</span> <span class="token punctuation">(</span><span class="token class-name">OnWebApplicationCondition</span><span class="token punctuation">)</span>
        
    
<span class="token class-name">Negative</span> matches<span class="token operator">:</span> <span class="token comment">// 没有启动，没有匹配成功的自动配置类</span>
<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>

   <span class="token class-name">ActiveMQAutoConfiguration</span><span class="token operator">:</span>
      <span class="token class-name">Did</span> not match<span class="token operator">:</span>
         <span class="token operator">-</span> <span class="token annotation punctuation">@ConditionalOnClass</span> did not find required classes &#39;<span class="token class-name"><span class="token namespace">javax<span class="token punctuation">.</span>jms<span class="token punctuation">.</span></span>ConnectionFactory</span><span class="token char">&#39;, &#39;</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>activemq<span class="token punctuation">.</span></span>ActiveMQConnectionFactory</span>&#39; <span class="token punctuation">(</span><span class="token class-name">OnClassCondition</span><span class="token punctuation">)</span>

   <span class="token class-name">AopAutoConfiguration</span><span class="token operator">:</span>
      <span class="token class-name">Did</span> not match<span class="token operator">:</span>
         <span class="token operator">-</span> <span class="token annotation punctuation">@ConditionalOnClass</span> did not find required classes &#39;<span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span>Aspect</span><span class="token char">&#39;, &#39;</span><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>aspectj<span class="token punctuation">.</span>lang<span class="token punctuation">.</span>reflect<span class="token punctuation">.</span></span>Advice</span>&#39; <span class="token punctuation">(</span><span class="token class-name">OnClassCondition</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-3-spring-mvc-自动配置" tabindex="-1"><a class="header-anchor" href="#_9-3-spring-mvc-自动配置" aria-hidden="true">#</a> 9.3 Spring MVC 自动配置</h3><p>以下是 SpringBoot 对 SpringMVC 的默认配置（<code>WebMvcAutoConfiguration</code>）：</p><ul><li><p>Inclusion of <code>ContentNegotiatingViewResolver</code> and <code>BeanNameViewResolver</code> beans.</p><ul><li>自动配置了 <code>ViewResolver</code>（视图解析器）：根据方法的返回值得到视图对象（<code>View</code>），视图对象决定如何渲染（转发？重定向？）.</li><li><code>ContentNegotiatingViewResolver</code>：组合所有的视图解析器的。</li><li>可以自己给容器中添加一个视图解析器（<code>@Bean</code>，<code>@Component</code>），SpringBoot 会自动地将其组合进来。</li></ul></li><li><p>Support for serving static resources, including support for WebJars (see below).</p><ul><li>静态资源文件夹路径，包括 <code>webjars</code>。</li></ul></li><li><p>Static <code>index.html</code> support.</p><ul><li>静态首页访问（欢迎页）。</li></ul></li><li><p>Custom <code>Favicon</code> support (see below).</p><ul><li>网站图标支持，即 <strong>favicon.ico</strong>。</li></ul></li><li><p>自动注册了 of <code>Converter</code>, <code>GenericConverter</code>, <code>Formatter</code> beans.</p><ul><li><p><code>Converter&lt;S, T&gt;</code>：转换器接口，将源类型 <code>S</code> 转换为目标类型 <code>T</code>。</p></li><li><p><code>GenericConverter</code>：通用转换器接口，用于两个以上类型之间的转换。</p></li><li><p><code>Formatter&lt;T&gt;</code> 格式化器接口，格式化成目标类型 <code>T</code>。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Bean
@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;date-format&quot;) // 在文件中配置日期格式化的规则
public Formatter&lt;Date&gt; dateFormatter() {
    return new DateFormatter(this.mvcProperties.getDateFormat()); // 日期格式化组件
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以自己给容器中添加一个格式化器转换器。</p></li></ul></li><li><p>Support for <code>HttpMessageConverters</code> (see below).</p><ul><li><code>HttpMessageConverter</code>：SpringMVC 用来转换 <code>HTTP</code> 请求和响应的。</li><li><code>HttpMessageConverters</code> 是从容器中确定的，获取所有的 <code>HttpMessageConverter</code>，然后看哪一个转换器能处理。</li><li>可以自己给容器中添加一个 <code>HttpMessageConverter</code>。</li></ul></li><li><p>Automatic registration of <code>MessageCodesResolver</code> (see below).</p><ul><li>定义错误代码生成规则。</li></ul></li><li><p>Automatic use of a <code>ConfigurableWebBindingInitializer</code> bean (see below).</p><ul><li>可以自己给容器中添加一个 <code>ConfigurableWebBindingInitializer</code> 来替换默认的。</li></ul></li></ul><h3 id="_9-4-扩展springmvc" tabindex="-1"><a class="header-anchor" href="#_9-4-扩展springmvc" aria-hidden="true">#</a> 9.4 扩展SpringMVC</h3><p>编写一个配置类（<code>@Configuration</code>），是 <code>WebMvcConfigurer</code> 类型。不能标注<code>@EnableWebMvc</code> 。</p><p>既保留了所有的自动配置，也能用我们扩展的配置。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 使用 WebMvcConfigurer 可以扩展 SpringMVC 的功能</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyMvcConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addViewControllers</span><span class="token punctuation">(</span><span class="token class-name">ViewControllerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 浏览器发送 /atguigu 请求来到 success 页面</span>
        registry<span class="token punctuation">.</span><span class="token function">addViewController</span><span class="token punctuation">(</span><span class="token string">&quot;/atguigu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原理：</p><ol><li><code>WebMvcConfigurer</code> 是 SpringMVC 的自动配置类;</li><li>在做其他自动配置时会导入；</li></ol><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Import(EnableWebMvcConfiguration.class)
@Configuration
public static class EnableWebMvcConfiguration extends DelegatingWebMvcConfiguration {
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>父类 <code>DelegatingWebMvcConfiguration</code>：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration(proxyBeanMethods = false)
public class DelegatingWebMvcConfiguration extends WebMvcConfigurationSupport {
    private final WebMvcConfigurerComposite configurers = new WebMvcConfigurerComposite();
    // 从容器中获取所有的 WebMvcConfigurer。
    @Autowired(required = false)
    public void setConfigurers(List&lt;WebMvcConfigurer&gt; configurers) {
        if (!CollectionUtils.isEmpty(configurers)) {
            this.configurers.addWebMvcConfigurers(configurers);
            // 一个参考实现：将所有 WebMvcConfigurer 相关配置一起调用。
            // @Override
            // protected void addViewControllers(ViewControllerRegistry registry) {
            //     this.configurers.addViewControllers(registry);
            // }
        }
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>容器中所有的 <code>WebMvcConfigurer</code> 都会同时起作用；</li><li>我们的配置类也会被调用。</li></ol><p>效果：SpringMVC 的自动配置和我们的扩展配置都会起作用。</p><h3 id="_9-5-全面接管-springmvc" tabindex="-1"><a class="header-anchor" href="#_9-5-全面接管-springmvc" aria-hidden="true">#</a> 9.5 全面接管 SpringMVC</h3><p>不使用 SpringBoot 对 SpringMVC 的自动配置，而是使用自定义配置。</p><p>只要配置类中添加 <code>@EnableWebMvc</code> 即可：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// 使用 WebMvcConfigurerAdapter 可以来扩展 SpringMVC 的功能
@EnableWebMvc
@Configuration
public class MyMvcConfig extends WebMvcConfigurerAdapter {
    @Override
    public void addViewControllers(ViewControllerRegistry registry) {
        // super.addViewControllers(registry);
        //浏览器发送 /atguigu 请求来到 success 页面
        registry.addViewController(&quot;/atguigu&quot;).setViewName(&quot;success&quot;);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>原理：</strong></p><p>为什么使用 <code>@EnableWebMvc</code> 自动配置就失效了。</p><ol><li><code>@EnableWebMvc</code> 导入了 <code>DelegatingWebMvcConfiguration</code> 组件；</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">DelegatingWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableWebMvc</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p><code>DelegatingWebMvcConfiguration</code> 继承了 <code>WebMvcConfigurationSupport</code> 类；</p><p>把所有系统中的 <code>WebMvcConfigurer</code> 拿过来，所有功能的定制都是这些 <code>WebMvcConfigurer</code> 合起来一起生效的；</p><p>自动配置了一些非常底层的组件，<code>RequestMappingHandlerMapping</code>、这些组件依赖的组件都是从容器中获取。</p></li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DelegatingWebMvcConfiguration</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurationSupport</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><code>WebMvcAutoConfiguration</code> 只有当容器中没有 <code>WebMvcConfigurationSupport</code> 组件的时候才生效；</li></ol><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 容器中没有这个组件的时候，这个自动配置类才生效。</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
        <span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><p>而第 2 步中，<code>@EnableWebMvc</code> 已经将 <code>WebMvcConfigurationSupport</code> 组件导入进来了。</p></li><li><p>导入的 <code>WebMvcConfigurationSupport</code> 只是 SpringMVC 最基本的功能。</p></li></ol><h3 id="_9-6-修改默认配置" tabindex="-1"><a class="header-anchor" href="#_9-6-修改默认配置" aria-hidden="true">#</a> 9.6 修改默认配置</h3><p>可配置的<a href="https://docs.spring.io/spring-boot/docs/2.5.3/reference/htmlsingle/#application-properties" target="_blank" rel="noopener noreferrer">属性列表<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</p><ol><li>SpringBoot 在自动配置很多组件的时候，先看容器中有没有用户自己配置的（<code>@Bean</code>、<code>@Component</code>）如果有就用用户配置的，如果没有，才自动配置。如果有些组件可以有多个（<code>ViewResolver</code>）将用户配置的和自己默认的组合起来。</li><li>在 SpringBoot 中会有非常多的 <code>xxxConfigurer</code> 帮助我们进行<strong>扩展</strong>配置；</li><li>在 SpringBoot 中会有非常多的 <code>xxxCustomizer</code> 帮助我们进行<strong>定制</strong>配置。</li></ol><h3 id="_9-7-总结" tabindex="-1"><a class="header-anchor" href="#_9-7-总结" aria-hidden="true">#</a> 9.7 总结</h3><ul><li><p>SpringBoot 先加载所有的自动配置类 <code>xxxAutoConfiguration</code>。</p></li><li><p>每个自动配置类按照条件生效，默认都会绑定 <code>xxxProperties</code> 类，<code>xxxProperties</code> 类和对应配置文件进行了绑定。</p></li><li><p>定制化配置：</p><ul><li>用户直接使用 <code>@Bean</code>、<code>@Component</code> 替换底层的组件；</li><li>用户去看这个组件是获取的配置文件什么值就去修改。</li></ul></li></ul><p>场景 <strong>starter</strong> -&gt; <code>xxxAutoConfiguration</code> -&gt; 导入 <code>xxx</code> 组件 -&gt; 绑定 <code>xxxProperties</code> -&gt; 绑定配置文件项（application.properties）</p><h3 id="_9-8-最佳实践" tabindex="-1"><a class="header-anchor" href="#_9-8-最佳实践" aria-hidden="true">#</a> 9.8 最佳实践</h3><ul><li><p>引入场景依赖；</p><ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter" target="_blank" rel="noopener noreferrer">Starters<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>。</li></ul></li><li><p>查看自动配置了哪些（选做）；</p><ul><li>自己分析，引入场景对应的自动配置一般都生效了；</li><li>配置文件中 <code>debug=true</code> 开启自动配置报告：<strong>Negative</strong>（不生效） \ <strong>Positive</strong>（生效）。</li></ul></li><li><p>是否需要修改配置项；</p><ul><li>参照文档修改配置项。 <ul><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties" target="_blank" rel="noopener noreferrer">Common Application Properties<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>；</li><li>自己分析，<code>xxxProperties</code> 配置类绑定了哪个配置文件；</li></ul></li></ul></li><li><p>自定义加入或者替换组件；</p><ul><li><p>编写自定义的配置类 <code>xxxConfiguration</code> + <code>@Bean</code>、<code>@Component</code> 替换、增加容器中默认组件。</p><ul><li>Web应用：编写一个配置类实现 <code>WebMvcConfigurer</code> 即可定制化 <strong>Web</strong> 功能 + <code>@Bean</code> 给容器中再扩展一些组件。</li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration
public class AdminWebConfig implements WebMvcConfigurer {
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        // 分页拦截器
        PaginationInnerInterceptor paginationInnerInterceptor = new PaginationInnerInterceptor(DbType.MYSQL);
        // 跳回首页
        paginationInnerInterceptor.setOverflow(true);
        // 每页不受限制
        paginationInnerInterceptor.setMaxLimit(-1L);
        interceptor.addInnerInterceptor(paginationInnerInterceptor);
        return interceptor;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>自定义器 <code>xxxCustomizer</code>；</p></li><li><p>......</p></li></ul><h3 id="_9-9-示例" tabindex="-1"><a class="header-anchor" href="#_9-9-示例" aria-hidden="true">#</a> 9.9 示例</h3><p>以 <code>HttpEncodingAutoConfiguration</code>（Http 编码自动配置）为例解释自动配置原理。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// 表示这是一个配置类，关闭 bean 代理（每次获取一个新的 bean，相当于 prototype）</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">HttpProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 将配置文件中对应的值和HttpProperties绑定起来，并把HttpProperties加入到容器中。</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">ConditionalOnWebApplication<span class="token punctuation">.</span>Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span> <span class="token comment">// 仅对 Web 应用生效。</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token class-name">CharacterEncodingFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// CharacterEncodingFilter 类存在时生效。SpringMVC中进行乱码解决的过滤器。</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.http.encoding&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token comment">// 判断配置文件中是否存在某个配置 spring.http.encoding=enabled。</span>
<span class="token comment">// 即使我们不配置，pring.http.encoding.enabled=true，也是默认生效的。</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpEncodingAutoConfiguration</span> <span class="token punctuation">{</span>
    <span class="token comment">// 它已经和SpringBoot的配置文件映射了。</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">HttpProperties<span class="token punctuation">.</span>Encoding</span> properties<span class="token punctuation">;</span>

    <span class="token comment">// 只有一个有参构造器的情况下，参数的值就会从容器中拿。</span>
    <span class="token keyword">public</span> <span class="token class-name">HttpEncodingAutoConfiguration</span><span class="token punctuation">(</span><span class="token class-name">HttpProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">getEncoding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span> <span class="token comment">// 给容器中添加一个组件，这个组件的某些值需要从 properties 中获取。</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span> <span class="token comment">// 容器中没有这个组件时才生效。</span>
    <span class="token keyword">public</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token function">characterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">CharacterEncodingFilter</span> filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderedCharacterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setForceRequestEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Type</span><span class="token punctuation">.</span>REQUEST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setForceResponseEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span><span class="token class-name">Type</span><span class="token punctuation">.</span>RESPONSE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> filter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="四、日志" tabindex="-1"><a class="header-anchor" href="#四、日志" aria-hidden="true">#</a> 四、日志</h1><h2 id="_1、日志框架" tabindex="-1"><a class="header-anchor" href="#_1、日志框架" aria-hidden="true">#</a> 1、日志框架</h2><p>小张要开发一个大型系统。</p><ol><li><p>System.out.println(&quot;&quot;)。将关键数据打印在控制台。去掉？写在一个文件？</p></li><li><p>框架来记录系统的一些运行时信息。日志框架 。<strong>zhanglogging.jar</strong>。</p></li><li><p>高大上的几个功能？异步模式？自动归档？xxx？<strong>zhanglogging-good.jar。</strong></p></li><li><p>将以前框架卸下来？换上新的框架，重新修改之前相关的API。<strong>zhanglogging-prefect.jar</strong>。</p></li><li><p>JDBC---数据库驱动。</p></li></ol><p>写了一个统一的接口层，日志门面（日志的一个抽象层）：<strong>logging-abstract.jar</strong>。</p><p>给项目中导入具体的日志实现就行了。我们之前的日志框架都是实现的抽象层。</p><p><strong>市面上的日志框架。</strong></p><p>JUL、JCL、Jboss-logging、logback、log4j、log4j2、SLF4j...</p><table><thead><tr><th>日志门面 （日志的抽象层）</th><th>日志实现</th></tr></thead><tbody><tr><td>JCL（Jakarta Commons Logging） 、<strong>SLF4j</strong>（Simple Logging Facade for Java）、Jboss-logging</td><td>Log4j、JUL（java.util.logging）、Log4j2、<strong>Logback</strong></td></tr></tbody></table><p>左边选一个门面（抽象层）、右边来选一个实现。</p><p>Spring 框架默认是用 <strong>JCL</strong>。</p><p>SpringBoot 选用 <strong>SLF4j</strong> 和 <strong>logback</strong>。</p><h2 id="_2、slf4j-使用" tabindex="-1"><a class="header-anchor" href="#_2、slf4j-使用" aria-hidden="true">#</a> 2、SLF4j 使用</h2><h3 id="_2-1-如何在系统中使用-slf4j" tabindex="-1"><a class="header-anchor" href="#_2-1-如何在系统中使用-slf4j" aria-hidden="true">#</a> 2.1 如何在系统中使用 SLF4j</h3><p>https://www.slf4j.org</p><p>以后开发的时候，日志记录方法的调用，不应该来直接调用日志的实现类，而是调用日志抽象层里面的方法。</p><p>给系统里面导入 <strong>slf4j</strong> 的抽象层 jar 和 <strong>logback</strong> 的实现层 jar。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">LoggerFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token class-name">HelloWorld</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>图示：</p><p><img src="https://qiniu.dyl.fit/使用 SLF4J.png" alt="使用 SLF4J"></p><p>每一个日志的实现框架都有自己的配置文件。</p><h3 id="_2-2-遗留问题" tabindex="-1"><a class="header-anchor" href="#_2-2-遗留问题" aria-hidden="true">#</a> 2.2 遗留问题</h3><p>A系统（slf4j + logback）: Spring（commons-logging）、Hibernate（jboss-logging）、MyBatis...</p><p>统一日志记录，即使是别的框架和我一起统一使用 <strong>slf4j</strong> 进行输出？</p><p><img src="https://qiniu.dyl.fit/遗留系统使用 SLF4J.png" alt="遗留系统使用 SLF4J"></p><p><strong>如何让系统中所有的日志都统一到 slf4j？</strong></p><ol><li>将系统中其他日志框架先排除出去。</li><li>用中间包来替换原有的日志框架。</li><li>我们导入 <strong>slf4j</strong> 其他的实现。</li></ol><h2 id="_3、springboot-日志关系" tabindex="-1"><a class="header-anchor" href="#_3、springboot-日志关系" aria-hidden="true">#</a> 3、SpringBoot 日志关系</h2><p>SpringBoot 使用它来做日志功能。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>底层依赖关系：</p><p><img src="https://qiniu.dyl.fit/日志关系.png" alt="日志关系"></p><p>总结：</p><p>​ 1. SpringBoot 底层也是使用 <strong>slf4j</strong> + <strong>logback</strong> 的方式进行日志记录。</p><p>​ 2. SpringBoot 也把其他的日志都替换成了<strong>slf4j</strong>。</p><p>​ 3. 中间转换包？</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SuppressWarnings</span><span class="token punctuation">(</span><span class="token string">&quot;rawtypes&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LogFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">String</span> UNSUPPORTED_OPERATION_IN_JCL_OVER_SLF4J <span class="token operator">=</span> <span class="token string">&quot;http://www.slf4j.org/codes.html#unsupported_operation_in_jcl_over_slf4j&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token class-name">LogFactory</span> logFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SLF4JLogFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://qiniu.dyl.fit/日志中间转换包.png" alt="日志中间转换包"></p><p>​ 4. 如果我们要引入其他框架，一定要把这个框架的默认日志依赖移除掉。</p><p>​ Spring 框架用的是 <strong>commons-logging（JCL）</strong>。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot 能自动适配所有的日志，而且底层使用 <strong>slf4j</strong> + <strong>logback</strong> 的方式记录日志，引入其他框架的时候，只需要把这个框架依赖的日志框架排除掉即可。</p><h2 id="_4、日志使用" tabindex="-1"><a class="header-anchor" href="#_4、日志使用" aria-hidden="true">#</a> 4、日志使用</h2><h3 id="_4-1-默认配置" tabindex="-1"><a class="header-anchor" href="#_4-1-默认配置" aria-hidden="true">#</a> 4.1 默认配置</h3><p>SpringBoot 默认帮我们配置好了日志。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 记录器</span>
<span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">LoggerFactory</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// System.out.println();</span>

    <span class="token comment">// 日志的级别。</span>
    <span class="token comment">// 由低到高：trace &lt; debug &lt; info &lt; warn &lt; error</span>
    <span class="token comment">// 可以调整输出的日志级别，日志就只会在这个级别以以后的高级别生效</span>
    logger<span class="token punctuation">.</span><span class="token function">trace</span><span class="token punctuation">(</span><span class="token string">&quot;这是trace日志...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;这是debug日志...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// SpringBoot 默认给我们使用的是 info 级别的</span>
    logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;这是info日志...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;这是warn日志...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;这是error日志...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>日志输出格式：
    <span class="token operator">%</span>d表示日期时间，
    <span class="token operator">%</span>thread表示线程名，
    <span class="token operator">%</span><span class="token operator">-</span><span class="token number">5l</span>evel：级别从左显示<span class="token number">5</span>个字符宽度
    <span class="token operator">%</span>logger<span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> 表示logger名字最长<span class="token number">50</span>个字符，否则按照句点分割。 
    <span class="token operator">%</span>msg：日志消息，
    <span class="token operator">%</span>n是换行符
<span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span>MM<span class="token operator">-</span>dd HH<span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span>SSS<span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>thread<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span><span class="token number">5l</span>evel <span class="token operator">%</span>logger<span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">-</span> <span class="token operator">%</span>msg<span class="token operator">%</span>n
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot 修改日志的默认配置：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">logging.level.com.atguigu</span><span class="token punctuation">=</span><span class="token value attr-value">trace</span>

<span class="token comment"># 不指定路径，在当前项目下生成 springboot.log 日志。</span>
<span class="token comment">#logging.file.path=</span>

<span class="token comment"># 可以指定完整的路径。</span>
<span class="token comment">#logging.file.name=D:/springboot.log</span>

<span class="token comment"># 在当前磁盘的根路径下创建 /spring/log 文件夹，使用 spring.log 作为日志文件。</span>
<span class="token key attr-name">logging.file.path</span><span class="token punctuation">=</span><span class="token value attr-value">/spring/log</span>

<span class="token comment"># 在控制台输出的日志格式</span>
<span class="token key attr-name">logging.pattern.console</span><span class="token punctuation">=</span><span class="token value attr-value">%d{yyyy-MM-dd} [%thread] %-5level %logger{50} - %msg%n</span>

<span class="token comment"># 指定文件中输出的日志格式</span>
<span class="token key attr-name">logging.pattern.file</span><span class="token punctuation">=</span><span class="token value attr-value">%d{yyyy-MM-dd} === [%thread] === %-5level === %logger{50} === %msg%n</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>logging.file</th><th>logging.path</th><th>Example</th><th>Description</th></tr></thead><tbody><tr><td>(none)</td><td>(none)</td><td></td><td>只在控制台输出</td></tr><tr><td>指定文件名</td><td>(none)</td><td>my.log</td><td>输出日志到 <strong>my.log</strong> 文件</td></tr><tr><td>(none)</td><td>指定目录</td><td>/var/log</td><td>输出到指定目录的 <strong>spring.log</strong> 文件中</td></tr></tbody></table><h3 id="_4-2-指定配置" tabindex="-1"><a class="header-anchor" href="#_4-2-指定配置" aria-hidden="true">#</a> 4.2 指定配置</h3><p>给类路径下放上每个日志框架自己的配置文件即可，SpringBoot 就不使用它默认配置的了。</p><table><thead><tr><th>Logging System</th><th>Customization</th></tr></thead><tbody><tr><td>Logback</td><td><code>logback-spring.xml</code>, <code>logback-spring.groovy</code>, <code>logback.xml</code> or <code>logback.groovy</code></td></tr><tr><td>Log4j2</td><td><code>log4j2-spring.xml</code> or <code>log4j2.xml</code></td></tr><tr><td>JDK (Java Util Logging)</td><td><code>logging.properties</code></td></tr></tbody></table><p><strong>logback.xml</strong>：直接就被日志框架识别了。</p><p><strong>logback-spring.xml</strong>：日志框架就不直接加载日志的配置项，由 SpringBoot 解析日志配置，可以使用 SpringBoot 的高级 <strong>profile</strong> 功能。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 可以指定某段配置只在某个环境下生效 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stdout<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--
    日志输出格式：
        %d表示日期时间，
        %thread表示线程名，
        %-5level：级别从左显示5个字符宽度
        %logger{50} 表示logger名字最长50个字符，否则按照句点分割。 
        %msg：日志消息，
        %n是换行符
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>layout</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ch.qos.logback.classic.PatternLayout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} ----&gt; [%thread] ---&gt; %-5level %logger{50} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>springProfile</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>!dev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{yyyy-MM-dd HH:mm:ss.SSS} ==== [%thread] ==== %-5level %logger{50} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>springProfile</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>layout</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果使用 <strong>logback.xml</strong> 作为日志配置文件，还要使用 Profile 功能，会有以下错误</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>no applicable action <span class="token keyword">for</span> <span class="token punctuation">[</span>springProfile<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_5、切换日志框架" tabindex="-1"><a class="header-anchor" href="#_5、切换日志框架" aria-hidden="true">#</a> 5、切换日志框架</h2><p>可以按照 <strong>slf4j</strong> 的日志适配图，进行相关的切换。</p><p><strong>slf4j</strong> + <strong>log4j</strong> 的方式：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>logback-classic<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>ch.qos.logback<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-over-slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.slf4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>slf4j-log4j12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>切换为 <strong>log4j2</strong>：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-log4j2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="五、web-开发" tabindex="-1"><a class="header-anchor" href="#五、web-开发" aria-hidden="true">#</a> 五、Web 开发</h1><h2 id="_1、简介" tabindex="-1"><a class="header-anchor" href="#_1、简介" aria-hidden="true">#</a> 1、简介</h2><ol><li><p>创建 SpringBoot 应用，选中我们需要的 <strong>starter</strong> 模块。</p></li><li><p>SpringBoot 已经默认将这些场景配置好了，只需要在配置文件中指定少量配置就可以运行起来</p></li><li><p>自己编写业务代码。</p></li></ol><h2 id="_2、简单功能分析" tabindex="-1"><a class="header-anchor" href="#_2、简单功能分析" aria-hidden="true">#</a> 2、简单功能分析</h2><h3 id="_2-1-静态资源访问" tabindex="-1"><a class="header-anchor" href="#_2-1-静态资源访问" aria-hidden="true">#</a> 2.1 静态资源访问</h3><blockquote><p>静态资源：<code>css</code>、<code>jss</code>、<code>html</code>、<code>jpg</code> 等资源文件，用户多次访问都是获取同样的资源，可以被浏览器缓存。</p></blockquote><h4 id="_2-1-1-静态资源访问目录" tabindex="-1"><a class="header-anchor" href="#_2-1-1-静态资源访问目录" aria-hidden="true">#</a> 2.1.1 静态资源访问目录</h4><p>只要静态资源放在类路径下： called <code>/static</code> (or <code>/public</code> or <code>/resources</code> or <code>/META-INF/resources</code></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>&quot;classpath<span class="token punctuation">:</span>/META<span class="token punctuation">-</span>INF/resources/&quot;<span class="token punctuation">,</span> 
<span class="token string">&quot;classpath:/resources/&quot;</span><span class="token punctuation">,</span>
<span class="token string">&quot;classpath:/static/&quot;</span><span class="token punctuation">,</span> 
<span class="token string">&quot;classpath:/public/&quot;</span> 
&quot;/&quot;：当前项目的根路径
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问当前项目根路径 <code>/</code> + <code>静态资源名</code> ，就可以获取到对应的静态资源。</p><p>访问地址：http://localhost:8080/<strong>hello.jpg</strong>，去静态资源目录下找 <strong>hello.jpg</strong>。</p><p>原理： <strong>静态映射/*</strong>*。</p><p>请求进来，先去找 Controller 看能不能处理。不能处理的所有请求又都交给静态资源处理器。静态资源也找不到则响应 404 页面。</p><h4 id="_2-1-2-静态资源访问前缀" tabindex="-1"><a class="header-anchor" href="#_2-1-2-静态资源访问前缀" aria-hidden="true">#</a> 2.1.2 静态资源访问前缀</h4><p>默认无前缀。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问当前项目根路径 <code>/</code> + <code>static-path-pattern</code> + <code>静态资源名</code> ，就可以获取到对应的静态资源。</p><p>访问地址：http://localhost:8080/<strong>res</strong>/<strong>hello.jpg</strong>，去静态资源文件夹里面找 <strong>hello.jpg</strong>。</p><p>2.1.3 webjar 映射</p><p>所有 <code>/webjars/**</code> 请求，都会去 <code>classpath:/META-INF/resources/webjars/</code> 下找资源。</p><p><strong>webjars</strong>：以 jar 包的方式引入静态资源。</p><p>http://www.webjars.org</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 引入jquery-webjar --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.webjars<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jquery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://qiniu.dyl.fit/webjars.png" alt="webjars"></p><p>访问地址：http://localhost:8080/webjars/<strong>jquery/3.5.0/jquery.js</strong>，后面地址要按照依赖里面的包路径，就可以获取到对应的静态资源。</p><h4 id="_2-1-3-修改静态资源路径" tabindex="-1"><a class="header-anchor" href="#_2-1-3-修改静态资源路径" aria-hidden="true">#</a> 2.1.3 修改静态资源路径</h4><p>改变默认的静态资源前缀和目录：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span> <span class="token comment"># 修改前缀</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span> <span class="token comment"># 修改目录</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问地址：http://localhost:8080/<strong>res</strong>/<strong>haha</strong>/<strong>hello.jpg</strong>，去静态资源目录下找 <strong>hello.jpg</strong>。</p><h3 id="_2-2-欢迎页" tabindex="-1"><a class="header-anchor" href="#_2-2-欢迎页" aria-hidden="true">#</a> 2.2 欢迎页</h3><p>静态资源路径下的所有 <strong>index.html</strong> 页面，被 <code>/**</code> 映射。</p><ul><li>可以配置静态资源访问目录；</li><li>但是不能配置静态资源访问前缀，否则导致 <strong>index.html</strong> 不能被默认访问；</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment">#  mvc:</span>
<span class="token comment">#    static-path-pattern: /res/** # 这个会导致 Welcome Page 功能失效</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>访问地址：http://localhost:8080/，就会去静态资源目录下找 <strong>index.html</strong> 页面。</p><p>Controller 能处理 <code>/index</code> 请求。</p><h3 id="_2-3-自定义-favicon" tabindex="-1"><a class="header-anchor" href="#_2-3-自定义-favicon" aria-hidden="true">#</a> 2.3 自定义 Favicon</h3><p>将 <code>favicon.ico</code> 放在静态资源目录下即可。</p><p>跟「欢迎页」一样，不能配置静态资源访问前缀，否则不能访问自定义图标。</p><h3 id="_2-4-静态资源配置原理" tabindex="-1"><a class="header-anchor" href="#_2-4-静态资源配置原理" aria-hidden="true">#</a> 2.4 静态资源配置原理</h3><ul><li>SpringBoot 启动默认加载 <code>xxxAutoConfiguration</code> 类（自动配置类）。</li><li>SpringMVC 功能的自动配置类 <code>WebMvcAutoConfiguration</code> 生效。</li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration(proxyBeanMethods = false)
@ConditionalOnWebApplication(type = Type.SERVLET)
@ConditionalOnClass({Servlet.class, DispatcherServlet.class, WebMvcConfigurer.class})
@ConditionalOnMissingBean({WebMvcConfigurationSupport.class})
@AutoConfigureOrder(-2147483638)
@AutoConfigureAfter({DispatcherServletAutoConfiguration.class, TaskExecutionAutoConfiguration.class, ValidationAutoConfiguration.class})
public class WebMvcAutoConfiguration {
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>查看 <code>WebMvcConfigurer</code> 接口的实现类 <code>WebMvcAutoConfigurationAdapter</code>，看看给容器中配置了什么</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration(proxyBeanMethods = false)
@Import({WebMvcAutoConfiguration.EnableWebMvcConfiguration.class})
@EnableConfigurationProperties({WebMvcProperties.class, ResourceProperties.class, WebProperties.class})
@Order(0)
public static class WebMvcAutoConfigurationAdapter implements WebMvcConfigurer, ServletContextAware {
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>配置类和配置文件的相关属性 <code>spring.xxx</code> 进行了绑定。</p><ul><li><p><code>WebMvcProperties</code> 绑定 <code>spring.mvc</code></p></li><li><p><code>ResourceProperties</code>（已过时） 绑定 <code>spring.resources</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Deprecated</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.resources&quot;</span><span class="token punctuation">,</span> ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceProperties</span> <span class="token keyword">extends</span> <span class="token class-name">Resources</span> <span class="token punctuation">{</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>WebProperties</code> 绑定 <code>spring.web</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span><span class="token string">&quot;spring.web&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebProperties</span> <span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Resources</span> <span class="token punctuation">{</span>

		<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">&quot;classpath:/META-INF/resources/&quot;</span><span class="token punctuation">,</span>
				<span class="token string">&quot;classpath:/resources/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/static/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;classpath:/public/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

		<span class="token doc-comment comment">/**
		 * Locations of static resources. Defaults to classpath:[/META-INF/resources/,
		 * /resources/, /static/, /public/].
		 */</span>
		<span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> staticLocations <span class="token operator">=</span> CLASSPATH_RESOURCE_LOCATIONS<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="_2-4-1-配置唯一的有参类构造函数" tabindex="-1"><a class="header-anchor" href="#_2-4-1-配置唯一的有参类构造函数" aria-hidden="true">#</a> 2.4.1 配置唯一的有参类构造函数</h4><p>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration.<code>WebMvcAutoConfigurationAdapter#WebMvcAutoConfigurationAdapter()</code></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// 有参构造器所有参数的值都会从容器中获取
// ResourceProperties：获取和 spring.resources 绑定的所有的值的对象
// WebMvcProperties：获取和 spring.mvc 绑定的所有的值的对象
// ListableBeanFactory：Spring 的 beanFactory
// HttpMessageConverters：找到所有的 HttpMessageConverters
// ResourceHandlerRegistrationCustomizer：找到资源处理器的自定义器。
// DispatcherServletPath：配置访问路径
// ServletRegistrationBean：给应用注册 Listener -&gt; Fliter -&gt; Servlet
public WebMvcAutoConfigurationAdapter (ResourceProperties resourceProperties, WebMvcProperties mvcProperties,
                                       ListableBeanFactory beanFactory, ObjectProvider&lt;HttpMessageConverters&gt; messageConvertersProvider,
                                       ObjectProvider&lt;ResourceHandlerRegistrationCustomizer&gt; resourceHandlerRegistrationCustomizerProvider,
                                       ObjectProvider&lt;DispatcherServletPath&gt; dispatcherServletPath,
                                       ObjectProvider&lt;ServletRegistrationBean&lt;?&gt;&gt; servletRegistrations) {
    this.resourceProperties = resourceProperties;
    this.mvcProperties = mvcProperties;
    this.beanFactory = beanFactory;
    this.messageConvertersProvider = messageConvertersProvider;
    this.resourceHandlerRegistrationCustomizer = resourceHandlerRegistrationCustomizerProvider.getIfAvailable ();
    this.dispatcherServletPath = dispatcherServletPath;
    this.servletRegistrations = servletRegistrations;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-2-静态资源和-webjars-的处理规则" tabindex="-1"><a class="header-anchor" href="#_2-4-2-静态资源和-webjars-的处理规则" aria-hidden="true">#</a> 2.4.2 静态资源和 webjars 的处理规则</h4><p>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration.<code>WebMvcAutoConfigurationAdapter#addResourceHandlers()</code></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Override
public void addResourceHandlers (ResourceHandlerRegistry registry) {
    if (!this.resourceProperties.isAddMappings ()) {
        logger.debug (&quot;Default resource handling disabled&quot;);
        return;
    }
    Duration cachePeriod = this.resourceProperties.getCache ().getPeriod ();
    CacheControl cacheControl = this.resourceProperties.getCache ().getCachecontrol ().toHttpCacheControl ();
    // webjars 的处理规则
    if (!registry.hasMappingForPattern (&quot;/webjars/**&quot;)) {
        customizeResourceHandlerRegistration (registry.addResourceHandler (&quot;/webjars/**&quot;)
                                              .addResourceLocations (&quot;classpath:/META-INF/resources/webjars/&quot;)
                                              .setCachePeriod (getSeconds (cachePeriod)).setCacheControl (cacheControl));
    }
    // 静态资源的处理规则
    String staticPathPattern = this.mvcProperties.getStaticPathPattern ();
    if (!registry.hasMappingForPattern (staticPathPattern)) {
        customizeResourceHandlerRegistration (registry.addResourceHandler (staticPathPattern)
                                              .addResourceLocations (getResourceLocations (this.resourceProperties.getStaticLocations ()))
                                              .setCachePeriod (getSeconds (cachePeriod)).setCacheControl (cacheControl));
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-3-欢迎页的处理规则" tabindex="-1"><a class="header-anchor" href="#_2-4-3-欢迎页的处理规则" aria-hidden="true">#</a> 2.4.3 欢迎页的处理规则</h4><p>org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration.<code>EnableWebMvcConfiguration#welcomePageHandlerMapping()</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 配置欢迎页映射</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">WelcomePageHandlerMapping</span> <span class="token function">welcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span>
                                                           <span class="token class-name">FormattingConversionService</span> mvcConversionService<span class="token punctuation">,</span> <span class="token class-name">ResourceUrlProvider</span> mvcResourceUrlProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">WelcomePageHandlerMapping</span> welcomePageHandlerMapping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span>
        <span class="token keyword">new</span> <span class="token class-name">TemplateAvailabilityProviders</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">,</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setInterceptors</span><span class="token punctuation">(</span><span class="token function">getInterceptors</span><span class="token punctuation">(</span>mvcConversionService<span class="token punctuation">,</span> mvcResourceUrlProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setCorsConfigurations</span><span class="token punctuation">(</span><span class="token function">getCorsConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> welcomePageHandlerMapping<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// WelcomePageHandlerMapping 类的唯一有参构造函数</span>
<span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">TemplateAvailabilityProviders</span> templateAvailabilityProviders<span class="token punctuation">,</span>
                          <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span> <span class="token class-name">Resource</span> welcomePage<span class="token punctuation">,</span> <span class="token class-name">String</span> staticPathPattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>welcomePage <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;/**&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 要用欢迎页，必须使用默认的静态资源目录 /**</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page: &quot;</span> <span class="token operator">+</span> welcomePage<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;forward:index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">welcomeTemplateExists</span><span class="token punctuation">(</span>templateAvailabilityProviders<span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 调用 Controller 处理 /index 请求</span>
        logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page template: index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-4-favicon-的处理规则" tabindex="-1"><a class="header-anchor" href="#_2-4-4-favicon-的处理规则" aria-hidden="true">#</a> 2.4.4 Favicon 的处理规则</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// 配置喜欢的图标
@Configuration
@ConditionalOnProperty(value = &quot;spring.mvc.favicon.enabled&quot;, matchIfMissing = true)
public static class FaviconConfiguration {

    private final ResourceProperties resourceProperties;

    public FaviconConfiguration(ResourceProperties resourceProperties) {
        this.resourceProperties = resourceProperties;
    }

    @Bean
    public SimpleUrlHandlerMapping faviconHandlerMapping() {
        SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping();
        mapping.setOrder(Ordered.HIGHEST_PRECEDENCE + 1);
        // 映射所有 **/favicon.ico 
        mapping.setUrlMap(Collections.singletonMap(&quot;**/favicon.ico&quot;,
                faviconRequestHandler()));
        return mapping;
    }

    @Bean
    public ResourceHttpRequestHandler faviconRequestHandler() {
        ResourceHttpRequestHandler requestHandler = new ResourceHttpRequestHandler();
        requestHandler
                .setLocations(this.resourceProperties.getFaviconLocations());
        return requestHandler;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新版本没有这个类了，找到了下面这个类：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>public enum StaticResourceLocation {
	CSS(&quot;/css/**&quot;),
	JAVA_SCRIPT(&quot;/js/**&quot;),
	IMAGES(&quot;/images/**&quot;),
	WEB_JARS(&quot;/webjars/**&quot;),
	FAVICON(&quot;/favicon.*&quot;, &quot;/*/icon-*&quot;);

	private final String[] patterns;

	StaticResourceLocation(String... patterns) {
		this.patterns = patterns;
	}

	public Stream&lt;String&gt; getPatterns() {
		return Arrays.stream(this.patterns);
	}
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、请求响应参数处理" tabindex="-1"><a class="header-anchor" href="#_3、请求响应参数处理" aria-hidden="true">#</a> 3、请求响应参数处理</h2><h3 id="_3-1-请求映射" tabindex="-1"><a class="header-anchor" href="#_3-1-请求映射" aria-hidden="true">#</a> 3.1 请求映射</h3><h4 id="_3-1-1-rest-使用" tabindex="-1"><a class="header-anchor" href="#_3-1-1-rest-使用" aria-hidden="true">#</a> 3.1.1 REST 使用</h4><ul><li><p><code>@xxxMapping</code>（<code>@GetMapping</code>、<code>@PostMapping</code>、<code>@PutMapping</code>、<code>@DeleteMapping</code>，<code>@PatchMapping</code>是对 Put 的补充，区别是 Patch 是部分更新，Put 是全部更新，这些注解都是 Spring4.3 引入的）；</p></li><li><p><strong>REST</strong> 风格支持（使用 <strong>HTTP</strong> 请求方式动词来表示对资源的操作）</p></li></ul><table><thead><tr><th>操作</th><th>以前</th><th>现在（REST 风格）</th></tr></thead><tbody><tr><td>获取用户</td><td>/getUser 的 GET 请求</td><td>/user/id 的 GET 请求</td></tr><tr><td>保存用户</td><td>/saveUser 的 POST 请求</td><td>/user/id 的 POST 请求</td></tr><tr><td>修改用户</td><td>/editUser 的 POST 请求</td><td>/user/id 的 PUT 请求</td></tr><tr><td>删除用户</td><td>/deleteUser 的 POST 请求</td><td>/user/id 的 DELETE 请求</td></tr></tbody></table><ul><li>核心过滤器：浏览器 <strong>form</strong> 表单只支持 GET 与 POST 请求，而 DELETE、PUT 等 method 并不支持，Spring 3.0 添加了一个过滤器 <code>HiddenHttpMethodFilter</code>，可以将这些请求转换为标准的 <strong>HTTP</strong> 方法，使得支持 GET、POST、PUT 与 DELETE 请求。</li></ul><p>用法： SpringBoot 中手动开启 <strong>REST</strong> 支持，表单 <code>method=post</code>，隐藏域 <code>_method=put</code>。</p><p>扩展：如何把 <code>_method</code> 这个名字换成我们自己喜欢的。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;GET-张三&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;POST-张三&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>PUT<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">putUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;PUT-张三&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>DELETE<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;DELETE-张三&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Bean</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mvc.hiddenmethod.filter&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 自定义 HiddenHttpMethodFilter，将隐藏域方法名换成自己喜欢的 _m</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token keyword">public</span> <span class="token class-name">HiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">HiddenHttpMethodFilter</span> methodFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    methodFilter<span class="token punctuation">.</span><span class="token function">setMethodParam</span><span class="token punctuation">(</span><span class="token string">&quot;_m&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> methodFilter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-1-2-rest-原理" tabindex="-1"><a class="header-anchor" href="#_3-1-2-rest-原理" aria-hidden="true">#</a> 3.1.2 REST 原理</h4><p>原理（表单提交要使用 <strong>REST</strong> 的时候）</p><ul><li><p>表单提交会带上 <code>_method=使用的方法</code>。</p></li><li><p>请求过来被 <code>HiddenHttpMethodFilter</code> 拦截。</p><ul><li><p>请求是否正常，并且是 <strong>POST</strong>。</p><ul><li><p>获取到 <code>_method</code> 的值，统一转换成大写。</p></li><li><p>兼容以下请求：<strong>PUT</strong>、<strong>DELETE</strong>、<strong>PATCH</strong>。</p></li><li><p>原生 <code>request(post)</code>，包装模式 <code>requesWrapper</code> 重写了 <code>getMethod</code> 方法，返回的是传入的值。</p></li><li><p>过滤器链放行的时候用 <code>wrapper</code>，以后的方法调用 <code>getMethod</code> 是调用 <code>requesWrapper</code> 的。</p></li></ul></li></ul></li></ul><p><strong>使用客户端工具发送 REST 请求</strong></p><ul><li>如 PostMan 直接发送 Put、Delete 等方式请求，无需 Filter。</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">hiddenmethod</span><span class="token punctuation">:</span>
      <span class="token key atrule">filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment">#开启页面表单的 REST 功能</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-1-3-请求映射原理" tabindex="-1"><a class="header-anchor" href="#_3-1-3-请求映射原理" aria-hidden="true">#</a> 3.1.3 请求映射原理</h4><p><img src="https://qiniu.dyl.fit/请求映射原理.png" alt="请求映射原理"></p><p>SpringMVC 功能分析都从 org.springframework.web.servlet.<code>DispatcherServlet.doDispatch()</code> 方法开始。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>protected void doDispatch(HttpServletRequest request, HttpServletResponse response) throws Exception {
    HttpServletRequest processedRequest = request;
    HandlerExecutionChain mappedHandler = null;
    boolean multipartRequestParsed = false;
    WebAsyncManager asyncManager = WebAsyncUtils.getAsyncManager(request);

    try {
        try {
            ModelAndView mv = null;
            Object dispatchException = null;

            try {
                processedRequest = this.checkMultipart(request);
                multipartRequestParsed = processedRequest != request;
                // 找到当前请求使用哪个 Handler（Controller 的方法）处理
                mappedHandler = this.getHandler(processedRequest);
            
@Nullable
protected HandlerExecutionChain getHandler(HttpServletRequest request) throws Exception {
    if (this.handlerMappings != null) {
        Iterator var2 = this.handlerMappings.iterator();
        while(var2.hasNext()) {
            HandlerMapping mapping = (HandlerMapping)var2.next();
            HandlerExecutionChain handler = mapping.getHandler(request);
            if (handler != null) {
                return handler;
            }
        }
    }
    return null;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://qiniu.dyl.fit/handlerMappings.png" alt="handlerMappings"></p><p><code>RequestMappingHandlerMapping</code>：保存了所有 <code>@RequestMapping</code>（请求路径） 和 <code>Handlerg</code>（<code>Controller</code> 的方法） 的映射规则。</p><p><img src="https://qiniu.dyl.fit/RequestMappingHandlerMapping.png" alt="RequestMappingHandlerMapping"></p><p>所有的请求映射都在 <code>HandlerMapping</code> 中。</p><ul><li><p>SpringBoot 自动配置欢迎页的 <code>WelcomePageHandlerMapping</code>，访问 <code>/</code> 能访问到<strong>index.html</strong>；</p></li><li><p>SpringBoot 自动配置了默认的 <code>RequestMappingHandlerMapping</code>：</p></li><li><p>请求进来，挨个尝试所有的 <code>HandlerMapping</code> 看是否有请求信息；</p></li><li><p>如果有，就找到这个请求对应的 <code>Handler</code>；</p></li><li><p>如果没有，就遍历下一个 <code>HandlerMapping</code>；</p></li></ul><p>如果我们需要一些自定义的映射处理，可以通过给容器中放 <strong>HandlerMapping</strong> 来自定义 <strong>HandlerMapping</strong></p><p><img src="https://qiniu.dyl.fit/Spring MVC 的运行原理与机制.png" alt="Spring MVC 的运行原理与机制"></p><p>有的时候，比如说同一组 API 有不同的版本如 v1，v2，我们可以在 <code>Controller</code> 中写两组mapping（比如 <code>v1/user</code>，<code>v2/user</code>）。但同时我们也可以放在两个包下，都是 <code>/user</code>，这个时候我们就可以自定义 <code>HandlerMapping</code>，把 <code>v1/user</code> 映射到一个包下的 <code>/user</code>，把 <code>v2/user</code>映射到另外一个包下的 <code>/user</code>。</p><h3 id="_3-2-普通参数与基本注解" tabindex="-1"><a class="header-anchor" href="#_3-2-普通参数与基本注解" aria-hidden="true">#</a> 3.2 普通参数与基本注解</h3><h4 id="_3-2-1-注解" tabindex="-1"><a class="header-anchor" href="#_3-2-1-注解" aria-hidden="true">#</a> 3.2.1 注解</h4><ul><li><code>@PathVariable</code>：请求路径中的值</li><li><code>@RequestParam</code>：请求参数中的值</li><li><code>@RequestHeader</code>：请求 Header 中的值</li><li><code>@RequestBody</code>：请求 Body 中的值</li><li><code>@ModelAttribute</code>：绑定请求参数到实体对象</li><li><code>@CookieValue</code>：获取浏览器中的 Cookie 值</li><li><code>@MatrixVariable</code>：以分号分隔的矩阵变量键值对，形如 <strong>;name1=value1;name2=value2,value3</strong></li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@RestController

public class ParameterTestController {
    // 请求路径：car/2/owner/zhangsan
    @GetMapping(&quot;/car/{id}/owner/{username}&quot;)
    public Map&lt;String, Object&gt; getCar(@PathVariable(&quot;id&quot;) Integer id, @PathVariable(&quot;username&quot;) String name, @PathVariable Map&lt;String, String&gt; pv, @RequestHeader(&quot;User-Agent&quot;) String userAgent, @RequestHeader Map&lt;String, String&gt; header, @RequestParam(&quot;age&quot;) Integer age, @RequestParam(&quot;inters&quot;) List&lt;String&gt; inters, @RequestParam Map&lt;String, String&gt; params, @CookieValue(&quot;_ga&quot;) String _ga, @CookieValue(&quot;_ga&quot;) Cookie cookie) {
        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        //        map.put(&quot;id&quot;,id);
        //        map.put(&quot;name&quot;,name);
        //        map.put(&quot;pv&quot;,pv);
        //        map.put(&quot;userAgent&quot;,userAgent);
        //        map.put(&quot;headers&quot;,header);
        map.put(&quot;age&quot;, age);
        map.put(&quot;inters&quot;, inters);
        map.put(&quot;params&quot;, params);
        map.put(&quot;_ga&quot;, _ga);
        System.out.println(cookie.getName() + &quot;===&gt;&quot; + cookie.getValue());
        return map;
    }

    @PostMapping(&quot;/save&quot;)
    public Map postMethod(@RequestBody String content) {
        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;content&quot;, content);
        return map;
    }

    //1、请求路径：/cars/sell;low=34;brand=byd,audi,yd
    // 2、SpringBoot 默认禁用了矩阵变量的功能    
    // 手动开启的原理：URL 路径使用 UrlPathHelper 进行解析。
    // 实现 WebMvcConfigurer 接口，重写 configurePathMatch()    
    //  将 removeSemicolonContent 设置为 false 即可开启。    
    // 3、矩阵变量必须有 URL 路径变量才能被解析    
    @GetMapping(&quot;/cars/{path}&quot;)
    public Map carsSell(@MatrixVariable(&quot;low&quot;) Integer low, @MatrixVariable(&quot;brand&quot;) List&lt;String&gt; brand, @PathVariable(&quot;path&quot;) String path) {
        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;low&quot;, low);
        map.put(&quot;brand&quot;, brand);
        map.put(&quot;path&quot;, path);
        return map;
    }

    // 请求路径：/boss/1;age=20/2;age=10   
    @GetMapping(&quot;/boss/{bossId}/{empId}&quot;)
    public Map boss(@MatrixVariable(value = &quot;age&quot;, pathVar = &quot;bossId&quot;) Integer bossAge, @MatrixVariable(value = &quot;age&quot;, pathVar = &quot;empId&quot;) Integer empAge) {
        Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();
        map.put(&quot;bossAge&quot;, bossAge);
        map.put(&quot;empAge&quot;, empAge);
        return map;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-2-servlet-api" tabindex="-1"><a class="header-anchor" href="#_3-2-2-servlet-api" aria-hidden="true">#</a> 3.2.2 Servlet API</h4><p><code>WebRequest</code>、<code>ServletRequest</code>、<code>MultipartRequest</code>、 <code>HttpSession</code>、<code>PushBuilder</code>、<code>Principal</code>、<code>InputStream</code>、<code>Reader</code>、<code>HttpMethod</code>、<code>Locale</code>、<code>TimeZone</code>、<code>ZoneId</code></p><p>以上参数都是在 <code>ServletRequestMethodArgumentResolver.supportsParameter()</code> 里判断的：</p><p><img src="https://qiniu.dyl.fit/supportsParameter.png" alt="supportsParameter"></p><p>然后获取请求：</p><p><img src="https://qiniu.dyl.fit/获取请求.png" alt="获取请求"></p><h4 id="_3-2-3-复杂参数" tabindex="-1"><a class="header-anchor" href="#_3-2-3-复杂参数" aria-hidden="true">#</a> 3.2.3 复杂参数</h4><p><code>Map</code>、<code>Model</code>、<code>Errors</code>/<code>BindingResult</code>、<code>RedirectAttributes</code><strong>（ 重定向携带数据）</strong>、<code>ServletResponse</code><strong>（response）</strong>、<code>SessionStatus</code>、<code>UriComponentsBuilder</code>、<code>ServletUriComponentsBuilder</code></p><p>Map&lt;String, Object&gt; <code>map</code>、Model <code>model</code>、HttpServletRequest <code>request</code> 都可以给 request 域中放数据 <code>request.setAttribute()</code>。</p><p><code>Map</code>、<code>Model</code>类型的参数，会返回 <code>mavContainer.getModel()</code></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>    // ModelAndViewContainer：模型和视图的容器
    private final ModelMap defaultModel = new BindingAwareModelMap();

    public ModelMap getModel() {
        if (this.useDefaultModel()) {
            return this.defaultModel;
            // 默认返回 BindingAwareModelMap，既是 Model 又是 Map    
        } else {
            if (this.redirectModel == null) {
                this.redirectModel = new ModelMap();
                // 重定向为空，返回一个空的 LinkedHashMap        
            }
            return this.redirectModel; // 返回 RedirectAttributesModelMap   
        }
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://qiniu.dyl.fit/Model 和 Map 是同一个对象.png" alt="Model 和 Map 是同一个对象"></p><p><img src="https://qiniu.dyl.fit/defaultModel.png" alt="defaultModel"></p><h4 id="_3-2-4-自定义对象参数" tabindex="-1"><a class="header-anchor" href="#_3-2-4-自定义对象参数" aria-hidden="true">#</a> 3.2.4 自定义对象参数</h4><p>可以自动类型转换与格式化，还可以级联封装。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>/**
 * html 中引用对象参数
 *     姓名： &lt;input name=&quot;userName&quot;/&gt; &lt;br/&gt;
 *     年龄： &lt;input name=&quot;age&quot;/&gt; &lt;br/&gt;
 *     生日： &lt;input name=&quot;birth&quot;/&gt; &lt;br/&gt;
 *     宠物姓名：&lt;input name=&quot;pet.name&quot;/&gt;&lt;br/&gt;
 *     宠物年龄：&lt;input name=&quot;pet.age&quot;/&gt;
 */
@Data
public class Person {
    private String userName;
    private Integer age;
    private Date birth;
    private Pet pet;
}

@Data
public class Pet {
    private String name;
    private String age;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-自定义类型参数-pojo-封装" tabindex="-1"><a class="header-anchor" href="#_3-3-自定义类型参数-pojo-封装" aria-hidden="true">#</a> 3.3 自定义类型参数：POJO 封装</h3><p><code>RequestParamMethodArgumentResolver</code> 支持简单类型的请求方法参数，<code>ServletModelAttributeMethodProcessor</code> 支持非简单类型的请求方法参数。</p><p>所以对于请求 http://localhost:8080/<strong>testCustomObj?name=张三&amp;age=18</strong>，由于请求方法参数<code>Employee</code> 不是简单类型，所以会调用 <code>ServletModelAttributeMethodProcessor</code> 将请求参数封装为 <code>Employee</code> 对象并返回。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/testCustomObj&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span>
<span class="token keyword">public</span> <span class="token class-name">Employee</span> <span class="token function">testCustomObj</span><span class="token punctuation">(</span><span class="token class-name">Employee</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> e<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-参数处理原理" tabindex="-1"><a class="header-anchor" href="#_3-4-参数处理原理" aria-hidden="true">#</a> 3.4 参数处理原理</h3><ol><li><code>HandlerMapping</code> 中找到能处理请求的 <code>Handler</code>（<code>Controller</code> 中请求对应的方法）；</li><li>为当前 <code>Handler</code> 找一个适配器 <code>HandlerAdapter</code>，对于请求来说就是 <code>RequestMappingHandlerAdapter</code>；</li><li>适配器执行目标方法并确定方法参数的每一个值。</li></ol><p><strong>拓展：</strong></p><p>SpringMVC 处理请求大致是这样的：</p><ol><li>首先被 <code>DispatcherServlet</code> 截获，<code>DispatcherServlet</code> 通过 <code>handlerMapping</code> 获得 <code>HandlerExecutionChain</code>，然后获得 <code>HandlerAdapter</code>。</li><li><code>HandlerAdapter</code> 在内部对于每个请求，都会实例化一个 <code>ServletInvocableHandlerMethod</code> 进行处理，<code>ServletInvocableHandlerMethod</code> 在进行处理的时候，会分两部分别对<strong>请求</strong>跟<strong>响应</strong>进行处理。 <ol><li>处理请求的时候，会根据 <code>ServletInvocableHandlerMethod</code> 的属性 <code>argumentResolvers</code>（这个属性是它的父类 <code>InvocableHandlerMethod</code> 中定义的）进行处理，其中 <code>argumentResolvers</code> 属性是一个 <code>HandlerMethodArgumentResolverComposite</code> 类 （这里使用了<strong>组合模式</strong>的一种变形），这个类是实现了 <code>HandlerMethodArgumentResolver</code> 接口的类，里面有各种实现了 <code>HandlerMethodArgumentResolver</code> 的 <strong>List</strong> 集合。</li><li>处理响应的时候，会根据 <code>ServletInvocableHandlerMethod</code> 的属性 <code>returnValueHandlers</code> (自身属性) 进行处理，<code>returnValueHandlers</code> 属性是一个 <code>HandlerMethodReturnValueHandlerComposite</code> 类（这里使用了<strong>组合模式</strong>的一种变形），这个类是实现了 <code>HandlerMethodReturnValueHandler</code> 接口的类，里面有各种实现了 <code>HandlerMethodReturnValueHandler</code> 的 <strong>List</strong> 集合。</li></ol></li><li>之后 <code>HandlerAdapter</code> 得到 <code>ModelAndView</code>，然后做相应的处理。</li></ol><p>以 <strong>Resolver</strong> 结尾的类是实现了 <code>HandlerMethodArgumentResolver</code> 接口的类，以 <strong>Processor</strong> 结尾的类是实现了 <code>HandlerMethodArgumentResolver</code> 和 <code>HandlerMethodReturnValueHandler</code> 的类。</p><ul><li><code>HandlerMethodArgumentResolver</code> ：处理请求方法的参数</li><li><code>HandlerMethodReturnValueHandler</code>：处理请求方法的返回值</li></ul><p><img src="https://qiniu.dyl.fit/HandlerMethodReturnValueHandler.png" alt="HandlerMethodReturnValueHandler"></p><blockquote><p><a href="https://www.cnblogs.com/fangjian0423/p/springMVC-request-param-analysis.html" target="_blank" rel="noopener noreferrer">详解 SpringMVC 中 Controller 的方法中参数的工作原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h4 id="_3-4-1-处理器的适配器handleradapter" tabindex="-1"><a class="header-anchor" href="#_3-4-1-处理器的适配器handleradapter" aria-hidden="true">#</a> 3.4.1 处理器的适配器HandlerAdapter</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// DispatcherServlet#getHandlerAdapterprotected HandlerAdapter getHandlerAdapter(Object handler) throws ServletException {    if (this.handlerAdapters != null) {        for (HandlerAdapter adapter : this.handlerAdapters) {            if (adapter.supports(handler)) {                return adapter;            }        }    }    throw new ServletException(&quot;No adapter for handler [&quot; + handler +            &quot;]: The DispatcherServlet configuration needs to include a HandlerAdapter that supports this handler&quot;);}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1603262942726-107353bd-f8b7-44f6-93cf-2a3cad4093cf.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_18%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="HandlerAdapter"></p><ul><li><code>RequestMappingHandlerAdapter</code> ：支持方法上标注 <code>@RequestMapping</code> 的适配器。</li><li><code>HandlerFunctionAdapter</code>：支持函数式编程的适配器。</li><li><code>HttpRequestHandlerAdapter</code>：无返回值，用于处理静态资源。</li><li><code>SimpleControllerHandlerAdapter</code>：是 <code>Controller</code> 实现类的适配器类，其本质是执行 <code>Controller</code> 中的 <code>handleRequest</code> 方法。</li></ul><h4 id="_3-4-2-执行目标方法" tabindex="-1"><a class="header-anchor" href="#_3-4-2-执行目标方法" aria-hidden="true">#</a> 3.4.2 执行目标方法</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// DispatcherServlet#doDispatch// Actually invoke the handler.mv = ha.handle(processedRequest, response, mappedHandler.getHandler());// RequestMappingHandlerAdapter#handleInternalmav = invokeHandlerMethod(request, response, handlerMethod); //执行目标方法// RequestMappingHandlerAdapter#invokeHandlerMethodinvocableMethod.invokeAndHandle(webRequest, mavContainer);// ServletInvocableHandlerMethod#invokeAndHandleObject returnValue = invokeForRequest(webRequest, mavContainer, providedArgs);// InvocableHandlerMethod#invokeForRequestObject[] args = getMethodArgumentValues(request, mavContainer, providedArgs);return this.doInvoke(args); // 通过反射调用目标方法
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-4-3-参数解析器-handlermethodargumentresolver" tabindex="-1"><a class="header-anchor" href="#_3-4-3-参数解析器-handlermethodargumentresolver" aria-hidden="true">#</a> 3.4.3 参数解析器 HandlerMethodArgumentResolver</h4><p>确定将要执行的目标方法的每一个参数的值是什么。</p><p>SpringMVC 目标方法能写多少种参数类型，取决于参数解析器。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// InvocableHandlerMethod#invokeForRequestObject[] args = getMethodArgumentValues(request, mavContainer, providedArgs);// InvocableHandlerMethod#getMethodArgumentValuesif (!this.resolvers.supportsParameter(parameter)) { // 判断是否支持当前参数类型// 解析支持的参数，并放入参数列表args[i] = this.resolvers.resolveArgument(parameter, mavContainer, request, this.dataBinderFactory);// HandlerMethodArgumentResolverComposite#resolveArgumentHandlerMethodArgumentResolver resolver = this.getArgumentResolver(parameter);// HandlerMethodArgumentResolverComposite#getArgumentResolver// 先从参数解析器缓存中获取，若获取不到再从参数解析器中获取Iterator var3 = this.argumentResolvers.iterator();// 判断解析器是否支持当前参数类型，若支持放入参数解析器缓存中，然后返回参数解析器
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1603263283504-85bbd4d5-a9af-4dbf-b6a2-30b409868774.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_20%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="argumentResolvers"></p><h4 id="_3-4-4-返回值处理" tabindex="-1"><a class="header-anchor" href="#_3-4-4-返回值处理" aria-hidden="true">#</a> 3.4.4 返回值处理</h4><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626512571526-f97b165f-652c-4b2b-942a-a3cb3cfdffe6.png" alt="image.png"></p><h4 id="_3-4-5-自定义类型参数-pojo-封装" tabindex="-1"><a class="header-anchor" href="#_3-4-5-自定义类型参数-pojo-封装" aria-hidden="true">#</a> 3.4.5 自定义类型参数：POJO 封装</h4><p><code>ServletModelAttributeMethodProcessor</code> 负责处理自定义的参数类型（非简单类型）。</p><p>简单类型如下：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// BeanUtils#isSimpleValueTypepublic static boolean isSimpleValueType(Class&lt;?&gt; type) {    return (Void.class != type &amp;&amp; void.class != type &amp;&amp;            (ClassUtils.isPrimitiveOrWrapper(type) ||            Enum.class.isAssignableFrom(type) ||            CharSequence.class.isAssignableFrom(type) ||            Number.class.isAssignableFrom(type) ||            Date.class.isAssignableFrom(type) ||            Temporal.class.isAssignableFrom(type) ||            URI.class == type ||            URL.class == type ||            Locale.class == type ||            Class.class == type));}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626445334943-b3f18848-d490-44c3-9e72-319ef8ac9888.png" alt="isSimpleValueType"></p><p>解析参数：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// ModelAttributeMethodProcessor#resolveArgumentWebDataBinder binder = binderFactory.createBinder(webRequest, attribute, name);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><code>WebDataBinder</code>：Web 数据绑定器，利用它里面的 <code>Converters</code> 将请求数据转成指定的数据类型，然后封装到指定的 POJO 对象里面。</p><p><code>GenericConversionService</code>：在设置每一个值的时候，找它里面所有的 <code>Converters</code>，哪个可以将这个数据类型（request 带来参数的字符串）转换到指定的类型。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626448410878-008f3f9c-5013-4b4b-aced-1bc74895799a.png?x-oss-process=image%2Fresize%2Cw_750" alt="GenericConversionService"></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@FunctionalInterfacepublic interface Converter&lt;S, T&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1603337871521-25fc1aa1-133a-4ce0-a146-d565633d7658.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_39%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="ExtendServletRequestDataBinder"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1603338486441-9bbd22a9-813f-49bd-b51b-e66c7f4b8598.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_44%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10%2Cresize%2Cw_752" alt="converters"></p><p>可以给WebDataBinder里面放自己的Converter；</p><p><strong>private static final class</strong> StringToNumber&lt;T <strong>extends</strong> Number&gt; <strong>implements</strong> Converter&lt;String, T&gt;</p><p>自定义 Converter：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// 1、WebMvcConfigurer 定制化 SpringMVC 的功能@Beanpublic WebMvcConfigurer webMvcConfigurer (){    return new WebMvcConfigurer () {        @Override        public void configurePathMatch (PathMatchConfigurer configurer) {            UrlPathHelper urlPathHelper = new UrlPathHelper ();            // 不移除分号后面的内容，矩阵变量功能就可以生效            urlPathHelper.setRemoveSemicolonContent (false);            configurer.setUrlPathHelper (urlPathHelper);        }        @Override        public void addFormatters (FormatterRegistry registry) {            registry.addConverter (new Converter&lt;String, Pet&gt;() {                @Override                public Pet convert (String source) {                    // 阿猫，3                    if (!StringUtils.isEmpty (source)){                        Pet pet = new Pet ();                        String [] split = source.split (&quot;,&quot;);                        pet.setName (split [0]);                        pet.setAge (Integer.parseInt (split [1]));                        return pet;                    }                    return null;                }            });        }    };}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_3-4-6-目标方法执行完成" tabindex="-1"><a class="header-anchor" href="#_3-4-6-目标方法执行完成" aria-hidden="true">#</a> 3.4.6 目标方法执行完成</h4><p>将所有返回的数据都放在 <code>ModelAndViewContainer</code>，包含要去的页面地址 <code>View</code>，还包含 <code>Model</code> 数据。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1603272018605-1bce3142-bdd9-4834-a028-c753e91c52ac.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_16%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="mavContainer"></p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626361978596-259159d7-7aa2-459c-b43a-7e31c8f63277.png" alt="updateBindResult"></p><h4 id="_3-4-7-处理派发结果" tabindex="-1"><a class="header-anchor" href="#_3-4-7-处理派发结果" aria-hidden="true">#</a> 3.4.7 处理派发结果</h4><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626362958127-42143dee-56bd-4143-bd60-ed423ee81b98.png" alt="exposeModelAsRequestAttribute"></p><h2 id="_4、数据响应与内容协商" tabindex="-1"><a class="header-anchor" href="#_4、数据响应与内容协商" aria-hidden="true">#</a> 4、数据响应与内容协商</h2><h3 id="_4-1-响应-json" tabindex="-1"><a class="header-anchor" href="#_4-1-响应-json" aria-hidden="true">#</a> 4.1 响应 JSON</h3><h4 id="_4-1-1-jackson-jar-responsebody" tabindex="-1"><a class="header-anchor" href="#_4-1-1-jackson-jar-responsebody" aria-hidden="true">#</a> 4.1.1 jackson.jar + @ResponseBody</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- Web 场景自动引入了 json 场景,下面的依赖不需要显示声明 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.4.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自动给前端返回 <strong>json</strong> 数据。</p><p><strong>1、返回值解析器</strong></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// ServletInvocableHandlerMethod#invokeAndHandle
this.returnValueHandlers.handleReturnValue(
        returnValue, getReturnValueType(returnValue), mavContainer, webRequest);

// HandlerMethodReturnValueHandlerComposite#handleReturnValue
handler.handleReturnValue(returnValue, returnType, mavContainer, webRequest);

// RequestResponseBodyMethodProcessor#handleReturnValue
// 使用对应的消息转换器进行写出操作
writeWithMessageConverters(returnValue, returnType, inputMessage, outputMessage);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605151359370-01cd1fbe-628a-4eea-9430-d79a78f59125.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_25%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="returnValueHandlers"></p><p><strong>2、返回值解析器原理</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605151728659-68c8ce8a-1b2b-4ab0-b86d-c3a875184672.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_23%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="HandlerMethodReturnValueHandler"></p><ol><li><p>返回值处理器判断是否支持这种类型的返回值 <code>supportsReturnType</code>；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626514119167-937aa79a-8223-4ef3-82af-cdf4a62f987e.png" alt="supportsReturnType"></p></li><li><p>返回值处理器调用 <code>handleReturnValue</code> 进行处理；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626514211219-23d6c27a-ea41-4e92-ade2-d66d4cc91362.png" alt="handleReturnValue"></p></li><li><p><code>RequestResponseBodyMethodProcessor</code> 可以处理有 @ModelAttribute 且为对象类型的 @ResponseBody 注解。</p><ol><li><p>利用 <code>MessageConverters</code> 进行处理将数据写为 <strong>json</strong>。</p><ol><li><p>内容协商：浏览器默认会以请求头（<strong>Accept</strong> 字段）的方式告诉服务器他能接受什么样的内容类型；</p></li><li><p>服务器根据自己的能力，决定能生产什么内容类型的数据；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626515255797-09a21cb2-a28d-4d3a-9167-a671177a293d.png?x-oss-process=image%2Fresize%2Cw_750" alt="内容类型"></p></li><li><p>SpringMVC 会遍历所有容器底层的 <code>HttpMessageConverter</code>，看谁能处理。</p><ol><li>得到 <code>MappingJackson2HttpMessageConverter</code>，它可以将对象写为 <strong>json</strong>；</li><li>利用 <code>MappingJackson2HttpMessageConverter</code> 将对象转为 <strong>json</strong> 再写出去。</li></ol></li></ol></li></ol></li></ol><h4 id="_4-1-2-支持的返回类型" tabindex="-1"><a class="header-anchor" href="#_4-1-2-支持的返回类型" aria-hidden="true">#</a> 4.1.2 支持的返回类型</h4><ul><li><p><code>ModelAndView</code>：包含 <code>Model</code> 和 <code>View</code> 对象，可以通过它访问 <code>@ModelAttribute</code> 注解的对象。</p></li><li><p><code>Model</code>：仅包含数据访问，通过 <code>RequestToViewNameTranslator</code> 来隐蔽地决定此请求返回的 <code>View</code> 视图对象。</p></li><li><p><code>Map</code>：和 <code>Model</code> 相似。</p></li><li><p><code>View</code>：仅包含视图数据，而 <code>Model</code> 数据隐含在 <code>@ModelAttribute</code> 注解标注的对象中、或者</p></li><li><p><code>String</code>：表示 <code>View</code> 视图的名称。数据信息的保存同上。</p></li><li><p><code>void</code>：当开发者直接操作 <code>ServletResponse</code> / <code>HttpServletResponse</code> 进行请求跳转，或者 <code>View</code> 由 <code>RequestToViewNameTranslator</code> 隐蔽地决定时，可使用此返回值。</p></li><li><p>任意对象：如果方法被 <code>@ResponseBody</code> 注解，可采用此值。Spring 会使用 <code>HttpMessageConverters</code> 将对象转化成文本输出。</p></li><li><p><code>HttpEntity&lt;?&gt;</code> 或 <code>ResponseEntity&lt;?&gt;</code>：使用此值，Spring 也会使用 <code>HttpMessageConverters</code> 将对象转化成文本输出。</p></li><li><p><code>Callable</code>：异步请求时使用。</p></li><li><p><code>DeferredResult</code>：当 Spring 决定使用选择的某个线程产生值时可以使用此对象。</p></li><li><p><code>WebAsyncTask</code>：带有超时时间的 Callable 异步任务。</p></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1628917925463-98d86339-8ba2-4c57-95f2-95781682a3a2.png?x-oss-process=image%2Fresize%2Cw_750" alt="支持的返回类型"></p><h4 id="_4-1-3-httpmessageconverter-原理" tabindex="-1"><a class="header-anchor" href="#_4-1-3-httpmessageconverter-原理" aria-hidden="true">#</a> 4.1.3 HTTPMessageConverter 原理</h4><p><strong>1、MessageConverter 规范</strong></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605163447900-e2748217-0f31-4abb-9cce-546b4d790d0b.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_19%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="HTTPMessageConverter"></p><p><code>HttpMessageConverter</code>: 调用 <code>canRead()</code> 或 <code>canWrite()</code> 方法判断是否支持将 此 Class 类型的对象，转为 <code>MediaType</code> 类型的数据。</p><p>例子： json 转为 Person 对象，或者Person 对象转为 json。</p><p><strong>2、默认的MessageConverter</strong></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// AbstractMessageConverterMethodArgumentResolver#readWithMessageConverters
for (HttpMessageConverter&lt;?&gt; converter : this.messageConverters) {
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605163584708-e19770d6-6b35-4caa-bf21-266b73cb1ef1.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_17%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="messageConverters"></p><ul><li><code>ByteArrayHttpMessageConverter</code>：只支持字节数组类型的。</li><li><code>StringHttpMessageConverter</code>：<strong>UTF-8</strong> 类型的字符串。</li><li><code>StringHttpMessageConverter</code>：<strong>ISO-8859-1</strong> 类型的字符串。</li><li><code>ResourceHttpMessageConverter</code>：<code>Resource</code> 类型。</li><li><code>ResourceRegionHttpMessageConverter</code>：<code>ResourceHttpMessageConverter</code> 的缺省设置，用于支持 HTTP Range 头部使用时，将静态资源的部分写入到响应对象。</li><li><code>SourceHttpMessageConverter</code>：<code>DOMSource.class</code>、<code>SAXSource.class</code>、<code>StAXSource.class</code>、<code>StreamSource.class</code>、<code>Source.class</code>。</li><li><code>AllEncompassingFormHttpMessageConverter</code>：对 <code>FormHttpMessageConverter</code>（表单与 <code>MultiValueMap</code> 的相互转换）的扩展，提供了对 <strong>xml</strong> 和 <strong>json</strong> 的支持。</li><li><code>MappingJackson2HttpMessageConverter</code>：使用 Jackson 的 ObjectMapper 转换 Json 数据</li><li><code>MappingJackson2HttpMessageConverter</code>：</li><li><code>Jaxb2RootElementHttpMessageConverter</code>：支持注解方式将对象转换为 xml。</li></ul><p>最终 <code>MappingJackson2HttpMessageConverter</code> 把对象转为 <strong>json</strong>（利用底层 <strong>jackson</strong> 的<code>objectMapper</code> 转换的）。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605164243168-1a31e9af-54a4-463e-b65a-c28ca7a8a2fa.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_34%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="outputMessage"></p><blockquote><p><a href="https://cloud.tencent.com/developer/article/1497632" target="_blank" rel="noopener noreferrer">【小家 Spring】Spring MVC 容器的 web 九大组件之 ---HandlerAdapter 源码详解 ---HttpMessageConverter 消息转换器详解<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></blockquote><h3 id="_4-2-内容协商" tabindex="-1"><a class="header-anchor" href="#_4-2-内容协商" aria-hidden="true">#</a> 4.2 内容协商</h3><h4 id="_4-2-1-引入-xml-依赖" tabindex="-1"><a class="header-anchor" href="#_4-2-1-引入-xml-依赖" aria-hidden="true">#</a> 4.2.1 引入 xml 依赖</h4><p>根据客户端接收能力不同，返回不同媒体类型的数据。</p><p>若客户端无法解析服务端返回的内容，即媒体类型未匹配，那么响应 <strong>406</strong>。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.dataformat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-dataformat-xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-2-返回-json-和-xml" tabindex="-1"><a class="header-anchor" href="#_4-2-2-返回-json-和-xml" aria-hidden="true">#</a> 4.2.2 返回 json 和 xml</h4><p>Postman 分别测试，只需要改变请求头中 <strong>Accept</strong> 字段。<strong>HTTP</strong> 协议中规定的，告诉服务器本客户端可以接收的数据类型。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605173127653-8a06cd0f-b8e1-4e22-9728-069b942eba3f.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_33%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="Postman"></p><h4 id="_4-2-3-开启浏览器参数方式内容协商功能" tabindex="-1"><a class="header-anchor" href="#_4-2-3-开启浏览器参数方式内容协商功能" aria-hidden="true">#</a> 4.2.3 开启浏览器参数方式内容协商功能</h4><p>为了方便内容协商，开启基于请求参数的内容协商功能。</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span>
      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#开启请求参数内容协商模式</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>优缺点：</strong></p><ul><li>优点：不受浏览器约束。</li><li>缺点：需要额外的传递 <strong>format</strong> 参数，<strong>URL</strong> 变得冗余繁琐，缺少了 <strong>REST</strong> 的简洁风范。还有个缺点便是：需要手动显示开启。</li></ul><p>发请求：</p><p>http://localhost:8080/test/person?format=json</p><p>http://localhost:8080/test/person?format=xml</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626528669116-d399ae57-2709-4b94-9426-32e4a2ec4390.png" alt="getAcceptableMediaTypes"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605230907471-b0ed34bc-6782-40e7-84b7-615726312f01.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_22%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="contentNegotiationManager"></p><p>确定客户端接收什么样的内容类型：</p><ol><li><p>Parameter 策略优先确定是要返回 <strong>json</strong> 数据（获取请求头中的 <strong>format</strong> 的值）</p></li><li><p>最终进行内容协商返回给客户端 <strong>json</strong> 即可。</p></li></ol><h4 id="_4-2-4-内容协商原理" tabindex="-1"><a class="header-anchor" href="#_4-2-4-内容协商原理" aria-hidden="true">#</a> 4.2.4 内容协商原理</h4><ol><li><p>判断当前响应头中是否已经有确定的媒体类型 <code>MediaType</code>；</p></li><li><p>获取客户端（PostMan、浏览器）支持接收的内容类型，即获取 <strong>Accept</strong> 请求头字段，如<strong>application/xml</strong>；</p><ul><li><p><code>contentNegotiationManager</code> 内容协商管理器，默认使用基于请求头的策略；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626527877945-76d64ff0-a578-4ab7-b061-36bd451e6709.png" alt="strategies"></p></li><li><p><code>HeaderContentNegotiationStrategy</code> 确定客户端可以接收的内容类型 。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605230546376-65dcf657-7653-4a58-837a-f5657778201a.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_28%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="getHeaderValues"></p></li></ul></li><li><p>遍历循环所有当前系统的 <code>MessageConverter</code>，看谁支持操作这个 <code>Person</code> 对象；</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605173657818-73331882-6086-490c-973b-af46ccf07b32.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_18%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="messageConverters"></p><p>上面这四个并不完全一样：</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626519411779-4c8b7c30-53f2-46cb-beed-304eddb9f46c.png" alt="messageConverter 差异"></p></li><li><p>找到支持操作 <code>Person</code> 对象的 <code>MessageConverter</code>，把 <code>MessageConverter</code> 支持的媒体类型统计出来；</p></li><li><p>客户端需要 <strong>application/xml</strong>，在服务端能力列表中；</p></li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605173876646-f63575e2-50c8-44d5-9603-c2d11a78adae.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_20%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>6、进行内容协商，选出最佳匹配媒体类型；</p><p>7、用 <code>MessageConverter</code> 将对象转为最佳匹配媒体类型 。</p><p>导入了 <strong>jackson</strong> 处理 <strong>xml</strong> 的包，<strong>xml</strong> 的 <code>MessageConverter</code> 就会自动配置进来。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// WebMvcConfigurationSupport
jackson2XmlPresent = ClassUtils.isPresent(&quot;com.fasterxml.jackson.dataformat.xml.XmlMapper&quot;, classLoader);

// WebMvcConfigurationSupport#addDefaultHttpMessageConverters
if (jackson2XmlPresent) {
    Jackson2ObjectMapperBuilder builder = Jackson2ObjectMapperBuilder.xml();
    if (this.applicationContext != null) {
        builder.applicationContext(this.applicationContext);
    }
    messageConverters.add(new MappingJackson2XmlHttpMessageConverter(builder.build()));
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-2-5-自定义-messageconverter" tabindex="-1"><a class="header-anchor" href="#_4-2-5-自定义-messageconverter" aria-hidden="true">#</a> 4.2.5 自定义 MessageConverter</h4><p>实现多协议数据兼容：<strong>json</strong>、<strong>xml</strong>、x-guigu。</p><ol><li><code>@ResponseBody</code> 响应数据出去 调用 <code>RequestResponseBodyMethodProcessor</code> 处理；</li><li>Processor 处理方法返回值，通过 <code>MessageConverter</code> 处理；</li><li>所有 <code>MessageConverter</code> 合起来可以支持各种媒体类型数据的操作（读、写）；</li><li>内容协商找到最终的 <code>MessageConverter</code> 。</li></ol><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span>
      <span class="token key atrule">media-types</span><span class="token punctuation">:</span>
        <span class="token key atrule">gg</span><span class="token punctuation">:</span> application/x<span class="token punctuation">-</span>guigu
      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 SpringMVC 的什么功能，只需要给容器中添加一个 <code>WebMvcConfigurer</code> 并配置即可。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Bean
public WebMvcConfigurer webMvcConfigurer(){
    return new WebMvcConfigurer() {
        @Override
        public void extendMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {

        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605260623995-8b1f7cec-9713-4f94-9cf1-8dbc496bd245.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_18%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="strategy"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605261062877-0a27cc41-51cb-4018-a9af-4e0338a247cd.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_27%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="contentNegotiationManager"></p><p>有可能我们添加的自定义的功能会覆盖默认很多功能，导致一些默认的功能失效。</p><h2 id="_5、视图解析与模板引擎" tabindex="-1"><a class="header-anchor" href="#_5、视图解析与模板引擎" aria-hidden="true">#</a> 5、视图解析与模板引擎</h2><p><strong>视图解析</strong>：SpringBoot默认不支持 <a href="https://www.w3cschool.cn/jsp/" target="_blank" rel="noopener noreferrer">JSP<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，需要引入第三方模板引擎技术实现页面渲染。</p><p><strong>模板引擎</strong>：是为了使用户界面与业务数据（内容）分离而产生的，它可以生成特定格式的文档，用于网站的模板引擎就会生成一个标准的文档。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109710-99fba456-92b1-43f3-8fa4-1db486247ecf.png" alt="模板引擎"></p><ul><li><a href="https://www.jianshu.com/p/5913903324ff" target="_blank" rel="noopener noreferrer">Velocity<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：一个基于 Java 的模板引擎，其提供了一个 <code>Context</code> 容器，在 Java 代码里面我们可以往容器中存值，然后在 <strong>vm</strong> 文件中使用特定的语法获取。</li><li>[Freemarker](<a href="http://www.freemarker.net/" target="_blank" rel="noopener noreferrer">FreeMarker 教程网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>)：一个基于模板生成文本输出的通用工具，使用纯 Java 编写，模板中没有业务逻辑，外部 Java 程序通过数据库操作等生成数据传入模板（template）中，然后输出页面。它能够生成各种文本：<strong>HTML</strong>、<strong>XML</strong>、<strong>RTF</strong>、<strong>Java</strong> 源代码等等，而且不需要 Servlet 环境，并且可以从任何源载入模板，如本地文件、数据库等等。</li><li><a href="https://www.docs4dev.com/docs/zh/thymeleaf/3.0/reference/using_thymeleaf.html" target="_blank" rel="noopener noreferrer">Thymeleaf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>：是适用于 Web 和独立环境的现代服务器端 Java 模板引擎，能够处理 HTML，XML，JavaScript，CSS 甚至纯文本。有两种<em>标记</em>模板模式 <code>HTML</code>（常用）和 <code>XML</code>，三种<em>文本</em>模板模式 <code>TEXT</code>，<code>JAVASCRIPT</code> 和 <code>CSS</code> 和<em>无操作</em>模板模式 <code>RAW</code>。</li></ul><p>SpringBoot 推荐使用 <strong>Thymeleaf</strong>，因为与 <strong>Velocity</strong>、<strong>FreeMarker</strong> 等传统的 Java 模板引擎不同，<strong>Thymeleaf</strong> 支持 <code>HTML</code> 模板模式，模板后缀为 <code>.html</code>，可以直接被浏览器打开，因此，预览时非常方便。</p><h3 id="_5-1-视图解析原理" tabindex="-1"><a class="header-anchor" href="#_5-1-视图解析原理" aria-hidden="true">#</a> 5.1 视图解析原理</h3><ol><li><p>目标方法处理的过程中，所有数据都会被放在 <code>ModelAndViewContainer</code> 里面，包括<strong>数据</strong>和<strong>视图地址</strong>；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626602773740-bb9b98c0-1108-48c9-9a52-364d61a4ea56.png" alt="mavContainer"></p></li><li><p>方法的参数是一个<strong>自定义类型</strong>对象（从请求参数中确定的），把它重新放在 <code>ModelAndViewContainer</code>；</p></li><li><p>任何目标方法执行完成以后都会返回 <code>ModelAndView</code>（数据和视图地址）；</p></li><li><p><code>processDispatchResult</code> 处理派发结果（页面该如何响应）。</p><ul><li><p><code>render(mv, request, response);</code> 进行页面渲染逻辑。</p><ul><li><p>根据方法的 <code>String</code> 返回值得到 <code>View</code> 对象（定义了页面的渲染逻辑）</p><ol><li><p>所有的视图解析器尝试是否能根据当前返回值得到 View 对象；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626603433682-b9cb246c-dddf-47f2-8b3c-30046077a13f.png" alt="viewResolver"></p></li><li><p>得到了 <strong>redirect:/main.html</strong> --&gt; <strong>Thymeleaf</strong> 使用 <code>new RedirectView()</code> 创建视图；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626603907392-3cd1dfce-afa8-43fd-a03d-a52a52204368.png" alt="RedirectView"></p></li><li><p><code>ContentNegotiationViewResolver</code> 里面包含了下面所有的视图解析器，内部还是利用上面所有视图解析器得到视图对象；</p></li><li><p><code>view.render(mv.getModelInternal(), request, response);</code> 视图对象调用自定义的 <code>render</code> 进行页面渲染工作。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626604323783-4e6ca09d-35f0-4f84-a3ba-32889e29e49f.png" alt="render"></p><ul><li><p><code>RedirectView</code> 如何渲染（重定向到一个页面)。</p><ol><li><p>获取目标 <code>URL</code> 地址；</p></li><li><p>调用原生的 <code>response.sendRedirect(encodedURL);</code> 发送重定向。</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626604421372-b748b478-6665-4361-b41d-abbc80cf70b2.png" alt="sendRedirect"></p></li></ol></li></ul></li></ol></li></ul></li></ul></li></ol><p><strong>Controller 方法的返回值如下</strong></p><h4 id="_5-2-1-返回-modelandview" tabindex="-1"><a class="header-anchor" href="#_5-2-1-返回-modelandview" aria-hidden="true">#</a> 5.2.1 返回 ModelAndView</h4><ul><li><p><code>ModelAndView</code> 存放数据，<code>addObject()</code>，往 <code>model</code>（<code>request</code> 域）添加数据；</p></li><li><p><code>ModelAndView</code> 添加逻辑视图名，<code>setViewName()</code>，经过视图解析器，得到物理视图，转发到物理视图。</p></li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@RequestMapping(&quot;/getUser.action&quot;)
public ModelAndView getUser(@RequestParam(name=&quot;userId&quot;,required = true) Integer id) throws Exception{
    System.out.println(&quot;id=&quot; + id);
    ModelAndView modelAndView = new ModelAndView();
    User user = userService.queryOne(id);
    modelAndView.addObject(&quot;user&quot;, user);
    modelAndView.setViewName(&quot;userinfo&quot;);
    return modelAndView;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-2-2-返回-string" tabindex="-1"><a class="header-anchor" href="#_5-2-2-返回-string" aria-hidden="true">#</a> 5.2.2 返回 String</h4><ul><li><p>逻辑视图名： 经过视图解析器，得到物理视图，转发到物理视图；</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@RequestMapping(&quot;/index.action&quot;)
public String  toIndex() {
    return &quot;index&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>redirect:资源路径</code>：不经过视图解析器，要求这个资源路径以完整的路径 <code>/</code> 开头，<strong>重定向</strong>到资源；</p><p><code>new RedirectView()</code> -&gt; <code>response.sendRedirect(encodedURL);</code></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@RequestMapping(&quot;/index.action&quot;)
public String  toIndex() {
    return &quot;redirect:/jsp/index.jsp&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><code>forward:资源路径</code>： 不经过视图解析器，要求这个资源路径以完整的路径 <code>/</code> 开头，<strong>转发</strong>到资源；</p><p><code>new InternalResourceView(forwardUrl);</code> -&gt; <code>request.getRequestDispatcher(path).forward(request, response);</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/index.action&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span>  <span class="token function">toIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;forward:/jsp/index.jsp&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>普通字符串、对象：</p><p><code>new ThymeleafView()</code> -&gt; 调用模板引擎的 <code>process</code> 方法进行页面渲染（用 <code>writer</code> 输出）</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 将 user 对象以 json 的格式响应给前端页面</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/queryUserByCondition.action&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ResponseBody</span> <span class="token comment">// 需要结合该注解，表示响应的不是视图</span>
<span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">queryUserByCondition</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> user<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="_5-2-thymeleaf-语法" tabindex="-1"><a class="header-anchor" href="#_5-2-thymeleaf-语法" aria-hidden="true">#</a> 5.2 Thymeleaf 语法</h3><h4 id="_5-2-1-表达式" tabindex="-1"><a class="header-anchor" href="#_5-2-1-表达式" aria-hidden="true">#</a> 5.2.1 表达式</h4><table><thead><tr><th>表达式名字</th><th>语法</th><th>用途</th></tr></thead><tbody><tr><td>变量取值</td><td>${...}</td><td>获取请求域、<code>session</code> 域、对象等值</td></tr><tr><td>选择变量</td><td>*{...}</td><td>获取上下文对象值</td></tr><tr><td>消息</td><td>#{...}</td><td>获取国际化等值</td></tr><tr><td>链接</td><td>@{...}</td><td>生成链接</td></tr><tr><td>片段表达式</td><td>~{...}</td><td>类似于 <code>jsp:include</code>，引入公共页面片段</td></tr></tbody></table><h4 id="_5-2-2-字面量" tabindex="-1"><a class="header-anchor" href="#_5-2-2-字面量" aria-hidden="true">#</a> 5.2.2 字面量</h4><p>文本值：<code>&#39;one text&#39;</code>、<code>&#39;Another one!&#39;</code>、…</p><p>数字：<code>0</code>、<code>34</code>、<code>3.0</code>、<code>12.3</code>、…</p><p>布尔值：<code>true</code>、<code>false</code></p><p>空值：<code>null</code></p><p>变量：<code>one</code>、<code>two</code>、.... 变量不能有空格</p><h4 id="_5-2-3-文本操作" tabindex="-1"><a class="header-anchor" href="#_5-2-3-文本操作" aria-hidden="true">#</a> 5.2.3 文本操作</h4><p>字符串拼接：<code>+</code></p><p>变量替换：<code>|The name is ${name}|</code></p><h4 id="_5-2-4-数学运算" tabindex="-1"><a class="header-anchor" href="#_5-2-4-数学运算" aria-hidden="true">#</a> 5.2.4 数学运算</h4><p>运算符：<code>+</code>、<code>-</code> 、<code>*</code>、<code>/</code>、<code>%</code></p><h4 id="_5-2-5布尔运算" tabindex="-1"><a class="header-anchor" href="#_5-2-5布尔运算" aria-hidden="true">#</a> 5.2.5布尔运算</h4><p>运算符：<code>and</code>、<code>or</code></p><p>一元运算：<code>!</code>、<code>not</code></p><h4 id="_5-2-6比较运算" tabindex="-1"><a class="header-anchor" href="#_5-2-6比较运算" aria-hidden="true">#</a> 5.2.6比较运算</h4><p>比较：<code>&gt;</code>、<code>&lt;</code>、<code>&gt;=</code>、<code>&lt;=</code> (<code>gt</code>、<code>lt</code>、<code>ge</code>、<code>le</code>)</p><p>等式：<code>==</code>、<code>!=</code> (<code>eq</code>、<code>ne</code> )</p><h4 id="_5-2-7-条件运算" tabindex="-1"><a class="header-anchor" href="#_5-2-7-条件运算" aria-hidden="true">#</a> 5.2.7 条件运算</h4><p>If-then：<code>(if) ? (then)</code></p><p>If-then-else：<code>(if) ? (then) : (else)</code></p><p>Default：<code>(value) ?: (defaultvalue) </code></p><h4 id="_5-2-8-特殊操作" tabindex="-1"><a class="header-anchor" href="#_5-2-8-特殊操作" aria-hidden="true">#</a> 5.2.8 特殊操作</h4><p>无操作：<code>_</code></p><h4 id="_5-2-9-设置属性值-th-attr" tabindex="-1"><a class="header-anchor" href="#_5-2-9-设置属性值-th-attr" aria-hidden="true">#</a> 5.2.9 设置属性值 <code>th:attr</code></h4><p>设置单个值：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribe.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action=@{/subscribe}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Subscribe!<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value=#{subscribe.submit}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>设置多个值：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../images/gtvglogo.png<span class="token punctuation">&quot;</span></span>  <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上两个的代替写法 <code>th:xxx</code></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Subscribe!<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{subscribe.submit}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribe.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/subscribe}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>所有 <code>HTML5</code> 兼容的标签写法：</p><p>https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes</p><h4 id="_5-2-10-迭代" tabindex="-1"><a class="header-anchor" href="#_5-2-10-迭代" aria-hidden="true">#</a> 5.2.10 迭代</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod : ${prods}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod,iterStat : ${prods}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${iterStat.odd}? <span class="token punctuation">&#39;</span>odd<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Onions<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.41<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${prod.inStock}? #{true} : #{false}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-2-11-条件运算" tabindex="-1"><a class="header-anchor" href="#_5-2-11-条件运算" aria-hidden="true">#</a> 5.2.11 条件运算</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comments.html<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/product/comments(prodId=${prod.id})}<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${not #lists.isEmpty(prod.comments)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>view<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>switch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${user.role}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>admin<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is an administrator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{roles.manager}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is a manager<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is some other thing<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-2-12属性优先级" tabindex="-1"><a class="header-anchor" href="#_5-2-12属性优先级" aria-hidden="true">#</a> 5.2.12属性优先级</h4><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109707-e02b3397-5bac-4c3f-a23b-1779207bc929.png" alt="属性优先级"></p><h3 id="_5-3-thymeleaf-使用" tabindex="-1"><a class="header-anchor" href="#_5-3-thymeleaf-使用" aria-hidden="true">#</a> 5.3 Thymeleaf 使用</h3><h4 id="_5-3-1-引入-starter" tabindex="-1"><a class="header-anchor" href="#_5-3-1-引入-starter" aria-hidden="true">#</a> 5.3.1 引入 starter</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thymeleaf.version</span><span class="token punctuation">&gt;</span></span>3.0.11.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thymeleaf.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 布局功能的支持程序 thymeleaf3 主程序 layout2 以上版本 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thymeleaf-layout-dialect.version</span><span class="token punctuation">&gt;</span></span>2.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thymeleaf-layout-dialect.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-3-2-thymeleaf-自动配置" tabindex="-1"><a class="header-anchor" href="#_5-3-2-thymeleaf-自动配置" aria-hidden="true">#</a> 5.3.2 Thymeleaf 自动配置</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration(proxyBeanMethods = false)
@EnableConfigurationProperties(ThymeleafProperties.class)
@ConditionalOnClass({ TemplateMode.class, SpringTemplateEngine.class })
@AutoConfigureAfter({ WebMvcAutoConfiguration.class, WebFluxAutoConfiguration.class })
public class ThymeleafAutoConfiguration { }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自动配好的策略</p><ul><li><p>所有 <strong>Thymeleaf</strong> 的配置值都在 <code>ThymeleafProperties</code>。</p></li><li><p>配置好了 <code>SpringTemplateEngine</code> 。</p></li><li><p>配置好了 <code>ThymeleafViewResolver</code>。</p></li><li><p>我们只需要直接开发页面。</p></li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@ConfigurationProperties(prefix = &quot;spring.thymeleaf&quot;)
public class ThymeleafProperties {
    private static final Charset DEFAULT_ENCODING = StandardCharsets.UTF_8;

    public static final String DEFAULT_PREFIX = &quot;classpath:/templates/&quot;;

    public static final String DEFAULT_SUFFIX = &quot;.html&quot;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>只要我们把 <strong>HTML</strong> 页面放在 <strong>classpath:/templates/</strong>，<strong>Thymeleaf</strong> 就能自动渲染。</p><h4 id="thymeleaf-页面开发" tabindex="-1"><a class="header-anchor" href="#thymeleaf-页面开发" aria-hidden="true">#</a> Thymeleaf 页面开发</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${msg}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 哈哈 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.atguigu.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${link}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 去百度 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>www.atguigu.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{link}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 去百度 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6、构建后台管理系统" tabindex="-1"><a class="header-anchor" href="#_6、构建后台管理系统" aria-hidden="true">#</a> 6、构建后台管理系统</h2><h3 id="_6-1-创建项目" tabindex="-1"><a class="header-anchor" href="#_6-1-创建项目" aria-hidden="true">#</a> 6.1 创建项目</h3><p><strong>pom.xml</strong> 需要引入以下依赖：thymeleaf、web-starter、devtools、lombok。</p><h3 id="_6-2静态资源处理" tabindex="-1"><a class="header-anchor" href="#_6-2静态资源处理" aria-hidden="true">#</a> 6.2静态资源处理</h3><p>已经自动配置好，只需把所有静态资源放到 <strong>static</strong> 文件夹下，模板页面放到 <strong>templates</strong> 文件夹下。</p><h3 id="_6-3-路径构建" tabindex="-1"><a class="header-anchor" href="#_6-3-路径构建" aria-hidden="true">#</a> 6.3 路径构建</h3><p><code>th:action=&quot;@{/login}&quot;</code></p><h3 id="_6-4-页面跳转" tabindex="-1"><a class="header-anchor" href="#_6-4-页面跳转" aria-hidden="true">#</a> 6.4 页面跳转</h3><p><code>Controller</code> ：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@PostMapping(&quot;/login&quot;)
public String main(User user, HttpSession session, Model model){
    if (StringUtils.hasLength (user.getUserName()) &amp;&amp; &quot;123456&quot;.equals (user.getPassword())){
        // 把登陆成功的用户保存起来
        session.setAttribute(&quot;loginUser&quot;,user);
        // 登录成功重定向到 main.html;  重定向防止表单重复提交
        return &quot;redirect:/main.html&quot;;
    } else {
        model.addAttribute(&quot;msg&quot;,&quot;账号密码错误&quot;);
        // 回到登录页面
        return &quot;login&quot;;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>登陆错误消息的显示：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">&quot;</span></span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${msg}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${not #strings.isEmpty(msg)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_6-5-数据渲染" tabindex="-1"><a class="header-anchor" href="#_6-5-数据渲染" aria-hidden="true">#</a> 6.5 数据渲染</h3><p><code>Controller</code> ：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@GetMapping(&quot;/dynamic_table&quot;)
public String dynamic_table(Model model){
    // 表格内容的遍历
    List&lt;User&gt; users = Arrays.asList(new User(&quot;zhangsan&quot;, &quot;123456&quot;),
                                     new User(&quot;lisi&quot;, &quot;654321&quot;),
                                     new User(&quot;haha&quot;, &quot;aaa&quot;));
    model.addAttribute(&quot;users&quot;, users);
    return &quot;table/dynamic_table&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-6-模板页面" tabindex="-1"><a class="header-anchor" href="#_6-6-模板页面" aria-hidden="true">#</a> 6.6 模板页面</h3><p>table/<strong>dynamic_table.html</strong>：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>display table table-bordered<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden-table-info<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>#<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>用户名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span><span class="token punctuation">&gt;</span></span>密码<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>userClass<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user,stats:${users}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${stats.count}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${user.userName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>[[${user.password}]]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span> <span class="token comment">&lt;!-- 行内写法 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>开发期间模板引擎页面修改以后，要实时生效，需要禁用模板引擎的缓存，页面修改完成以后<strong>Ctrl + F9</strong>：重新编译（无需重新启动）。</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 禁用缓存</span>
<span class="token key attr-name">spring.thymeleaf.cache</span><span class="token punctuation">=</span><span class="token value attr-value">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-7-国际化" tabindex="-1"><a class="header-anchor" href="#_6-7-国际化" aria-hidden="true">#</a> 6.7 国际化</h3><h4 id="_6-7-1-简介" tabindex="-1"><a class="header-anchor" href="#_6-7-1-简介" aria-hidden="true">#</a> 6.7.1 简介</h4><ol><li>编写国际化配置文件；</li><li>使用 <code>ResourceBundleMessageSource</code> 管理国际化资源文件；</li><li>在页面使用 <code>fmt:message</code> 取出国际化内容。</li></ol><h4 id="_6-7-2-步骤" tabindex="-1"><a class="header-anchor" href="#_6-7-2-步骤" aria-hidden="true">#</a> 6.7.2 步骤</h4><ol><li>编写国际化配置文件，抽取页面需要显示的国际化消息；</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109688-89c69511-6d11-499d-a1d7-bf7cf48e7a98.png" alt="国际化配置文件"></p><ol start="2"><li>SpringBoot 自动配置好了管理国际化资源文件的组件；</li></ol><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>public class MessageSourceAutoConfiguration {
    private static final Resource[] NO_RESOURCES = {};

    @Bean
    // 我们的配置文件可以直接放在类路径下叫messages.properties。
    @ConfigurationProperties(prefix = &quot;spring.messages&quot;)
    public MessageSourceProperties messageSourceProperties() {
        return new MessageSourceProperties();
    }

    @Bean
    public MessageSource messageSource(MessageSourceProperties properties) {
        ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
        if (StringUtils.hasText(properties.getBasename())) {
            // 设置国际化资源文件的基础名（去掉语言国家代码的）。
            messageSource.setBasenames(StringUtils
                    .commaDelimitedListToStringArray(StringUtils.trimAllWhitespace(properties.getBasename())));
        }
        if (properties.getEncoding() != null) {
            messageSource.setDefaultEncoding(properties.getEncoding().name());
        }
        messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());
        Duration cacheDuration = properties.getCacheDuration();
        if (cacheDuration != null) {
            messageSource.setCacheMillis(cacheDuration.toMillis());
        }
        messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());
        messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());
        return messageSource;
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>去页面获取国际化的内容。</li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109713-04088a42-a925-4a03-857a-ba3b119d4adf.png" alt="image"></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Content-Type<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/html; charset=UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1, shrink-to-fit=no<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>description<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>author<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Signin Template for Bootstrap<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Bootstrap core CSS --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asserts/css/bootstrap.min.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/webjars/bootstrap/4.4.1/css/bootstrap.css}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Custom styles for this template --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asserts/css/signin.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/asserts/css/signin.css}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-center<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-signin<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dashboard.html<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mb-4<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/asserts/img/bootstrap-solid.svg}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>asserts/img/bootstrap-solid.svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>72<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>72<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h3 mb-3 font-weight-normal<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{login.tip}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Please sign in<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sr-only<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{login.username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Username<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{login.username}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">autofocus</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sr-only<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{login.password}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{login.password}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox mb-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>checkbox<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remember-me<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> [[#{login.remember}]]
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-lg btn-primary btn-block<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{login.btn}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Sign in<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mt-5 mb-3 text-muted<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>© 2020-2021<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-sm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>中文<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-sm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>English<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>效果：根据浏览器设置的语言信息切换了国际化。</p><h4 id="_6-7-3-原理" tabindex="-1"><a class="header-anchor" href="#_6-7-3-原理" aria-hidden="true">#</a> 6.7.3 原理</h4><ul><li><code>Locale</code>：区域信息对象；</li><li><code>LocaleResolver</code>：获取区域信息对象。</li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Bean
@ConditionalOnMissingBean
@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)
public LocaleResolver localeResolver() {
    if (this.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) {
        return new FixedLocaleResolver(this.mvcProperties.getLocale());
    }
    AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();
    localeResolver.setDefaultLocale(this.mvcProperties.getLocale());
    return localeResolver;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>默认的就是根据请求头带来的区域信息获取 <code>Locale</code> 进行国际化。</p><ol start="4"><li>点击链接切换国际化</li></ol><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// 可以在链接上携带区域信息
public class MyLocaleResolver implements LocaleResolver {
    @Override
    public Locale resolveLocale(HttpServletRequest request) {
        String l = request.getParameter(&quot;l&quot;);
        Locale locale = Locale.getDefault();
        if(!StringUtils.isEmpty(l)){
            String[] split = l.split(&quot;_&quot;);
            locale = new Locale(split[0],split[1]);
        }
        return locale;
    }

    @Override
    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) {

    }

@Bean
    public LocaleResolver localeResolver(){
        return new MyLocaleResolver();
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7、restful-的-crud" tabindex="-1"><a class="header-anchor" href="#_7、restful-的-crud" aria-hidden="true">#</a> 7、RESTful 的 CRUD</h2><h3 id="_7-1-实验要求" tabindex="-1"><a class="header-anchor" href="#_7-1-实验要求" aria-hidden="true">#</a> 7.1 实验要求</h3><ol><li><strong>CRUD</strong> 满足 <strong>REST</strong> 风格。</li></ol><p><strong>URI</strong>：<strong>/资源名称/资源标识</strong>，以 <strong>HTTP</strong> 请求方式区分对资源的 <strong>CRUD</strong> 操作。</p><table><thead><tr><th></th><th>普通的 CRUD（URI 来区分操作）</th><th>RESTful 的 CRUD</th></tr></thead><tbody><tr><td>查询</td><td>getEmp</td><td>emp---GET</td></tr><tr><td>添加</td><td>addEmp?xxx</td><td>emp---POST</td></tr><tr><td>修改</td><td>updateEmp?id=xxx&amp;xxx=xx</td><td>emp/{id}---PUT</td></tr><tr><td>删除</td><td>deleteEmp?id=1</td><td>emp/{id}---DELETE</td></tr></tbody></table><ol start="2"><li>请求架构</li></ol><table><thead><tr><th>实验功能</th><th>请求 URI</th><th>请求方式</th></tr></thead><tbody><tr><td>查询所有员工</td><td>emps</td><td>GET</td></tr><tr><td>查询某个员工（来到修改页面）</td><td>emp/1</td><td>GET</td></tr><tr><td>来到添加页面</td><td>emp</td><td>GET</td></tr><tr><td>添加员工</td><td>emp</td><td>POST</td></tr><tr><td>来到修改页面（查出员工信息并进行回显）</td><td>emp/1</td><td>GET</td></tr><tr><td>修改员工</td><td>emp</td><td>PUT</td></tr><tr><td>删除员工</td><td>emp/1</td><td>DELETE</td></tr></tbody></table><h3 id="_7-2-crud-员工列表" tabindex="-1"><a class="header-anchor" href="#_7-2-crud-员工列表" aria-hidden="true">#</a> 7.2 CRUD-员工列表</h3><p><strong>Thymeleaf</strong> 公共页面元素抽取：</p><ol><li><p>抽取公共片段</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="©">&amp;copy;</span> 2021 The Good Thymes Virtual Grocery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>引入公共片段</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~{footer :: copy}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>~{templatename::selector}</code> -&gt; 模板名 :: 选择器</li><li><code>~{templatename::fragmentname}</code> -&gt; 模板名 :: 片段名</li></ul></li><li><p>默认效果</p><ul><li><code>insert</code> 的公共片段在 <code>div</code> 标签中；</li><li>如果使用 <code>th:insert</code> 等属性进行引入，可以不用写 <code>~{}</code>；</li><li>行内写法：<code>[[~{}]]</code> 或 <code>[(~{})]</code>。</li></ul></li></ol><p>三种引入公共片段的 <code>th</code> 属性：</p><ul><li><code>th:insert</code>：将公共片段整个<strong>插入</strong>到声明引入的元素中；</li><li><code>th:replace</code>：将声明引入的元素<strong>替换</strong>为公共片段；</li><li><code>th:include</code>：将被引入的片段的内容<strong>包含</strong>进这个标签中。</li></ul><p>参考：<a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#template-layout" target="_blank" rel="noopener noreferrer">Tutorial: Using Thymeleaf<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 三种引入方式 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>insert</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer :: copy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 对应的效果 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>footer</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>footer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token entity named-entity" title="©">&amp;copy;</span> 2011 The Good Thymes Virtual Grocery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>引入片段的时候传入参数：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nav</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>col-md-2 d-none d-md-block bg-light sidebar<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sidebar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sidebar-sticky<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav flex-column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav-item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>nav-link active<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${activeUri==<span class="token punctuation">&#39;</span>main.html<span class="token punctuation">&#39;</span> ? <span class="token punctuation">&#39;</span>nav-link active<span class="token punctuation">&#39;</span> : <span class="token punctuation">&#39;</span>nav-link<span class="token punctuation">&#39;</span>}<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/main.html}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>24<span class="token punctuation">&quot;</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 24 24<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-linecap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-linejoin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>feather feather-home<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>polyline</span> <span class="token attr-name">points</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>9 22 9 12 15 12 15 22<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>polyline</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
                    Dashboard <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sr-only<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>(current)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 引入侧边栏并传入参数 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>commons/bar :: #sidebar(activeUri=<span class="token punctuation">&#39;</span>emps<span class="token punctuation">&#39;</span>)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-crud-员工添加" tabindex="-1"><a class="header-anchor" href="#_7-3-crud-员工添加" aria-hidden="true">#</a> 7.3 CRUD-员工添加</h3><p>添加页面：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/emp}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>LastName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>LastName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhangsan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhangsan@atguigu.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Gender<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check form-check-inline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check form-check-inline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>department<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>department.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- 提交的是部门的 id --&gt;</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${dept.id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept:${depts}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${dept.departmentName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Birth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birth<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhangsan<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-primary<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-4-crud-员工修改" tabindex="-1"><a class="header-anchor" href="#_7-4-crud-员工修改" aria-hidden="true">#</a> 7.4 CRUD-员工修改</h3><p>修改添加二合一表单：</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 需要区分是员工修改还是添加 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/emp}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 发送 PUT 请求修改员工数据 --&gt;</span>
    <span class="token comment">&lt;!-- REST 使用方式：
         1、SpringMVC 中配置 HiddenHttpMethodFilter（Springboot 自动配置）；
         2、页面创建一个 POST 表单；
         3、创建一个 input 项，name=&quot;_method&quot;，值就是我们指定的请求方式。
    --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_method<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>put<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>id<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp.id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>LastName<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhangsan<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?${emp.lastName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Email<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhangsan@atguigu.com<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?${emp.email}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Gender<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check form-check-inline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?${emp.gender==1}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>男<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check form-check-inline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>radio<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gender<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>checked</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?${emp.gender==0}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-check-label<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>女<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>department<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 提交的是部门的 id --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>department.id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>      
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>option</span> <span class="token attr-name"><span class="token namespace">th:</span>selected</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?${dept.id}==${emp.department.id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${dept.id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dept:${depts}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${dept.departmentName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>option</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-group<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span><span class="token punctuation">&gt;</span></span>Birth<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>birth<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form-control<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>zhangsan<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?${#dates.format(emp.birth, <span class="token punctuation">&#39;</span>yyyy-MM-dd HH:mm<span class="token punctuation">&#39;</span>)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp!=null}?<span class="token punctuation">&#39;</span>修改<span class="token punctuation">&#39;</span>:<span class="token punctuation">&#39;</span>添加<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>添加<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-5-crud-员工删除" tabindex="-1"><a class="header-anchor" href="#_7-5-crud-员工删除" aria-hidden="true">#</a> 7.5 CRUD-员工删除</h3><p>如果报错：</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span></span>HttpRequestMethodNotSupportedException</span><span class="token operator">:</span> <span class="token class-name">Request</span> method <span class="token char">&#39;POST&#39;</span> not supported
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>那么需要在 <strong>application.properties</strong> 中配置：</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token comment"># 启用 hiddenMethod 过滤器</span>
<span class="token key attr-name">spring.mvc.hiddenmethod.filter.enabled</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>emp:${emps}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp.id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>[[${emp.lastName}]]<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp.email}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp.gender}==0?<span class="token punctuation">&#39;</span>女<span class="token punctuation">&#39;</span>:<span class="token punctuation">&#39;</span>男<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${emp.department.departmentName}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${#dates.format(emp.birth, <span class="token punctuation">&#39;</span>yyyy-MM-dd HH:mm<span class="token punctuation">&#39;</span>)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-sm btn-primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/emp/}+${emp.id}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>编辑<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>del_uri=@{/emp/}+${emp.id}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>btn btn-sm btn-danger deleteBtn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.deleteBtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 删除当前员工</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#deleteEmpForm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;action&quot;</span><span class="token punctuation">,</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;del_uri&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8、拦截器" tabindex="-1"><a class="header-anchor" href="#_8、拦截器" aria-hidden="true">#</a> 8、拦截器</h2><h3 id="_8-1-handlerinterceptor-接口" tabindex="-1"><a class="header-anchor" href="#_8-1-handlerinterceptor-接口" aria-hidden="true">#</a> 8.1 <code>HandlerInterceptor</code> 接口</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>/**
 * 登录检查：
 * 1、配置好拦截器要拦截哪些请求；
 * 2、把这些配置放在容器中。
 */
@Slf4j
public class LoginInterceptor implements HandlerInterceptor {
    // 目标方法执行之前
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        String requestURI = request.getRequestURI();
        log.info(&quot;preHandle 拦截的请求路径是 {}&quot;,requestURI);

        // 登录检查逻辑
        HttpSession session = request.getSession();
        Object loginUser = session.getAttribute (&quot;loginUser&quot;);
        if (loginUser != null){
            // 放行
            return true;
        }

        // 未登录：拦截住请求，然后跳转到登录页
        request.setAttribute(&quot;msg&quot;,&quot;请先登录&quot;);
        // request.sendRedirect(&quot;/&quot;);
        request.getRequestDispatcher(&quot;/&quot;).forward(request,response);
        return false;
    }

    // 目标方法执行完成以后
    @Override
    public void postHandle (HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        log.info (&quot;postHandle 执行 {}&quot;, modelAndView);
    }

    // 页面渲染完成以后
    @Override
    public void afterCompletion (HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        log.info (&quot;afterCompletion 执行异常 {}&quot;,ex);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-2-配置拦截器" tabindex="-1"><a class="header-anchor" href="#_8-2-配置拦截器" aria-hidden="true">#</a> 8.2 配置拦截器</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>/**
 * 1、编写一个拦截器实现 HandlerInterceptor 接口
 * 2、拦截器注册到容器中（实现 WebMvcConfigurer 的 addInterceptors 方法）
 * 3、指定拦截规则（如果是拦截所有，静态资源也会被拦截）
 */
@Configuration
public class AdminWebConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors (InterceptorRegistry registry) {
        registry.addInterceptor (new LoginInterceptor ())
                .addPathPatterns (&quot;/**&quot;)  // 所有请求都被拦截包括静态资源
                .excludePathPatterns (&quot;/&quot;,&quot;/login&quot;,&quot;/css/**&quot;,&quot;/fonts/**&quot;,&quot;/images/**&quot;,&quot;/js/**&quot;); // 放行的请求
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8-3-拦截器原理" tabindex="-1"><a class="header-anchor" href="#_8-3-拦截器原理" aria-hidden="true">#</a> 8.3 拦截器原理</h3><ol><li><p>根据当前请求，找到 <code>HandlerExecutionChain</code>（可以处理请求的 handler 以及 handler 的所有拦截器）；</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605764129365-5b31a748-1541-4bee-9692-1917b3364bc6.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_44%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="mappedHandler"></p></li><li><p>先来<strong>顺序执行</strong>所有拦截器的 <code>preHandle</code> 方法；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1626617930537-72c79112-cb73-47e3-a35f-66f93a8b09a1.png" alt="preHandle"></p></li></ol><ul><li>如果当前拦截器 <code>prehandler</code> 返回 <code>true</code>，则<strong>执行</strong>下一个拦截器的 <code>preHandle</code>；</li><li>如果当前拦截器 <code>prehandler</code> 返回 <code>false</code>，直接<strong>倒序触发</strong>所有<strong>已经执行</strong>了的拦截器的 <code>afterCompletion</code>；</li></ul><ol start="3"><li><p>如果任何一个拦截器返回 <code>false</code>，直接<strong>跳出</strong>，<strong>不执行</strong>目标方法；</p></li><li><p>如果所有拦截器都返回 <code>true</code>，<strong>执行</strong>目标方法；</p></li><li><p><strong>倒序执行</strong>所有拦截器的 <code>postHandle</code> 方法；</p></li><li><p>前面的步骤有任何异常，都会直接<strong>倒序触发</strong> <code>afterCompletion</code>；</p></li><li><p>页面成功渲染完成以后，也会<strong>倒序触发</strong> <code>afterCompletion</code>。</p></li></ol><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605765121071-64cfc649-4892-49a3-ac08-88b52fb4286f.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_35%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="拦截器执行顺序"></p><h2 id="_9、文件上传" tabindex="-1"><a class="header-anchor" href="#_9、文件上传" aria-hidden="true">#</a> 9、文件上传</h2><p>一个文件上传的过程如下图所示：</p><p><img src="https://img2018.cnblogs.com/blog/242916/201811/242916-20181110161028169-1735049652.png" alt="文件上传过程"></p><ol><li>浏览器发起 <strong>HTTP POST</strong> 请求，指定请求头： <em><strong>Content-Type: multipart/form-data</strong></em></li><li>服务端解析请求内容，执行文件保存处理，返回成功消息。</li></ol><p>参考：<a href="https://www.cnblogs.com/littleatp/p/9939705.html" target="_blank" rel="noopener noreferrer">文件上传原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_9-1-页面表单" tabindex="-1"><a class="header-anchor" href="#_9-1-页面表单" aria-hidden="true">#</a> 9.1 页面表单</h3><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>提交<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-2-限制上传文件大小" tabindex="-1"><a class="header-anchor" href="#_9-2-限制上传文件大小" aria-hidden="true">#</a> 9.2 限制上传文件大小</h3><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
    <span class="token key atrule">multipart</span><span class="token punctuation">:</span>
      <span class="token key atrule">max-file-size</span><span class="token punctuation">:</span> 10MB <span class="token comment"># 单个上传文件大小上限</span>
      <span class="token key atrule">max-request-size</span><span class="token punctuation">:</span> 100MB <span class="token comment"># 一次请求上传所有文件大小上限</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-3-文件上传代码" tabindex="-1"><a class="header-anchor" href="#_9-3-文件上传代码" aria-hidden="true">#</a> 9.3 文件上传代码</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// MultipartFile 自动封装上传过来的文件
@PostMapping(&quot;/upload&quot;)
public String upload(@RequestParam(&quot;email&quot;) String email,
                     @RequestParam(&quot;username&quot;) String username,
                     @RequestPart(&quot;headerImg&quot;) MultipartFile headerImg,
                     @RequestPart(&quot;photos&quot;) MultipartFile[] photos) throws IOException {
    log.info(&quot;上传的信息：email={}，username={}，headerImg={}，photos={}&quot;,
            email, username, headerImg.getSize(), photos.length);

    if(!headerImg.isEmpty()){
        // 保存到文件服务器，OSS服务器
        String originalFilename = headerImg.getOriginalFilename();
        headerImg.transferTo(new File(&quot;D:\\cache\\&quot;+originalFilename));
    }

    if(photos.length &gt; 0){
        for (MultipartFile photo : photos) {
            if(!photo.isEmpty()){
                String originalFilename = photo.getOriginalFilename();
                photo.transferTo(new File(&quot;D:\\cache\\&quot; + originalFilename));
            }
        }
    }

    return &quot;main&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9-4-自动配置原理" tabindex="-1"><a class="header-anchor" href="#_9-4-自动配置原理" aria-hidden="true">#</a> 9.4 自动配置原理</h3><p>文件上传自动配置类 <code>MultipartAutoConfiguration</code> 自动配置好了文件上传解析器 <code>StandardServletMultipartResolver</code>（使用 Servlet 所提供的功能支持，不需要依赖任何其他的项目） 。</p><p>原理步骤：</p><ol><li><p><code>request</code> 请求进来使用文件上传解析器判断（<code>isMultipart(request</code>）并封装（<code>resolveMultipart(request)</code>），返回（<code>MultipartHttpServletRequest</code>）文件上传请求；</p></li><li><p>参数解析器 <code>RequestPartMethodArgumentResolver</code> 来解析请求中的文件内容并封装成 <code>MultipartFile</code>（上传文件的详细信息，如原始文件名、内容类型、大小等等）；</p></li><li><p>将 <code>request</code> 中的文件信息封装为一个 <code>MultiValueMap&lt;String, MultipartFile&gt;</code>；</p></li><li><p>遍历 <code>MultiValueMap</code> 对于每一个 <code>MultipartFile</code> 调用 <code>FileCopyUtils.copy()</code> 实现文件流的拷贝。</p></li></ol><h2 id="_10、异常处理" tabindex="-1"><a class="header-anchor" href="#_10、异常处理" aria-hidden="true">#</a> 10、异常处理</h2><h3 id="_10-1-默认规则" tabindex="-1"><a class="header-anchor" href="#_10-1-默认规则" aria-hidden="true">#</a> 10.1 默认规则</h3><p>默认情况下，SpringBoot 提供 <code>/error</code> 处理所有错误的映射。</p><ul><li><p>对于浏览器客户端，响应一个 <strong>Whitelabel</strong> 错误页面（因为浏览器请求头的 <strong>Accept</strong> 字段默认以 <strong>text/html</strong> 开头），中包含错误，<strong>HTTP</strong> 状态和异常消息的详细信息；</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606024616835-bc491bf0-c3b1-4ac3-b886-d4ff3c9874ce.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_28%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="html 响应"></p></li><li><p>对于其他客户端（如 <strong>Postman</strong>），它将生成 <strong>json</strong> 响应。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606024421363-77083c34-0b0e-4698-bb72-42da351d3944.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_14%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="json 响应"></p></li></ul><p>要对其进行自定义，添加 <code>View</code> 解析为 <code>error</code></p><p>要完全替换默认行为，可以实现 <code>ErrorController </code> 并注册该类型的 <code>Bean</code> 定义，或添加 <code>ErrorAttributes</code> 类型的组件以使用现有机制但替换其内容。</p><h3 id="_10-2-定制异常处理逻辑" tabindex="-1"><a class="header-anchor" href="#_10-2-定制异常处理逻辑" aria-hidden="true">#</a> 10.2 定制异常处理逻辑</h3><p><strong>error/404.html</strong>、<strong>error/5xx.html</strong>：有精确的错误状态码页面就匹配精确，没有就找 <strong>4xx.html</strong>，如果都没有就触发白页。</p><p>自定义错误页：</p><ol><li><p><code>@ControllerAdvice</code> + <code>@ExceptionHandler</code> 处理全局异常，底层是 <code>ExceptionHandlerExceptionResolver</code> 支持的。</p></li><li><p>自定义实现 <code>HandlerExceptionResolver</code> 处理异常，可以作为默认的全局异常处理规则。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606114688649-e6502134-88b3-48db-a463-04c23eddedc7.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_16%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="HandlerExceptionResolver"></p></li><li><p><code>ErrorViewResolver</code> 实现自定义异常处理。</p></li></ol><ul><li>自己调用 <code>response.sendError(statusCode, resolvedReason)</code>，<strong>error</strong> 请求就会转给 <code>BasicErrorController</code>。</li><li>如果自己没有调用，并且异常没有处理器能处理，<strong>Tomcat</strong> 底层调用 <code>response.sendError(statusCode, resolvedReason)</code>，<strong>error</strong> 请求就会转给 <code>BasicErrorController</code>。</li><li><code>BasicErrorController</code> 要去的页面地址是 <code>ErrorViewResolver</code> 。</li></ul><ol start="4"><li><p><code>@ResponseStatus</code> + 自定义异常</p><p>底层是 <code>ResponseStatusExceptionResolver</code>，被 <code>ResponseStatus</code> 注解的元素会使<strong>Tomcat</strong> 底层调用 <code>response.sendError(statusCode, resolvedReason)</code>。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>response<span class="token punctuation">.</span><span class="token function">sendError</span><span class="token punctuation">(</span><span class="token class-name">HttpServletResponse</span><span class="token punctuation">.</span>SC_BAD_REQUEST<span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606114118010-f4aaf5ee-2747-4402-bc82-08321b2490ed.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_19%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="404 页面"></p></li></ol><h3 id="_10-3-异常处理自动配置原理" tabindex="-1"><a class="header-anchor" href="#_10-3-异常处理自动配置原理" aria-hidden="true">#</a> 10.3 异常处理自动配置原理</h3><ul><li><p><code>ErrorMvcAutoConfiguration</code> 自动配置异常处理规则。</p><ol><li><p>定义错误页面属性：组件类型为 <code>DefaultErrorAttributes</code>，组件 ID 为 <code>errorAttributes</code>。</p><ul><li><code>public class DefaultErrorAttributes implements ErrorAttributes, HandlerExceptionResolver</code>。</li></ul></li><li><p>定义页面跳转逻辑：组件类型为 <code>BasicErrorController</code>，组件 ID 为<code>basicErrorController</code>（<strong>json</strong> + 白页 适配响应）。</p><ul><li><p>处理默认 <strong>/error</strong> 路径的请求，页面响应 <code>new ModelAndView(&quot;error&quot;, model)</code>。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Controller
@RequestMapping(&quot;${server.error.path:${error.path:/error}}&quot;)
public class BasicErrorController extends AbstractErrorController {
    // 产生 html 类型的数据，浏览器发送的请求来到这个方法处理
    @RequestMapping(produces = &quot;text/html&quot;)
    public ModelAndView errorHtml(HttpServletRequest request,
            HttpServletResponse response) {
        HttpStatus status = getStatus(request);
        Map&lt;String, Object&gt; model = Collections.unmodifiableMap(getErrorAttributes(
                request, isIncludeStackTrace(request, MediaType.TEXT_HTML)));
        response.setStatus(status.value());
        
        // 去哪个页面作为错误页面，包含页面地址和页面内容
        ModelAndView modelAndView = resolveErrorView(request, response, status, model);
        return (modelAndView == null ? new ModelAndView(&quot;error&quot;, model) : modelAndView);
    }

    // 产生 json 数据，其他客户端来到这个方法处理
    @RequestMapping
    @ResponseBody
    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; error(HttpServletRequest request) {
        Map&lt;String, Object&gt; body = getErrorAttributes(request,
                isIncludeStackTrace(request, MediaType.ALL));
        HttpStatus status = getStatus(request);
        return new ResponseEntity&lt;Map&lt;String, Object&gt;&gt;(body, status);
    }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>容器中有组件 <code>View</code>，组件 ID 为 <code>error</code>（响应默认错误页）</p></li><li><p>容器中放组件 <code>BeanNameViewResolver</code>（视图解析器），按照返回的视图名作为组件 ID 去容器中找 <code>View</code> 对象。</p></li></ul></li><li><p>定义错误页面 <strong>html</strong> 路径：类型为 <code>DefaultErrorViewResolver</code>，组件 ID 为 <code>conventionErrorViewResolver</code>。</p><ul><li>如果发生错误，会以 <strong>HTTP</strong> 状态码作为视图页地址（<code>viewName</code>），找到真正的页面。</li><li><strong>error/404.html</strong>、<strong>error/5xx.html</strong>。</li></ul></li></ol></li></ul><h3 id="_10-4-异常处理流程" tabindex="-1"><a class="header-anchor" href="#_10-4-异常处理流程" aria-hidden="true">#</a> 10.4 异常处理流程</h3><ol><li><p>执行目标方法，目标方法运行期间有任何异常都会被 <code>catch</code> 捕捉，而且标志当前请求结束，并且将异常赋值给 <code>dispatchException</code>。</p></li><li><p>进入视图解析流程：</p><p><code>processDispatchResult(processedRequest, response, mappedHandler, mv, dispatchException);</code></p></li><li><p><code>mv = processHandlerException</code> 处理 handler 发生的异常，处理完成返回 <code>ModelAndView</code>。</p><ol><li><p>遍历所有的 <code>handlerExceptionResolvers</code> 处理器异常解析器**，**看谁能处理当前异常。</p></li><li><p>系统默认的异常解析器：</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606047109161-c68a46c1-202a-4db1-bbeb-23fcae49bbe9.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_17%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><ol><li><code>DefaultErrorAttributes</code>先来处理异常，把异常信息保存到 <strong>request</strong> 域，并且返回 <code>null</code>；</li><li>然后交由 <code>HandlerExceptionResolverComposite</code>，遍历其中的异常处理器，默认没有处理器能处理异常，所以异常会被抛出。 <ol><li>如果异常没有处理器能处理，最终 <strong>Tomcat</strong> 底层 就会发送 <code>/error</code> 请求，会被底层的 <code>BasicErrorController</code> 处理。</li><li>解析错误视图：遍历所有的 <code>ErrorViewResolver</code> 看谁能解析。</li><li>默认的 <code>DefaultErrorViewResolver </code>，作用是把响应状态码作为错误页的地址，<strong>error/500.html</strong> 。</li><li>模板引擎最终响应这个页面 <strong>error/500.html</strong>。</li></ol></li></ol></li></ol></li></ol><h2 id="_11、web-原生组件注入-servlet、filter、listener" tabindex="-1"><a class="header-anchor" href="#_11、web-原生组件注入-servlet、filter、listener" aria-hidden="true">#</a> 11、Web 原生组件注入（<code>Servlet</code>、<code>Filter</code>、<code>Listener</code>）</h2><h3 id="_11-1-使用-servlet-api" tabindex="-1"><a class="header-anchor" href="#_11-1-使用-servlet-api" aria-hidden="true">#</a> 11.1 使用 Servlet API</h3><ul><li><code>@ServletComponentScan(basePackages = &quot;com.atguigu.admin&quot;)</code>：指定原生 <code>Servlet</code> 组件都放在哪里。</li><li><code>@WebServlet(urlPatterns = &quot;/my&quot;)</code>：效果，直接响应，没有经过 Spring 的拦截器？</li><li><code>@WebFilter(urlPatterns={&quot;/css/*&quot;, &quot;/images/*&quot;})</code>：过滤 css、images 静态资源。</li><li><code>@WebListener</code>：监听器。</li></ul><p>扩展：<code>DispatchServlet</code> 如何注册进来？</p><ul><li><p>容器中自动配置了 <code>DispatcherServlet</code> 属性绑定到 <code>WebMvcProperties</code>，对应的配置文件配置项是 <code>spring.mvc</code>。</p></li><li><p>通过 <code>ServletRegistrationBean&lt;DispatcherServlet&gt;</code> 把 <code>DispatcherServlet</code> 配置进来。</p></li><li><p>默认映射的是 <code>/</code> 路径。</p></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606284869220-8b63d54b-39c4-40f6-b226-f5f095ef9304.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_32%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img"></p><p>多个 <code>Servlet</code> 都能处理到同一层路径，精确优选原则：</p><p>A： /my/</p><p>B： /my/1 优先</p><h3 id="_11-2-使用-registrationbean" tabindex="-1"><a class="header-anchor" href="#_11-2-使用-registrationbean" aria-hidden="true">#</a> 11.2 使用 RegistrationBean</h3><p><code>ServletRegistrationBean</code>, <code>FilterRegistrationBean</code>, and <code>ServletListenerRegistrationBean</code></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyRegistConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletRegistrationBean</span> <span class="token function">myServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">MyServlet</span> myServlet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyServlet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ServletRegistrationBean</span><span class="token punctuation">(</span>myServlet<span class="token punctuation">,</span><span class="token string">&quot;/my&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/my02&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FilterRegistrationBean</span> <span class="token function">myFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">MyFilter</span> myFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        return new FilterRegistrationBean(myFilter,myServlet());</span>
        <span class="token class-name">FilterRegistrationBean</span> filterRegistrationBean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilterRegistrationBean</span><span class="token punctuation">(</span>myFilter<span class="token punctuation">)</span><span class="token punctuation">;</span>
        filterRegistrationBean<span class="token punctuation">.</span><span class="token function">setUrlPatterns</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot;/my&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/css/*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> filterRegistrationBean<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">ServletListenerRegistrationBean</span> <span class="token function">myListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">MySwervletContextListener</span> mySwervletContextListener <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MySwervletContextListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ServletListenerRegistrationBean</span><span class="token punctuation">(</span>mySwervletContextListener<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_12、配置-servlet-容器" tabindex="-1"><a class="header-anchor" href="#_12、配置-servlet-容器" aria-hidden="true">#</a> 12、配置 <code>Servlet</code> 容器</h2><h3 id="_12-1-切换嵌入式servlet容器" tabindex="-1"><a class="header-anchor" href="#_12-1-切换嵌入式servlet容器" aria-hidden="true">#</a> 12.1 切换嵌入式Servlet容器</h3><p>SpringBoot 内置的 WebServer：<code>Tomcat</code>（默认）, <code>Jetty</code>, or <code>Undertow</code>。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606280937533-504d0889-b893-4a01-af68-2fc31ffce9fc.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_26%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="SpringBoot 内置的 WebServer"></p><p><code>ServletWebServerApplicationContext</code> 容器启动寻找 <code>ServletWebServerFactory</code> 并引导创建服务器。</p><p>切换服务器：在 <strong>pom.xml</strong> 中排除 <strong>Tomcat</strong> 依赖，再将目标服务器的 starter 导入即可。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>原理：</p><p>SpringBoot 应用启动发现当前是 <strong>Web</strong> 应用，<code>web-starter</code> 自动导入<strong>Tomcat</strong>：</p><ol><li><p><strong>Web</strong> 应用会创建一个 <strong>Web</strong> 版的 <code>IoC</code> 容器 <code>ServletWebServerApplicationContext</code></p></li><li><p><code>ServletWebServerApplicationContext</code> 启动的时候寻找 <code>ServletWebServerFactory</code>（<code>Servlet</code> 的 <strong>Web</strong> 服务器工厂 ---&gt; <code>Servlet</code> 的 <strong>Web</strong> 服务器）；</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1627120946492-5ee582f2-7f37-4cc5-9071-2cafac6171b4.png" alt="ServletWebServerFactory"></p></li><li><p>SpringBoot 底层默认有很多的 <strong>WebServer</strong> 工厂：<code>TomcatServletWebServerFactory</code>, <code>JettyServletWebServerFactory</code>, or <code>UndertowServletWebServerFactory</code>；</p></li><li><p>底层直接会有一个 <strong>WebServer</strong> 工厂自动配置类：<code>ServletWebServerFactoryAutoConfiguration</code>；</p></li><li><p><strong>WebServer</strong> 工厂自动配置类 <code>ServletWebServerFactoryAutoConfiguration</code> 导入了 <code>ServletWebServerFactoryConfiguration</code> 配置类；</p></li><li><p><code>ServletWebServerFactoryConfiguration</code> 配置类动态判断系统中到底导入了哪个 <strong>Web</strong> 服务器的包， <code>web-starter</code> 默认是导入 <strong>Tomcat</strong> 包，容器中就有 <code>TomcatServletWebServerFactory</code>；</p></li><li><p><code>TomcatServletWebServerFactory</code> 创建 <strong>Tomcat</strong> 对象，然后将 <strong>Tomcat</strong> 对象传递给 <code>TomcatWebServer</code> ，</p><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1304385/1627121101649-b2304f72-a57b-428b-a1ad-ea16a98d9292.png" alt="getWebServer"></p><p><code>TomcatWebServer</code> 的构造器拥有初始化方法 <code>initialize()</code>，使用 <code>this.tomcat.start();</code> 启动 <strong>Tomcat</strong>（只要 <strong>Tomcat</strong> 核心 <strong>jar</strong> 包存在，内嵌服务器就是手动把启动服务器的代码调用）。</p></li></ol><h3 id="_12-2-定制-servlet-容器" tabindex="-1"><a class="header-anchor" href="#_12-2-定制-servlet-容器" aria-hidden="true">#</a> 12.2 定制 <code>Servlet</code> 容器</h3><ol><li>在 <strong>application.properties</strong> 中修改和 <strong>server</strong> 有关的配置（<code>ServerProperties</code> 提供）；</li></ol><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">server.port</span><span class="token punctuation">=</span><span class="token value attr-value">8081</span>
<span class="token key attr-name">server.context-path</span><span class="token punctuation">=</span><span class="token value attr-value">/crud</span>
<span class="token key attr-name">server.tomcat.uri-encoding</span><span class="token punctuation">=</span><span class="token value attr-value">UTF‐8</span>
<span class="token comment"># 通用的 Servlet 容器设置</span>
server.xxx
<span class="token comment"># Tomcat 的设置</span>
server.tomcat.xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>实现 <code>WebServerFactoryCustomizer&lt;ConfigurableServletWebServerFactory&gt;</code></p><ul><li><p>把配置文件的值和 <code>ServletWebServerFactory</code> 进行绑定；</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Component
public class CustomizationBean implements WebServerFactoryCustomizer&lt;ConfigurableServletWebServerFactory&gt; {
    @Override
    public void customize(ConfigurableServletWebServerFactory server) {
        server.setPort(9000);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>直接自定义 <code>ConfigurableServletWebServerFactory </code></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Bean
public WebServerFactoryCustomizer configWebServer(){
    WebServerFactoryCustomizer webServerFactoryCustomizer = new WebServerFactoryCustomizer&lt;ConfigurableServletWebServerFactory&gt;() {
        @Override
        public void customize(ConfigurableServletWebServerFactory factory) {
            factory.setPort(9000);
        }
    };
    return webServerFactoryCustomizer;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h1 id="六、docker" tabindex="-1"><a class="header-anchor" href="#六、docker" aria-hidden="true">#</a> 六、Docker</h1><h2 id="_1、简介-1" tabindex="-1"><a class="header-anchor" href="#_1、简介-1" aria-hidden="true">#</a> 1、简介</h2><p><strong>Docker</strong> 是一个开源的应用容器引擎，是一个轻量级容器技术。</p><p><strong>Docker</strong> 支持将软件编译成一个镜像，然后在镜像中各种软件做好配置，将镜像发布出去，其他使用者可以直接使用这个镜像。</p><p>运行中的这个镜像称为容器，容器启动是非常快速的。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109779-61872f1d-b724-4151-b1f8-912538ae4570.png" alt="Docker 鲸鱼图标"></p><p><strong>Windows</strong> 系统镜像与 <strong>Docker</strong> 镜像：</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109769-4a6d33ca-4577-4515-8a8d-fc506e7d0465.png" alt="Windows 系统镜像与 Docker 镜像"></p><h2 id="_2、核心概念" tabindex="-1"><a class="header-anchor" href="#_2、核心概念" aria-hidden="true">#</a> 2、核心概念</h2><ul><li><p>主机（Host）：安装了 <strong>Docker</strong> 程序的机器（<strong>Docker</strong> 直接安装在 <strong>Linux</strong> 或 <strong>Windows</strong> 操作系统之上）。</p></li><li><p>客户端（Client）：连接 <strong>Docker</strong> 主机进行操作。</p></li><li><p>仓库（Registry）：用来保存各种打包好的软件镜像。</p></li><li><p>镜像（Images）：软件打包好的镜像，放在 <strong>Docker</strong> 仓库中。</p></li><li><p>容器（Container）：镜像启动后的实例称为一个容器，容器是独立运行的一个或一组应用。</p></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1304385/1596209109798-7ec9e089-41ca-47f8-9d7e-4abe15124a1d.png" alt="Docker 核心概念"></p><p>使用 <strong>Docker</strong> 的步骤：</p><ol><li><p>安装 <strong>Docker</strong>；</p></li><li><p>去 <strong>Docker</strong> 仓库获取软件对应的镜像；</p></li><li><p>使用 <strong>Docker</strong> 运行这个镜像，这个镜像就会生成一个 <strong>Docker</strong> 容器；</p></li><li><p>停止 <strong>Docker</strong> 容器就是停止软件。</p></li></ol><h2 id="_3、安装docker" tabindex="-1"><a class="header-anchor" href="#_3、安装docker" aria-hidden="true">#</a> 3、安装Docker</h2><h3 id="_3-1-安装-wsl2-版-linux" tabindex="-1"><a class="header-anchor" href="#_3-1-安装-wsl2-版-linux" aria-hidden="true">#</a> 3.1 安装 WSL2 版 Linux</h3><p><a href="https://www.cnblogs.com/ageovb/p/15072680.html" target="_blank" rel="noopener noreferrer">【Windows】WSL 体验<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_3-2-linux-上安装-docker" tabindex="-1"><a class="header-anchor" href="#_3-2-linux-上安装-docker" aria-hidden="true">#</a> 3.2 Linux 上安装 Docker</h3><p><a href="https://www.cnblogs.com/ageovb/p/15086255.html" target="_blank" rel="noopener noreferrer">【Linux】安装 Docker<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="_4、docker-常用命令" tabindex="-1"><a class="header-anchor" href="#_4、docker-常用命令" aria-hidden="true">#</a> 4、Docker 常用命令</h2><h3 id="_4-1-镜像操作" tabindex="-1"><a class="header-anchor" href="#_4-1-镜像操作" aria-hidden="true">#</a> 4.1 镜像操作</h3><table><thead><tr><th>操作</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>检索</td><td><code>docker search 镜像名</code></td><td>我们经常去 Docker Hub 上检索镜像的详细信息，如镜像的 <strong>tag</strong> 标签。</td></tr><tr><td>拉取</td><td><code>docker pull 镜像名:tag</code></td><td><strong>:tag</strong> 是可选的，tag 多为软件的版本，默认是 <strong>latest</strong> 最新版。</td></tr><tr><td>列表</td><td><code>docker images</code></td><td>查看所有本地镜像。</td></tr><tr><td>删除</td><td><code>docker rmi 容器ID</code></td><td>删除指定的本地镜像。</td></tr></tbody></table><p>https://hub.docker.com/</p><h3 id="_4-2-容器操作" tabindex="-1"><a class="header-anchor" href="#_4-2-容器操作" aria-hidden="true">#</a> 4.2 容器操作</h3><p>软件镜像（QQ 安装程序）-&gt; 运行镜像（双击 QQ 图标） -&gt; 产生一个容器（正在运行的软件，如运行的 QQ）。</p><p>步骤：</p><ol><li><p>搜索镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker search tomcat</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>拉取镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker pull tomcat</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>根据镜像启动容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run --name myTomcat -d tomcat:latest</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>查看运行中的容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>停止运行中的容器</p></li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker stop 容器ID</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="6"><li><p>查看所有的容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>启动容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker start 容器ID</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>删除一个容器</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker rm 容器ID</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>启动一个做了端口映射的 <strong>Tomcat</strong></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8888:8080 tomcat</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>-d</code>：后台运行</li><li><code>-p</code>：将主机的端口映射到容器的端口，主机的端口:容器的端口</li></ul></li><li><p>为了演示简单关闭了 <code>Linux</code> 的防火墙</p><ul><li>查看防火墙状态：</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># service firewalld status</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>关闭防火墙</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># service firewalld stop</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>查看容器的日志</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker logs container-name/container-id</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol><p>更多命令参考：https://docs.docker.com/engine/reference/commandline/docker/</p><p>还可以参考每一个镜像的文档。</p><h3 id="_4-3-安装-mysql" tabindex="-1"><a class="header-anchor" href="#_4-3-安装-mysql" aria-hidden="true">#</a> 4.3 安装 MySQL</h3><p>拉取镜像</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>错误的启动：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run --name mysql01 -d mysql</span>
42f09819908bb72dd99ae19e792e0a5d03c48638421fa64cce5f8ba0f40f5846

<span class="token comment"># MySQL 退出了</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                           PORTS               NAMES
42f09819908b        mysql               <span class="token string">&quot;docker-entrypoint.sh&quot;</span>   <span class="token number">34</span> seconds ago      Exited <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token number">33</span> seconds ago                            mysql01
538bde63e500        tomcat              <span class="token string">&quot;catalina.sh run&quot;</span>        About an hour ago   Exited <span class="token punctuation">(</span><span class="token number">143</span><span class="token punctuation">)</span> About an hour ago                       compassionate_
goldstine
c4f1ac60b3fc        tomcat              <span class="token string">&quot;catalina.sh run&quot;</span>        About an hour ago   Exited <span class="token punctuation">(</span><span class="token number">143</span><span class="token punctuation">)</span> About an hour ago                       lonely_fermi
81ec743a5271        tomcat              <span class="token string">&quot;catalina.sh run&quot;</span>        About an hour ago   Exited <span class="token punctuation">(</span><span class="token number">143</span><span class="token punctuation">)</span> About an hour ago                       sick_ramanujan

<span class="token comment"># 根据容器 ID 查看错误日志，下面三个参数必须指定一个</span>
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker logs 42f09819908b</span>
error: database is uninitialized and password option is not specified 
  You need to specify one of MYSQL_ROOT_PASSWORD, MYSQL_ALLOW_EMPTY_PASSWORD and MYSQL_RANDOM_ROOT_PASSWORD。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>正确的启动：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span>
b874c56bec49fb43024b3805ab51e9097da779f2f572c22c695305dedd684c5f
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
b874c56bec49        mysql               <span class="token string">&quot;docker-entrypoint.sh&quot;</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">3</span> seconds        <span class="token number">3306</span>/tcp            mysql01
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>端口映射，将主机的端口映射到容器的端口：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run -p 3306:3306 --name mysql02 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span>
ad10e4bc5c6a0f61cbad43898de71d366117d120e39db651844c0e73863b9434
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
ad10e4bc5c6a        mysql               <span class="token string">&quot;docker-entrypoint.sh&quot;</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">2</span> seconds        <span class="token number">0.0</span>.0.0:3306-<span class="token operator">&gt;</span><span class="token number">3306</span>/tcp   mysql02
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>远程 <strong>MySQL</strong> 连接不上的解决方法：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run -p 3306:3306 --name mysql01 -e MYSQL_ROOT_PASSWORD=123456 -d mysql</span>
18e7e4fc89685c1fb8fac0c999d41f67bcd1c993b6597b1ecd514a121e132c5b
<span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it mysql01 bash</span>
root@18e7e4fc8968:/<span class="token comment"># mysql -u root -p</span>
Enter password: 
Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
Your MySQL connection <span class="token function">id</span> is <span class="token number">8</span>
Server version: <span class="token number">8.0</span>.19 MySQL Community Server - GPL

Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2020</span>, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type <span class="token string">&#39;help;&#39;</span> or <span class="token string">&#39;\h&#39;</span> <span class="token keyword">for</span> help. Type <span class="token string">&#39;\c&#39;</span> to <span class="token function">clear</span> the current input statement.

mysql<span class="token operator">&gt;</span> alter user <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;%&#39;</span> identified with mysql_native_password by <span class="token string">&#39;test1234&#39;</span><span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.02</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> flush privileges<span class="token punctuation">;</span>
Query OK, <span class="token number">0</span> rows affected <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># Ctrl+D退出</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>挂载文件夹：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run --name mysql03 -v /conf/mysql:/etc/mysql/conf.d -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>把主机的 <strong>/conf/mysql</strong> 文件夹挂载到容器的 <strong>/etc/mysql/conf.d</strong> 文件夹里面。</p><p>修改 <strong>MySQL</strong> 的配置文件就只需要把 <strong>MySQL</strong> 配置文件放在主机的 <strong>/conf/mysql</strong> 文件夹下）。</p><p>指定 <strong>MySQL</strong> 的一些配置参数：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># docker run --name some-mysql -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:tag --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_4-4-安装-redis" tabindex="-1"><a class="header-anchor" href="#_4-4-安装-redis" aria-hidden="true">#</a> 4.4 安装 Redis</h3><p><a href="https://www.cnblogs.com/ageovb/p/15086265.html" target="_blank" rel="noopener noreferrer">【Linux】Docker 中安装并配置 Redis<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h1 id="七、数据访问" tabindex="-1"><a class="header-anchor" href="#七、数据访问" aria-hidden="true">#</a> 七、数据访问</h1><h2 id="_1、sql" tabindex="-1"><a class="header-anchor" href="#_1、sql" aria-hidden="true">#</a> 1、SQL</h2><h3 id="_1-1-数据源的自动配置" tabindex="-1"><a class="header-anchor" href="#_1-1-数据源的自动配置" aria-hidden="true">#</a> 1.1 数据源的自动配置</h3><p>SpringBoot 默认是用 <code>HikariDataSource</code> 数据源（数据库连接池）。</p><h4 id="_1-1-1-导入-jdbc-场景" tabindex="-1"><a class="header-anchor" href="#_1-1-1-导入-jdbc-场景" aria-hidden="true">#</a> 1.1.1 导入 JDBC 场景</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606366100317-5e0199fa-6709-4d32-bce3-bb262e2e5e6a.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_20%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="JDBC 场景的 jar 包"></p><p>为什么需要显式导入 <strong>JDBC</strong> 场景，官方不导入数据库驱动？因为官方不知道我们接下要操作什么数据库。</p><p>数据库版本和驱动版本对应：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.1.49<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 想要修改版本
1、直接依赖引入具体版本（Maven 的就近依赖原则）
2、重新声明版本（Maven 的属性的就近优先原则） --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>5.1.49<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-1-2-分析自动配置" tabindex="-1"><a class="header-anchor" href="#_1-1-2-分析自动配置" aria-hidden="true">#</a> 1.1.2 分析自动配置</h4><p>自动配置的类：</p><ul><li><code>DataSourceAutoConfiguration</code>： 数据源的自动配置； <ul><li>修改数据源相关的配置：<strong>spring.datasource</strong>；</li><li>数据库连接池的配置，是容器中没有 <code>DataSource</code> 才自动配置的；</li><li>底层配置好的数据库连接池是：<strong>HikariDataSource</strong>。</li></ul></li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration(proxyBeanMethods = false)
@Conditional(PooledDataSourceCondition.class)
@ConditionalOnMissingBean({ DataSource.class, XADataSource.class })
@Import({ DataSourceConfiguration.Hikari.class, DataSourceConfiguration.Tomcat.class,
        DataSourceConfiguration.Dbcp2.class, DataSourceConfiguration.OracleUcp.class,
        DataSourceConfiguration.Generic.class, DataSourceJmxConfiguration.class })
protected static class PooledDataSourceConfiguration
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>JdbcTemplateAutoConfiguration</code>： <code>JdbcTemplate</code> 的自动配置，可以来对数据库进行 <strong>CRUD</strong>；</p><ul><li>可以修改这个配置项<code>@ConfigurationProperties(prefix = &quot;spring.jdbc&quot;)</code> 来修改 <code>JdbcTemplate</code>；</li><li><code>@Bean</code>、<code>@Primary</code>修饰 <code>JdbcTemplate</code>，从容器中获取这个组件。</li></ul></li><li><p><code>JndiDataSourceAutoConfiguration</code>： <strong>JNDI</strong> 的自动配置；</p></li><li><p><code>DataSourceTransactionManagerAutoConfiguration</code>： 事务管理器的自动配置；</p></li><li><p><code>XADataSourceAutoConfiguration</code>： 分布式事务相关的自动配置。</p></li></ul><h4 id="_1-1-3-修改配置项" tabindex="-1"><a class="header-anchor" href="#_1-1-3-修改配置项" aria-hidden="true">#</a> 1.1.3 修改配置项</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/db_account<span class="token punctuation">?</span>serverTimezone=GMT%2B8
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-1-4-测试" tabindex="-1"><a class="header-anchor" href="#_1-1-4-测试" aria-hidden="true">#</a> 1.1.4 测试</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Slf4j
@SpringBootTest
class Boot05WebAdminApplicationTests {
    @Autowired
    JdbcTemplate jdbcTemplate;

    @Test
    void contextLoads() {
        Long aLong = jdbcTemplate.queryForObject(&quot;select count(*) from account_tbl&quot;, Long.class);
        log.info(&quot;记录总数：{}&quot;,aLong);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-使用-druid-数据源" tabindex="-1"><a class="header-anchor" href="#_1-2-使用-druid-数据源" aria-hidden="true">#</a> 1.2 使用 Druid 数据源</h3><h4 id="_1-2-1-druid-官方-github-地址" tabindex="-1"><a class="header-anchor" href="#_1-2-1-druid-官方-github-地址" aria-hidden="true">#</a> 1.2.1 Druid 官方 Github 地址</h4><p>https://github.com/alibaba/druid</p><p>整合第三方技术的两种方式</p><ul><li>自定义；</li><li>使用官方 <strong>starter</strong>。</li></ul><h4 id="_1-2-2-自定义方式" tabindex="-1"><a class="header-anchor" href="#_1-2-2-自定义方式" aria-hidden="true">#</a> 1.2.2 自定义方式</h4><p><strong>1、创建数据源</strong></p><p>这种方式可能无法使用。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- pom.xml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- bean.xml --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.url}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.username}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>${jdbc.password}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxActive<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialSize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxWait<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timeBetweenEvictionRunsMillis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minEvictableIdleTimeMillis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testWhileIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testOnBorrow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testOnReturn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>poolPreparedStatements<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxOpenPreparedStatements<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>Spring Boot 2.5.2 版本导入 <strong>druid 1.1.17</strong> 依赖之后并不能使用监控功能，使用相同版本的 <strong>druid-spring-boot-starter</strong> 之后可以使用监控功能。</p></blockquote><p>2、<code>StatViewServlet</code></p><p>用途：</p><ul><li>提供监控信息展示的 <strong>HTML</strong> 页面；</li><li>提供监控信息的 <strong>JSON API</strong>。</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DruidStatView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.alibaba.druid.support.http.StatViewServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DruidStatView<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/druid/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、<code>StatFilter</code></p><p>用于统计监控信息：如 <strong>SQL</strong> 监控、<strong>URI</strong> 监控。</p><p>需要给数据源中配置如下属性，可以允许多个 <strong>Filter</strong>，多个用 <code>,</code> 分割；如：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>filters<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stat, slf4j<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>系统中的 <strong>Filter</strong>：</p><table><thead><tr><th>别名</th><th>Filter 类名</th></tr></thead><tbody><tr><td>default</td><td>com.alibaba.druid.filter.stat.<code>StatFilter</code></td></tr><tr><td>stat</td><td>com.alibaba.druid.filter.stat.<code>StatFilter</code></td></tr><tr><td>mergeStat</td><td>com.alibaba.druid.filter.stat.<code>MergeStatFilter</code></td></tr><tr><td>encoding</td><td>com.alibaba.druid.filter.encoding.<code>EncodingConvertFilter</code></td></tr><tr><td>log4j</td><td>com.alibaba.druid.filter.logging.<code>Log4jFilter</code></td></tr><tr><td>log4j2</td><td>com.alibaba.druid.filter.logging.<code>Log4j2Filter</code></td></tr><tr><td>slf4j</td><td>com.alibaba.druid.filter.logging.<code>Slf4jLogFilter</code></td></tr><tr><td>commonlogging</td><td>com.alibaba.druid.filter.logging.<code>CommonsLogFilter</code></td></tr></tbody></table><p>使用 <code>slowSqlMillis</code> 定义慢 <strong>SQL</strong> 的时长：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stat-filter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.filter.stat.StatFilter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slowSqlMillis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logSlowSql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-3-使用官方-starter-方式" tabindex="-1"><a class="header-anchor" href="#_1-2-3-使用官方-starter-方式" aria-hidden="true">#</a> 1.2.3 使用官方 starter 方式</h4><p>1、引入 druid-starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、分析自动配置</p><ul><li><p>扩展配置项 <strong>spring.datasource.druid</strong></p></li><li><p><code>DruidSpringAopConfiguration</code>.class, 监控 <strong>Bean</strong> 的配置项：<strong>spring.datasource.druid.aop-patterns</strong></p></li><li><p><code>DruidStatViewServletConfiguration</code>.class，默认开启监控页的配置：<strong>spring.datasource.druid.stat-view-servlet</strong></p></li><li><p><code>DruidWebStatFilterConfiguration</code>.class，默认开启 <strong>Web</strong> 监控配置；<strong>spring.datasource.druid.web-stat-filter</strong></p></li><li><p><code>DruidFilterConfiguration</code>.class，所有 <strong>Druid</strong> 自己 <strong>Filter</strong> 的配置。</p></li></ul><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>private static final String FILTER_STAT_PREFIX = &quot;spring.datasource.druid.filter.stat&quot;;
private static final String FILTER_CONFIG_PREFIX = &quot;spring.datasource.druid.filter.config&quot;;
private static final String FILTER_ENCODING_PREFIX = &quot;spring.datasource.druid.filter.encoding&quot;;
private static final String FILTER_SLF4J_PREFIX = &quot;spring.datasource.druid.filter.slf4j&quot;;
private static final String FILTER_LOG4J_PREFIX = &quot;spring.datasource.druid.filter.log4j&quot;;
private static final String FILTER_LOG4J2_PREFIX = &quot;spring.datasource.druid.filter.log4j2&quot;;
private static final String FILTER_COMMONS_LOG_PREFIX = &quot;spring.datasource.druid.filter.commons-log&quot;;
private static final String FILTER_WALL_PREFIX = &quot;spring.datasource.druid.filter.wall&quot;;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、配置示例</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/db_account<span class="token punctuation">?</span>serverTimezone=GMT%2B8
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver

    <span class="token key atrule">druid</span><span class="token punctuation">:</span>
      <span class="token key atrule">aop-patterns</span><span class="token punctuation">:</span> com.atguigu.admin.*  <span class="token comment"># 监控 Bean</span>
      <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall     <span class="token comment"># 底层开启功能：stat（sql 监控），wall（防火墙）</span>

      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span>   <span class="token comment"># 配置监控页功能</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> admin
        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> admin
        <span class="token key atrule">resetEnable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>  <span class="token comment"># Web 监控</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">urlPattern</span><span class="token punctuation">:</span> /*
        <span class="token key atrule">exclusions</span><span class="token punctuation">:</span> <span class="token string">&#39;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#39;</span>

      <span class="token key atrule">filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">stat</span><span class="token punctuation">:</span>    <span class="token comment"># 对上面 filters 里面的 stat 的详细配置</span>
          <span class="token key atrule">slow-sql-millis</span><span class="token punctuation">:</span> <span class="token number">1000</span>
          <span class="token key atrule">logSlowSql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">wall</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">config</span><span class="token punctuation">:</span>
            <span class="token key atrule">drop-table-allow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot 配置示例：</p><p>https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter</p><p>配置项列表：<a href="https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="_1-3-整合-mybatis-操作" tabindex="-1"><a class="header-anchor" href="#_1-3-整合-mybatis-操作" aria-hidden="true">#</a> 1.3 整合 MyBatis 操作</h3><p>https://github.com/mybatis</p><p>引入 <strong>MyBatis</strong> 的官方 <strong>starter</strong>：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606704096118-53001250-a04a-4210-80ee-6de6a370be2e.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_20%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="MyBatis 的 jar 包"></p><h4 id="_1-3-1-配置模式" tabindex="-1"><a class="header-anchor" href="#_1-3-1-配置模式" aria-hidden="true">#</a> 1.3.1 配置模式</h4><ul><li><p>配置 <strong>MyBatis</strong> 的配置文件，<strong>SqlMapConfig.xml</strong>（名称不固定）；</p></li><li><p>通过配置文件，加载 <strong>MyBatis</strong> 运行环境，创建 <code>SqlSessionFactory</code> 会话工厂，<code>SqlSessionFactory</code> 使用单例方式；</p></li><li><p>通过 <code>SqlSessionFactory</code> 创建 <code>SqlSession</code>，<code>SqlSession</code> 是一个面向用户的接口（提供操作数据库方法），实现对象是线程不安全的，建议 <code>sqlSession</code> 应用在方法体内；</p></li><li><p>调用 <code>sqlSession</code> 的方法去操作数据，如果需要提交事务，需要执行 <code>sqlSession</code> 的 <code>commit()</code> 方法；</p></li><li><p>释放资源，关闭 <code>sqlSession</code>；</p></li></ul><p>自动配置类：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>// 表示这是一个 Spring 配置类
@Configuration 
// SqlSessionFactory 和 SqlSessionFactoryBean 存在时才生效
@ConditionalOnClass({SqlSessionFactory.class, SqlSessionFactoryBean.class})
// DataSource 的 Canidate 注册到 Spring 容器中时才生效
@ConditionalOnSingleCandidate(DataSource.class)
// 使 MybatisProperties 注解类生效
@EnableConfigurationProperties({MybatisProperties.class})
// 在 DataSourceAutoConfiguration 和 MybatisLanguageDriverAutoConfiguration 自动配置之后执行
@AutoConfigureAfter({DataSourceAutoConfiguration.class, MybatisLanguageDriverAutoConfiguration.class})
public class MybatisAutoConfiguration implements InitializingBean {

@ConfigurationProperties(prefix = &quot;mybatis&quot;)
public class MybatisProperties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><code>@Import(AutoConfiguredMapperScannerRegistrar.class)</code>；</p></li><li><p><code>Mapper</code>： 我们只要写操作 <code>MyBatis</code> 的接口，<code>@Mapper</code> 就会被自动扫描进来。</p></li></ul><p>修改配置文件：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">config-location</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mybatis<span class="token punctuation">-</span>config.xml <span class="token comment"># 全局配置文件位置</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mapper/<span class="token important">*.xml</span> <span class="token comment"># sql 映射文件位置</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Mapper</code> 接口绑定 <strong>xml</strong>：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span>
<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>
        <span class="token name">PUBLIC</span> <span class="token string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span>
        <span class="token string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.admin.mapper.AccountMapper<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- public Account getAcct(Long id); --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAcct<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.atguigu.admin.bean.Account<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select * from account_tbl where id = #{id}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置 <strong>MyBatis</strong> 规则：</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
<span class="token comment"># config-location: classpath:mybatis/mybatis-config.xml</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mapper/<span class="token important">*.xml</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤：</p><ol><li>导入 <strong>MyBatis</strong> 官方 <strong>starter</strong>；</li><li>编写 <code>Mapper</code> 接口，标准 <code>@Mapper</code> 注解；</li><li>编写 <strong>sql</strong> 映射文件并绑定 <code>Mapper</code> 接口；</li><li>在 **application.yaml **中指定 <code>Mapper</code> 配置文件的位置，以及指定全局配置文件的信息 （建议配置在 <strong>mybatis.configuration</strong>）。</li></ol><h4 id="_1-3-2-注解模式" tabindex="-1"><a class="header-anchor" href="#_1-3-2-注解模式" aria-hidden="true">#</a> 1.3.2 注解模式</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CityMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from city where id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">City</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">City</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-3-混合模式" tabindex="-1"><a class="header-anchor" href="#_1-3-3-混合模式" aria-hidden="true">#</a> 1.3.3 混合模式</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CityMapper</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from city where id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">City</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">City</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-3-4-最佳实践" tabindex="-1"><a class="header-anchor" href="#_1-3-4-最佳实践" aria-hidden="true">#</a> 1.3.4 最佳实践</h4><ol><li>引入 <strong>mybatis-starter</strong>；</li><li>配置 <strong>application.yaml</strong> 中，指定 <strong>mapper-location</strong> 位置即可；</li><li>编写 <code>Mapper</code> 接口并标注 <code>@Mapper</code> 注解；</li><li>简单方法直接注解方式；</li><li>复杂方法编写 <strong>mapper.xml</strong> 进行绑定映射；</li><li><code>@MapperScan(&quot;com.atguigu.admin.mapper&quot;)</code> 标注在主应用类上，其他的接口就可以不用标注 <code>@Mapper</code> 注解。</li></ol><h3 id="_1-4-整合-mybatis-plus-完成-crud" tabindex="-1"><a class="header-anchor" href="#_1-4-整合-mybatis-plus-完成-crud" aria-hidden="true">#</a> 1.4 整合 MyBatis-Plus 完成 CRUD</h3><h4 id="_1-4-1-什么是-mybatis-plus" tabindex="-1"><a class="header-anchor" href="#_1-4-1-什么是-mybatis-plus" aria-hidden="true">#</a> 1.4.1 什么是 MyBatis-Plus</h4><p><a href="https://baomidou.com/" target="_blank" rel="noopener noreferrer">MyBatis-Plus<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>（简称 <strong>MP</strong>）是一个 <a href="http://www.mybatis.org/mybatis-3/" target="_blank" rel="noopener noreferrer">MyBatis<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 的增强工具，在 <strong>MyBatis</strong> 的基础上只做增强不做改变，为简化开发、提高效率而生。</p><p>建议安装 <strong>MybatisX</strong> 插件。</p><h4 id="_1-4-2-整合-mybatis-plus" tabindex="-1"><a class="header-anchor" href="#_1-4-2-整合-mybatis-plus" aria-hidden="true">#</a> 1.4.2 整合 MyBatis-Plus</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自动配置：</p><ul><li><p><code>MybatisPlusAutoConfiguration</code> 配置类，<code>MybatisPlusProperties</code> 配置项绑定；</p></li><li><p><code>SqlSessionFactory</code> 是自动配置好的，底层是容器中默认的数据源；</p></li><li><p><code>mapperLocations</code> 是自动配置好的，有默认值 <code>classpath*:/mapper/**/*.xml</code>，任意包的类路径下的所有 <strong>mapper</strong> 径下的所有 <strong>xml</strong> 都是 <strong>sql</strong> 映射文件。</p></li><li><p>容器中也自动配置好了 <code>SqlSessionTemplate</code>；</p></li><li><p><code>@Mapper</code> 标注的接口也会被自动扫描，建议直接 <code>@MapperScan(&quot;com.atguigu.admin.mapper&quot;)</code> 批量扫描就行。</p></li></ul><p>**优点：**只需要我们的 <code>Mapper</code> 继承 <code>BaseMapper </code> 就可以拥有 <strong>CRUD</strong> 能力。</p><h4 id="_1-4-3-crud-功能" tabindex="-1"><a class="header-anchor" href="#_1-4-3-crud-功能" aria-hidden="true">#</a> 1.4.3 CRUD 功能</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@GetMapping(&quot;/user/delete/{id}&quot;)
public String deleteUser(@PathVariable(&quot;id&quot;) Long id,
                         @RequestParam(value = &quot;pn&quot;,defaultValue = &quot;1&quot;) Integer pn,
                         RedirectAttributes ra){
    userService.removeById(id);
    ra.addAttribute(&quot;pn&quot;, pn);
    return &quot;redirect:/dynamic_table&quot;;
}

@GetMapping(&quot;/dynamic_table&quot;)
public String dynamic_table(@RequestParam(value=&quot;pn&quot;,defaultValue = &quot;1&quot;) Integer pn,Model model){
    // 表格内容的遍历
    //        response.sendError
    //        List&lt;User&gt; users = Arrays.asList(new User(&quot;zhangsan&quot;, &quot;123456&quot;),
    //                new User(&quot;lisi&quot;, &quot;123444&quot;),
    //                new User(&quot;haha&quot;, &quot;aaaaa&quot;),
    //                new User(&quot;hehe &quot;, &quot;aaddd&quot;));
    //        model.addAttribute(&quot;users&quot;,users);
    //
    //        if(users.size()&gt;3){
    //            throw new UserTooManyException();
    //        }
    // 从数据库中查出user表中的用户进行展示

    // 构造分页参数
    Page&lt;User&gt; page = new Page&lt;&gt;(pn, 2);
    // 调用page进行分页
    Page&lt;User&gt; userPage = userService.page(page, null);
    //        userPage.getRecords()
    //        userPage.getCurrent()
    //        userPage.getPages()
    model.addAttribute(&quot;users&quot;,userPage);
    return &quot;table/dynamic_table&quot;;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Service
public class UserServiceImpl extends ServiceImpl&lt;UserMapper,User&gt; implements UserService {}

public interface UserService extends IService&lt;User&gt; {}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2、nosql" tabindex="-1"><a class="header-anchor" href="#_2、nosql" aria-hidden="true">#</a> 2、NoSQL</h2><p><strong>Redis</strong> 是一个开源（<strong>BSD</strong> 许可）的，内存中的数据结构存储系统，它可以用作数据库、<strong>缓存</strong>和消息中间件。 它支持多种类型的数据结构，如 <a href="http://www.redis.cn/topics/data-types-intro.html#strings" target="_blank" rel="noopener noreferrer">字符串（strings）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>， <a href="http://www.redis.cn/topics/data-types-intro.html#hashes" target="_blank" rel="noopener noreferrer">散列（hashes）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>， <a href="http://www.redis.cn/topics/data-types-intro.html#lists" target="_blank" rel="noopener noreferrer">列表（lists）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sets" target="_blank" rel="noopener noreferrer">集合（sets）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>， <a href="http://www.redis.cn/topics/data-types-intro.html#sorted-sets" target="_blank" rel="noopener noreferrer">有序集合（sorted sets）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 与范围查询， <a href="http://www.redis.cn/topics/data-types-intro.html#bitmaps" target="_blank" rel="noopener noreferrer">bitmaps<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，<a href="http://www.redis.cn/topics/data-types-intro.html#hyperloglogs" target="_blank" rel="noopener noreferrer">基数统计（hyperloglogs）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 和 <a href="http://www.redis.cn/commands/geoadd.html" target="_blank" rel="noopener noreferrer">地理空间（geospatial）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 索引半径查询。 Redis 内置了 <a href="http://www.redis.cn/topics/replication.html" target="_blank" rel="noopener noreferrer">复制（replication）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，<a href="http://www.redis.cn/commands/eval.html" target="_blank" rel="noopener noreferrer">LUA脚本（Lua scripting）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>， <a href="http://www.redis.cn/topics/lru-cache.html" target="_blank" rel="noopener noreferrer">LRU驱动事件（LRU eviction）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，<a href="http://www.redis.cn/topics/transactions.html" target="_blank" rel="noopener noreferrer">事务（transactions）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 和不同级别的 <a href="http://www.redis.cn/topics/persistence.html" target="_blank" rel="noopener noreferrer">磁盘持久化（persistence）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>， 并通过 <a href="http://www.redis.cn/topics/sentinel.html" target="_blank" rel="noopener noreferrer">Redis哨兵（Sentinel）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>和自动 <a href="http://www.redis.cn/topics/cluster-tutorial.html" target="_blank" rel="noopener noreferrer">分区（Cluster）<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>提供高可用性（<strong>High Availability</strong>）。</p><h3 id="_2-1-redis-自动配置" tabindex="-1"><a class="header-anchor" href="#_2-1-redis-自动配置" aria-hidden="true">#</a> 2.1 Redis 自动配置</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606745732785-17d1227a-75b9-4f00-a3f1-7fc4137b5113.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_17%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="Redis 的 jar 包"></p><p>自动配置：</p><ul><li><p><code>RedisAutoConfiguration</code> 自动配置类，<code>RedisProperties</code> 属性类；</p></li><li><p>连接工厂是准备好的，<code>LettuceConnectionConfiguration</code>、<code>JedisConnectionConfiguration</code>；</p></li><li><p>自动注入了 <code>RedisTemplate&lt;Object, Object&gt;</code>；</p></li><li><p>自动注入了 <code>StringRedisTemplate</code>，键值都是 <code>String</code>；</p></li><li><p>我们只要使用 <code>StringRedisTemplate</code>、<code>RedisTemplate</code> 就可以操作 <strong>Redis</strong>。</p></li></ul><h3 id="_2-2-redistemplate-使用" tabindex="-1"><a class="header-anchor" href="#_2-2-redistemplate-使用" aria-hidden="true">#</a> 2.2 RedisTemplate 使用</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Test
void testRedis(){
    ValueOperations&lt;String, String&gt; operations = redisTemplate.opsForValue();
    operations.set(&quot;hello&quot;,&quot;world&quot;);
    String hello = operations.get(&quot;hello&quot;);
    System.out.println(hello);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-3-切换至-jedis" tabindex="-1"><a class="header-anchor" href="#_2-3-切换至-jedis" aria-hidden="true">#</a> 2.3 切换至 Jedis</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 导入 Jedis--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">redis</span><span class="token punctuation">:</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span> 172.20.134.231
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
  <span class="token key atrule">client-type</span><span class="token punctuation">:</span> jedis
  <span class="token key atrule">jedis</span><span class="token punctuation">:</span>
    <span class="token key atrule">pool</span><span class="token punctuation">:</span>
      <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="八、单元测试" tabindex="-1"><a class="header-anchor" href="#八、单元测试" aria-hidden="true">#</a> 八、单元测试</h1><h2 id="_1、junit5-的变化" tabindex="-1"><a class="header-anchor" href="#_1、junit5-的变化" aria-hidden="true">#</a> 1、JUnit5 的变化</h2><p>SpringBoot 2.2.0 版本开始引入 <strong>JUnit5</strong> 作为单元测试默认库。</p><p>作为最新版本的 <strong>JUnit</strong> 框架，<strong>JUnit5</strong> 与之前版本的 <strong>Junit</strong> 框架有很大的不同。由三个不同子项目的几个不同模块组成。</p><p><strong>JUnit5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</strong></p><ul><li><p><strong>JUnit Platform</strong>：在 <strong>JVM</strong> 上启动测试框架的基础，不仅支持 <strong>Junit</strong> 自制的测试引擎，其他测试引擎也都可以接入。</p></li><li><p><strong>JUnit Jupiter</strong>：提供了 <strong>JUnit5</strong> 的新的编程模型，是 <strong>JUnit5</strong> 新特性的核心。内部包含了一个<strong>测试引擎</strong>，用于在 <strong>Junit Platform</strong> 上运行。</p></li><li><p><strong>JUnit Vintage</strong>：由于 <strong>JUint</strong> 已经发展多年，为了照顾老的项目，<strong>JUnit Vintage</strong> 提供了兼容 <strong>JUnit4.x</strong>、<strong>Junit3.x</strong> 的测试引擎。</p></li></ul><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606796395719-eb57ab48-ae44-45e5-8d2e-c4d507aff49a.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_19%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="JUnit5"></p><p>JUnit5：</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606797616337-e73010e9-9cac-496d-a177-64b677af5a3d.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_18%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="JUnit5 的 jar 包"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Boot05WebAdminApplicationTests</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Test</span> <span class="token comment">// 注意这里可以没有 public</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>JUnit4：</p><p>SpringBoot 2.4 以上版本移除了默认对 <strong>Vintage</strong> 的依赖，如果需要兼容 <strong>JUnit4</strong> 需要自行引入。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hamcrest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hamcrest-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@RunWith(SpringRunner.class)
@SpringBootTest // 如果启动报错，则需要指定启动类的 class
class Boot05WebAdminApplicationTests {
    @Test
    public void contextLoads() {

    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot 整合 <strong>JUnit</strong> 以后。</p><ul><li>编写测试方法：<code>@Test</code> 标注（注意需要使用 <strong>JUnit5</strong> 版本的注解）；</li><li><strong>JUnit</strong> 类具有 Spring 的功能，<code>@Autowired</code>、比如 <code>@Transactional</code> 标注测试方法，测试完成后自动回滚。</li></ul><h2 id="_2、junit5-常用注解" tabindex="-1"><a class="header-anchor" href="#_2、junit5-常用注解" aria-hidden="true">#</a> 2、JUnit5 常用注解</h2><p>JUnit5的注解与JUnit4的注解有所变化：</p><p>https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations</p><ul><li><p><code>@Test</code>：表示方法是测试方法。但是与 <strong>JUnit4</strong> 的 <code>@Test</code> 不同，他的职责非常单一不能声明任何属性，拓展的测试将会由 <strong>Jupiter</strong> 提供额外测试；</p></li><li><p><code>@ParameterizedTest</code>：表示方法是参数化测试，下方会有详细介绍；</p></li><li><p><code>@RepeatedTest</code>：表示方法可重复执行，下方会有详细介绍；</p></li><li><p><code>@DisplayName</code>：为测试类或者测试方法设置展示名称；</p></li><li><p><code>@BeforeEach</code>：表示在每个单元测试之前执行；</p></li><li><p><code>@AfterEach</code>：表示在每个单元测试之后执行；</p></li><li><p><code>@BeforeAll</code>：表示在所有单元测试之前执行；</p></li><li><p><code>@AfterAll</code>：表示在所有单元测试之后执行；</p></li><li><p><code>@Tag</code>：表示单元测试类别，类似于 <strong>JUnit4</strong> 中的 <code>@Categories</code>；</p></li><li><p><code>@Disabled</code>：表示测试类或测试方法不执行，类似于 <strong>JUnit4</strong> 中的 <code>@Ignore</code>；</p></li><li><p><code>@Timeout</code>：表示测试方法运行如果超过了指定时间将会返回错误；</p></li><li><p><code>@ExtendWith</code>：为测试类或测试方法提供扩展类引用。</p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span> <span class="token comment">// 注意这里使用的是 jupiter 的 Test 注解</span>

<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Test</span>
  <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;第一次测试&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">firstTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3、断言-assertions" tabindex="-1"><a class="header-anchor" href="#_3、断言-assertions" aria-hidden="true">#</a> 3、断言（Assertions）</h2><p><strong>断言</strong>（Assertions）是测试方法中的核心部分，用来对测试需要满足的条件进行验证。这些断言方法都是 org.junit.jupiter.api.<code>Assertions</code> 的静态方法。<strong>JUnit5</strong> 内置的断言可以分成如下几个类别：</p><h3 id="_3-1-简单断言" tabindex="-1"><a class="header-anchor" href="#_3-1-简单断言" aria-hidden="true">#</a> 3.1 简单断言</h3><p>用来对单个值进行简单的验证，如：</p><table><thead><tr><th>方法</th><th>说明</th></tr></thead><tbody><tr><td><code>assertEquals</code></td><td>判断两个对象或两个原始类型是否相等</td></tr><tr><td><code>assertNotEquals</code></td><td>判断两个对象或两个原始类型是否不相等</td></tr><tr><td><code>assertSame</code></td><td>判断两个对象引用是否指向同一个对象</td></tr><tr><td><code>assertNotSame</code></td><td>判断两个对象引用是否指向不同的对象</td></tr><tr><td><code>assertTrue</code></td><td>判断给定的布尔值是否为 <code>true</code></td></tr><tr><td><code>assertFalse</code></td><td>判断给定的布尔值是否为 <code>false</code></td></tr><tr><td><code>assertNull</code></td><td>判断给定的对象引用是否为 <code>null</code></td></tr><tr><td><code>assertNotNull</code></td><td>判断给定的对象引用是否不为 <code>null</code></td></tr></tbody></table><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>@Test
@<span class="token function">DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;simple assertion&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">simple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;simple math&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertNotEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token function">assertNotSame</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     Object obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertSame</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token function">assertFalse</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token function">assertNull</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertNotNull</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-数组断言" tabindex="-1"><a class="header-anchor" href="#_3-2-数组断言" aria-hidden="true">#</a> 3.2 数组断言</h3><p>通过 <code>assertArrayEquals</code> 方法来判断两个对象或原始类型的数组内容是否相等：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Test
@DisplayName(&quot;array assertion&quot;)
public void array() {
 assertArrayEquals(new int[]{1, 2}, new int[] {1, 2});
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-组合断言" tabindex="-1"><a class="header-anchor" href="#_3-3-组合断言" aria-hidden="true">#</a> 3.3 组合断言</h3><p><code>assertAll</code> 方法接受多个 org.junit.jupiter.api.<code>Executable</code> 函数式接口的实例作为要验证的断言，可以通过 <code>lambda</code> 表达式很容易的提供这些断言：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Test
@DisplayName(&quot;assert all&quot;)
public void all() {
 assertAll(&quot;Math&quot;,
    () -&gt; assertEquals(2, 1 + 1),
    () -&gt; assertTrue(1 &gt; 0)
 );
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4-异常断言" tabindex="-1"><a class="header-anchor" href="#_3-4-异常断言" aria-hidden="true">#</a> 3.4 异常断言</h3><p>在 <strong>JUnit4</strong> 时期，想要测试方法的异常情况时，需要用 <code>@Rule</code> 注解的 <code>ExpectedException</code> 变量还是比较麻烦的。而 <strong>JUnit5</strong> 提供了一种新的断言方式 <code>Assertions.assertThrows()</code>，配合函数式编程就可以进行使用：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Test
@DisplayName(&quot;异常测试&quot;)
public void exceptionTest() { // 扔出断言异常
    ArithmeticException exception = Assertions.assertThrows(
        ArithmeticException.class, () -&gt; System.out.println(1 % 0));
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-5-超时断言" tabindex="-1"><a class="header-anchor" href="#_3-5-超时断言" aria-hidden="true">#</a> 3.5 超时断言</h3><p><strong>Junit5</strong> 还提供了 <code>Assertions.assertTimeout()</code> 为测试方法设置了超时时间：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Test
@DisplayName(&quot;超时测试&quot;)
public void timeoutTest() {
    // 如果测试方法时间超过 1s 将会异常
    Assertions.assertTimeout(Duration.ofMillis(1000), () -&gt; Thread.sleep(500));
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-6-快速失败" tabindex="-1"><a class="header-anchor" href="#_3-6-快速失败" aria-hidden="true">#</a> 3.6 快速失败</h3><p>通过 <code>fail</code> 方法直接使得测试失败：</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Test
@DisplayName(&quot;fail&quot;)
public void shouldFail() {
     fail(&quot;This should fail&quot;);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4、前置条件-assumptions" tabindex="-1"><a class="header-anchor" href="#_4、前置条件-assumptions" aria-hidden="true">#</a> 4、前置条件（Assumptions）</h2><p>JUnit 5 中的前置条件（<strong>Assumptions【假设】</strong>）类似于断言，不同之处在于<strong>不满足的断言会使得测试方法失败</strong>，而不满足的<strong>前置条件只会使得测试方法的执行终止</strong>。前置条件可以看成是测试方法执行的前提，当该前提不满足时，就没有继续执行的必要。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@DisplayName(&quot;前置条件&quot;)
public class AssumptionsTest {
 private final String environment = &quot;DEV&quot;;
 
 @Test
 @DisplayName(&quot;simple&quot;)
 public void simpleAssume() {
    assumeTrue(Objects.equals(this.environment, &quot;DEV&quot;));
    assumeFalse(() -&gt; Objects.equals(this.environment, &quot;PROD&quot;));
 }
 
 @Test
 @DisplayName(&quot;assume then do&quot;)
 public void assumeThenDo() {
    assumingThat(
       Objects.equals(this.environment, &quot;DEV&quot;),
       () -&gt; System.out.println(&quot;In DEV&quot;)
    );
 }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>assumeTrue</code> 和 <code>assumFalse</code> 确保给定的条件为 <code>true</code> 或 <code>false</code>，不满足条件会使得测试执行终止。<code>assumingThat</code> 的参数是表示条件的布尔值和对应的 <code>Executable</code> 接口的实现对象。只有条件满足时，<code>Executable</code> 对象才会被执行；当条件不满足时，测试执行并不会终止。</p><h2 id="_5、嵌套测试" tabindex="-1"><a class="header-anchor" href="#_5、嵌套测试" aria-hidden="true">#</a> 5、嵌套测试</h2><p><strong>JUnit5</strong> 可以通过 Java 中的内部类和 <code>@Nested</code> 注解实现嵌套测试，从而可以更好的把相关的测试方法组织在一起。在内部类中可以使用 <code>@BeforeEach</code> 和 <code>@AfterEach</code> 注解，而且嵌套的层次没有限制。</p><p>内层的 test 可以驱动外层的 Before(After)Each/All 之类的方法提前/延后运行，外层的不能驱动内层的。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@DisplayName(&quot;A stack&quot;)
class TestingAStackDemo {
    Stack&lt;Object&gt; stack;

    @Test
    @DisplayName(&quot;is instantiated with new Stack()&quot;)
    void isInstantiatedWithNew() {
        new Stack&lt;&gt;();
    }

    @Nested
    @DisplayName(&quot;when new&quot;)
    class WhenNew {
        @BeforeEach
        void createNewStack() {
            stack = new Stack&lt;&gt;();
        }

        @Test
        @DisplayName(&quot;is empty&quot;)
        void isEmpty() {
            assertTrue(stack.isEmpty());
        }

        @Test
        @DisplayName(&quot;throws EmptyStackException when popped&quot;)
        void throwsExceptionWhenPopped() {
            assertThrows(EmptyStackException.class, stack::pop);
        }

        @Test
        @DisplayName(&quot;throws EmptyStackException when peeked&quot;)
        void throwsExceptionWhenPeeked() {
            assertThrows(EmptyStackException.class, stack::peek);
        }

        @Nested
        @DisplayName(&quot;after pushing an element&quot;)
        class AfterPushing {
            String anElement = &quot;an element&quot;;

            @BeforeEach
            void pushAnElement() {
                stack.push(anElement);
            }

            @Test
            @DisplayName(&quot;it is no longer empty&quot;)
            void isNotEmpty() {
                assertFalse(stack.isEmpty());
            }

            @Test
            @DisplayName(&quot;returns the element when popped and is empty&quot;)
            void returnElementWhenPopped() {
                assertEquals(anElement, stack.pop());
                assertTrue(stack.isEmpty());
            }

            @Test
            @DisplayName(&quot;returns the element when peeked but remains not empty&quot;)
            void returnElementWhenPeeked() {
                assertEquals(anElement, stack.peek());
                assertFalse(stack.isEmpty());
            }
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6、参数化测试" tabindex="-1"><a class="header-anchor" href="#_6、参数化测试" aria-hidden="true">#</a> 6、参数化测试</h2><p>参数化测试是 <strong>JUnit5</strong> 很重要的一个新特性，它使得用不同的参数多次运行测试成为了可能，也为我们的单元测试带来许多便利。</p><p>利用 <code>@ValueSource</code> 等注解，指定入参，我们将可以使用不同的参数进行多次单元测试，而不需要每新增一个参数就新增一个单元测试，省去了很多冗余代码。</p><ul><li><p><code>@ValueSource</code>：为参数化测试指定入参来源，支持八大基础类以及 <code>String</code> 类型，<code>Class</code>类型；</p></li><li><p><code>@NullSource</code>：表示为参数化测试提供一个 <code>null</code> 的入参；</p></li><li><p><code>@EnumSource</code>：表示为参数化测试提供一个枚举入参；</p></li><li><p><code>@CsvFileSource</code>：表示读取指定 <strong>CSV</strong> 文件内容作为参数化测试入参；</p></li><li><p><code>@MethodSource</code>：表示读取指定静态方法的返回值作为参数化测试入参，注意方法返回需要是一个 <code>Stream</code>。</p></li></ul><p>当然如果参数化测试仅仅只能做到指定普通的入参，还达不到让我觉得惊艳的地步。让我真正感到他的强大之处的地方在于他可以支持外部的各类入参。如 <strong>CSV</strong>、<strong>YAML</strong>、<strong>JSON</strong> 文件甚至方法的返回值也可以作为入参。只需要去实现 <code>ArgumentsProvider</code> 接口，任何外部文件都可以作为它的入参。</p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@ParameterizedTest
@ValueSource(strings = {&quot;one&quot;, &quot;two&quot;, &quot;three&quot;})
@DisplayName(&quot;参数化测试1&quot;)
public void parameterizedTest1(String string) {
    System.out.println(string);
    Assertions.assertTrue(StringUtils.isNotBlank(string));
}

@ParameterizedTest
@MethodSource(&quot;method&quot;) // 指定方法名
@DisplayName(&quot;方法来源参数&quot;)
public void testWithExplicitLocalMethodSource(String name) {
    System.out.println(name);
    Assertions.assertNotNull(name);
}

static Stream&lt;String&gt; method() {
    return Stream.of(&quot;apple&quot;, &quot;banana&quot;);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7、迁移指南" tabindex="-1"><a class="header-anchor" href="#_7、迁移指南" aria-hidden="true">#</a> 7、迁移指南</h2><p>在进行迁移的时候需要注意如下的变化：</p><ul><li><p>注解在 <strong>org.junit.jupiter.api</strong> 包中，断言在 org.junit.jupiter.api.<code>Assertions</code> 类中，前置条件在 org.junit.jupiter.api.``Assumptions` 类中；</p></li><li><p>把 <code>@Before</code> 和 <code>@After</code> 替换成 <code>@BeforeEach</code> 和 <code>@AfterEach</code>；</p></li><li><p>把 <code>@BeforeClass</code> 和 <code>@AfterClass</code> 替换成 <code>@BeforeAll</code> 和 <code>@AfterAll</code>；</p></li><li><p>把 <code>@Ignore</code> 替换成 <code>@Disabled</code>；</p></li><li><p>把 <code>@Category</code> 替换成 <code>@Tag</code>；</p></li><li><p>把 <code>@RunWith</code>、<code>@Rule</code> 和 <code>@ClassRule</code> 替换成 <code>@ExtendWith</code>。</p></li></ul><h1 id="九、指标监控" tabindex="-1"><a class="header-anchor" href="#九、指标监控" aria-hidden="true">#</a> 九、指标监控</h1><h2 id="_1、springboot-actuator" tabindex="-1"><a class="header-anchor" href="#_1、springboot-actuator" aria-hidden="true">#</a> 1、SpringBoot Actuator</h2><h3 id="_1-1-简介" tabindex="-1"><a class="header-anchor" href="#_1-1-简介" aria-hidden="true">#</a> 1.1 简介</h3><p>未来每一个微服务在云上部署以后，我们都需要对其进行<strong>监控</strong>、<strong>追踪</strong>、<strong>审计</strong>、<strong>控制</strong>等。SpringBoot 就抽取了 <strong>Actuator</strong> 场景，使得我们每个微服务快速引用即可获得生产级别的应用监控、审计等功能。</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://qiniu.dyl.fit/Actuator 的 jar 包.png" alt="Actuator 的 jar 包"></p><h3 id="_1-2-1-x-与-2-x-的不同" tabindex="-1"><a class="header-anchor" href="#_1-2-1-x-与-2-x-的不同" aria-hidden="true">#</a> 1.2 1.x 与 2.x 的不同</h3><p><img src="https://qiniu.dyl.fit/1.x 与 2.x 的不同.png" alt="1.x 与 2.x 的不同"></p><h3 id="_1-3-如何使用" tabindex="-1"><a class="header-anchor" href="#_1-3-如何使用" aria-hidden="true">#</a> 1.3 如何使用</h3><ul><li><p>引入场景 <strong>starter</strong>；</p></li><li><p>访问 http://localhost:8080/actuator/**；</p></li><li><p>暴露所有监控信息为 <strong>HTTP</strong>；</p></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled-by-default</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># 暴露所有端点信息</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span> <span class="token comment"># 以 Web 方式暴露</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>测试。</li></ul><p>http://localhost:8080/actuator/beans</p><p>http://localhost:8080/actuator/configprops</p><p>http://localhost:8080/actuator/metrics</p><p>http://localhost:8080/actuator/metrics/jvm.gc.pause</p><p><a href="http://localhost:8080/actuator/metrics" target="_blank" rel="noopener noreferrer">http://localhost:8080/actuator/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>endpointName/detailPath</p><h3 id="_1-4-可视化" tabindex="-1"><a class="header-anchor" href="#_1-4-可视化" aria-hidden="true">#</a> 1.4 可视化</h3><p>https://github.com/codecentric/spring-boot-admin</p><h2 id="_2、actuator-endpoint" tabindex="-1"><a class="header-anchor" href="#_2、actuator-endpoint" aria-hidden="true">#</a> 2、Actuator Endpoint</h2><h3 id="_2-1-最常使用的-endpoint" tabindex="-1"><a class="header-anchor" href="#_2-1-最常使用的-endpoint" aria-hidden="true">#</a> 2.1 最常使用的 Endpoint</h3><table><thead><tr><th>ID</th><th>描述</th></tr></thead><tbody><tr><td><code>auditevents</code></td><td>暴露当前应用程序的审核事件信息。需要一个 <code>AuditEventRepository</code> 组件。</td></tr><tr><td><code>beans</code></td><td>显示应用程序中所有 <code>Bean</code> 的完整列表。</td></tr><tr><td><code>caches</code></td><td>暴露可用的<strong>缓</strong>存。</td></tr><tr><td><code>conditions</code></td><td>显示<strong>自动配置</strong>的所有条件信息，包括匹配或不匹配的原因。</td></tr><tr><td><code>configprops</code></td><td>显示所有 <code>@ConfigurationProperties</code>。</td></tr><tr><td><code>env</code></td><td>暴露 Spring 的属性 <code>ConfigurableEnvironment</code>。</td></tr><tr><td><code>flyway</code></td><td>显示已应用的所有 <strong>Flyway</strong> 数据库迁移， 需要一个或多个 <code>Flyway</code> 组件。</td></tr><tr><td><code>health</code></td><td>显示应用程序<strong>运行状况</strong>信息。</td></tr><tr><td><code>httptrace</code></td><td>显示 <strong>HTTP</strong> 跟踪信息（默认情况下，最近 100 个 <strong>HTTP</strong> 请求-响应）。需要一个 <code>HttpTraceRepository</code> 组件。</td></tr><tr><td><code>info</code></td><td>显示应用程序信息。</td></tr><tr><td><code>integrationgraph</code></td><td>显示Spring <code>integrationgraph</code> 。需要依赖 <code>spring-integration-core</code>。</td></tr><tr><td><code>loggers</code></td><td>显示和修改应用程序中<strong>日志</strong>的配置。</td></tr><tr><td><code>liquibase</code></td><td>显示已应用的所有 <strong>Liquibase</strong> 数据库迁移。需要一个或多个<code>Liquibase</code>组件。</td></tr><tr><td><code>metrics</code></td><td>显示当前应用程序的<strong>指标</strong>信息。</td></tr><tr><td><code>mappings</code></td><td>显示所有 <code>@RequestMapping</code> 路径列表。</td></tr><tr><td><code>scheduledtasks</code></td><td>显示应用程序中的<strong>计划任务</strong>。</td></tr><tr><td><code>sessions</code></td><td>允许从 Spring Session 支持的会话存储中检索和删除用户会话。需要使用 Spring Session 的基于 <code>Servlet</code> 的 Web 应用程序。</td></tr><tr><td><code>shutdown</code></td><td>使应用程序正常关闭，默认禁用。</td></tr><tr><td><code>startup</code></td><td>显示由 <code>ApplicationStartup</code> 收集的启动步骤数据。需要使用 <code>SpringApplication</code> 进行配置 <code>BufferingApplicationStartup</code>。</td></tr><tr><td><code>threaddump</code></td><td>执行<strong>线程转储</strong>。</td></tr></tbody></table><p>如果您的应用程序是 <strong>Web</strong> 应用程序（Spring MVC，Spring WebFlux 或 Jersey），则可以使用以下附加端点：</p><table><thead><tr><th>ID</th><th>描述</th></tr></thead><tbody><tr><td><code>heapdump</code></td><td>返回 <code>hprof</code> 堆转储文件。</td></tr><tr><td><code>jolokia</code></td><td>通过 <strong>HTTP</strong> 暴露 JMX Bean（需要引入 Jolokia，不适用于 WebFlux）。需要引入依赖 <code>jolokia-core</code>。</td></tr><tr><td><code>logfile</code></td><td>返回日志文件的内容（如果已设置 <code>logging.file.name</code> 或 <code>logging.file.path</code> 属性）。支持使用 <strong>HTTP</strong> <code>Range</code> 标头来检索部分日志文件的内容。</td></tr><tr><td><code>prometheus</code></td><td>以 Prometheus 服务器可以抓取的格式公开指标。需要依赖 <code>micrometer-registry-prometheus</code>。</td></tr></tbody></table><p>最常用的 <strong>Endpoint</strong>：</p><ul><li><p><code>Health</code>：监控状况</p></li><li><p><code>Metrics</code>：运行时指标</p></li><li><p><code>Loggers</code>：日志记录</p></li></ul><h3 id="_2-2-health-endpoint" tabindex="-1"><a class="header-anchor" href="#_2-2-health-endpoint" aria-hidden="true">#</a> 2.2 Health Endpoint</h3><p>健康检查端点，我们一般用于在云平台，平台会定时的检查应用的健康状况，我们就需要 <strong>Health Endpoint</strong> 可以为平台返回当前应用的一系列组件健康状况的集合。</p><p>重要的几点：</p><ul><li><p><strong>Health Endpoint</strong> 返回的结果，应该是一系列健康检查后的一个汇总报告；</p></li><li><p>很多的健康检查默认已经自动配置好了，比如数据库、<strong>Redis</strong> 等；</p></li><li><p>可以很容易的添加自定义的健康检查机制。</p></li></ul><p><img src="https://qiniu.dyl.fit/健康端点.png" alt="健康端点"></p><h3 id="_2-3-metrics-endpoint" tabindex="-1"><a class="header-anchor" href="#_2-3-metrics-endpoint" aria-hidden="true">#</a> 2.3 Metrics Endpoint</h3><p>提供详细的、层级的、空间指标信息，这些信息可以被 <code>pull</code>（主动推送）或者 <code>push</code>（被动获取）方式得到；</p><ul><li><p>通过 <strong>Metrics</strong> 对接多种监控系统；</p></li><li><p>简化核心 <strong>Metrics</strong> 开发；</p></li><li><p>添加自定义 <strong>Metrics</strong> 或者扩展已有 <strong>Metrics</strong>。</p></li></ul><p><img src="https://qiniu.dyl.fit/指标端点.png" alt="指标端点"></p><h3 id="_2-4-管理-endpoints" tabindex="-1"><a class="header-anchor" href="#_2-4-管理-endpoints" aria-hidden="true">#</a> 2.4 管理 Endpoints</h3><h4 id="_2-4-1-开启与禁用-endpoints" tabindex="-1"><a class="header-anchor" href="#_2-4-1-开启与禁用-endpoints" aria-hidden="true">#</a> 2.4.1 开启与禁用 Endpoints</h4><ul><li>默认所有的 <strong>Endpoint</strong> 除了 <code>shutdown</code> 都是开启的；</li><li>需要开启或者禁用某个 <strong>Endpoint</strong>。配置模式为 <code>management.endpoint.&lt;endpointName&gt;.enabled = true</code>；</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">beans</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>或者禁用所有的 <strong>Endpoint</strong> 然后手动开启指定的 <strong>Endpoint</strong>。</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled-by-default</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">beans</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4-2-暴露-endpoints" tabindex="-1"><a class="header-anchor" href="#_2-4-2-暴露-endpoints" aria-hidden="true">#</a> 2.4.2 暴露 Endpoints</h4><p>支持的暴露方式</p><ul><li><p><strong>HTTP</strong>：默认只暴露 <strong>Health</strong> 和<strong>Info Endpoint</strong>；</p></li><li><p><strong>JMX</strong>：默认暴露所有 <strong>Endpoint</strong>，<strong>JConsole</strong> 就是通过 <strong>JMX</strong> 实现的；</p></li><li><p>除了 <strong>Health</strong> 和 <strong>Info</strong>，剩下的 <strong>Endpoint</strong> 都应该进行保护访问。如果引入 <code>SpringSecurity</code>，则会默认配置安全访问规则。</p></li></ul><table><thead><tr><th>ID</th><th>JMX</th><th>Web</th></tr></thead><tbody><tr><td><code>auditevents</code></td><td>Yes</td><td>No</td></tr><tr><td><code>beans</code></td><td>Yes</td><td>No</td></tr><tr><td><code>caches</code></td><td>Yes</td><td>No</td></tr><tr><td><code>conditions</code></td><td>Yes</td><td>No</td></tr><tr><td><code>configprops</code></td><td>Yes</td><td>No</td></tr><tr><td><code>env</code></td><td>Yes</td><td>No</td></tr><tr><td><code>flyway</code></td><td>Yes</td><td>No</td></tr><tr><td><code>health</code></td><td>Yes</td><td>Yes</td></tr><tr><td><code>heapdump</code></td><td>N/A</td><td>No</td></tr><tr><td><code>httptrace</code></td><td>Yes</td><td>No</td></tr><tr><td><code>info</code></td><td>Yes</td><td>Yes</td></tr><tr><td><code>integrationgraph</code></td><td>Yes</td><td>No</td></tr><tr><td><code>jolokia</code></td><td>N/A</td><td>No</td></tr><tr><td><code>logfile</code></td><td>N/A</td><td>No</td></tr><tr><td><code>loggers</code></td><td>Yes</td><td>No</td></tr><tr><td><code>liquibase</code></td><td>Yes</td><td>No</td></tr><tr><td><code>metrics</code></td><td>Yes</td><td>No</td></tr><tr><td><code>mappings</code></td><td>Yes</td><td>No</td></tr><tr><td><code>prometheus</code></td><td>N/A</td><td>No</td></tr><tr><td><code>scheduledtasks</code></td><td>Yes</td><td>No</td></tr><tr><td><code>sessions</code></td><td>Yes</td><td>No</td></tr><tr><td><code>shutdown</code></td><td>Yes</td><td>No</td></tr><tr><td><code>startup</code></td><td>Yes</td><td>No</td></tr><tr><td><code>threaddump</code></td><td>Yes</td><td>No</td></tr></tbody></table><h2 id="_3、定制-endpoint" tabindex="-1"><a class="header-anchor" href="#_3、定制-endpoint" aria-hidden="true">#</a> 3、定制 Endpoint</h2><h3 id="_3-1-定制-health-信息" tabindex="-1"><a class="header-anchor" href="#_3-1-定制-health-信息" aria-hidden="true">#</a> 3.1 定制 Health 信息</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Component
public class MyHealthIndicator implements HealthIndicator {
    @Override
    public Health health() {
        int errorCode = check(); // perform some specific health check
        if (errorCode != 0) {
            return Health.down().withDetail(&quot;Error Code&quot;, errorCode).build();
        }
        return Health.up().build();
    }

}

// 构建 Health
Health build = Health.down()
                .withDetail(&quot;msg&quot;, &quot;error service&quot;)
                .withDetail(&quot;code&quot;, &quot;500&quot;)
                .withException(new RuntimeException())
                .build();
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always <span class="token comment"># 总是显示详细信息，可显示每个模块的状态信息</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Component
public class MyComHealthIndicator extends AbstractHealthIndicator {
    // 真实的检查方法
    @Override
    protected void doHealthCheck(Health.Builder builder) throws Exception {
        // MongoDB，获取连接进行测试
        Map&lt;String,Object&gt; map = new HashMap&lt;&gt;();
        // 检查完成
        if(1 == 2){
//            builder.up(); // 健康
            builder.status(Status.UP);
            map.put(&quot;count&quot;,1);
            map.put(&quot;ms&quot;,100);
        }else {
//            builder.down();
            builder.status(Status.OUT_OF_SERVICE);
            map.put(&quot;err&quot;,&quot;连接超时&quot;);
            map.put(&quot;ms&quot;,3000);
        }

        builder.withDetail(&quot;code&quot;,100).withDetails(map);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-2-定制info信息" tabindex="-1"><a class="header-anchor" href="#_3-2-定制info信息" aria-hidden="true">#</a> 3.2 定制info信息</h3><p>常用两种方式：</p><h4 id="_3-2-1-编写配置文件" tabindex="-1"><a class="header-anchor" href="#_3-2-1-编写配置文件" aria-hidden="true">#</a> 3.2.1 编写配置文件</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">appName</span><span class="token punctuation">:</span> boot<span class="token punctuation">-</span>admin
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 2.0.1
  <span class="token key atrule">mavenProjectName</span><span class="token punctuation">:</span> @project.artifactId@  <span class="token comment">#使用@@可以获取maven的pom文件值</span>
  <span class="token key atrule">mavenProjectVersion</span><span class="token punctuation">:</span> @project.version@
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-2-2-编写-infocontributor" tabindex="-1"><a class="header-anchor" href="#_3-2-2-编写-infocontributor" aria-hidden="true">#</a> 3.2.2 编写 InfoContributor</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Component
public class ExampleInfoContributor implements InfoContributor {
    @Override
    public void contribute(Info.Builder builder) {
        builder.withDetail(&quot;example&quot;,
                Collections.singletonMap(&quot;key&quot;, &quot;value&quot;));
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>http://localhost:8080/actuator/info：会输出以上方式返回的所有 <strong>Info</strong> 信息。</p><h3 id="_3-3-定制-metrics-信息" tabindex="-1"><a class="header-anchor" href="#_3-3-定制-metrics-信息" aria-hidden="true">#</a> 3.3 定制 Metrics 信息</h3><h4 id="_3-3-1-springboot-支持自动适配的-metrics" tabindex="-1"><a class="header-anchor" href="#_3-3-1-springboot-支持自动适配的-metrics" aria-hidden="true">#</a> 3.3.1 SpringBoot 支持自动适配的 Metrics</h4><ul><li><p>JVM metrics, report utilization of:</p></li><li><p>Various memory and buffer pools</p></li><li><p>Statistics related to garbage collection</p></li><li><p>Threads utilization</p></li><li><p>Number of classes loaded/unloaded</p></li><li><p>CPU metrics</p></li><li><p>File descriptor metrics</p></li><li><p>Kafka consumer and producer metrics</p></li><li><p>Log4j2 metrics: record the number of events logged to Log4j2 at each level</p></li><li><p>Logback metrics: record the number of events logged to Logback at each level</p></li><li><p>Uptime metrics: report a gauge for uptime and a fixed gauge representing the application’s absolute start time</p></li><li><p>Tomcat metrics (<code>server.tomcat.mbeanregistry.enabled</code> must be set to <code>true</code> for all Tomcat metrics to be registered)</p></li><li><p><a href="https://docs.spring.io/spring-integration/docs/5.4.1/reference/html/system-management.html#micrometer-integration" target="_blank" rel="noopener noreferrer">Spring Integration<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> metrics</p></li></ul><h4 id="_3-2-2-增加定制-metrics" tabindex="-1"><a class="header-anchor" href="#_3-2-2-增加定制-metrics" aria-hidden="true">#</a> 3.2.2 增加定制 Metrics</h4><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>class MyService{
    Counter counter;
    public MyService(MeterRegistry meterRegistry){
         counter = meterRegistry.counter(&quot;myservice.method.running.counter&quot;);
    }

    public void hello() {
        counter.increment();
    }
}

// 也可以使用下面的方式
@Bean
MeterBinder queueSize(Queue queue) {
    return (registry) -&gt; Gauge.builder(&quot;queueSize&quot;, queue::size).register(registry);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-4定制-endpoint" tabindex="-1"><a class="header-anchor" href="#_3-4定制-endpoint" aria-hidden="true">#</a> 3.4定制 Endpoint</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Component
@Endpoint(id = &quot;container&quot;)
public class DockerEndpoint {
    @ReadOperation
    public Map getDockerInfo(){
        return Collections.singletonMap(&quot;info&quot;,&quot;docker started...&quot;);
    }

    @WriteOperation
    private void restartDocker(){
        System.out.println(&quot;docker restarted....&quot;);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>场景：开发 <strong>ReadinessEndpoint</strong> 来管理程序是否就绪，或者 **Liveness Endpoint **来管理程序是否存活。</p><p>当然，这个也可以直接使用 https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-kubernetes-probes</p><h1 id="十、原理解析" tabindex="-1"><a class="header-anchor" href="#十、原理解析" aria-hidden="true">#</a> 十、原理解析</h1><h2 id="_10-1-profile-功能" tabindex="-1"><a class="header-anchor" href="#_10-1-profile-功能" aria-hidden="true">#</a> 10.1 Profile 功能</h2><p>为了方便多环境适配，SpringBoot 简化了 <strong>Profile</strong> 功能。</p><h3 id="_10-1-1-application-profile-功能" tabindex="-1"><a class="header-anchor" href="#_10-1-1-application-profile-功能" aria-hidden="true">#</a> 10.1.1 application-profile 功能</h3><ul><li><p>默认配置文件 <strong>application.yaml</strong> 任何时候都会加载；</p></li><li><p>环境配置文件 <strong>application-{env}.yaml</strong>；</p></li><li><p>激活指定环境；</p><ul><li>配置文件激活；</li><li>命令行激活：``java -jar xxx.jar --spring.profiles.active=prod --person.name=haha`。 <ul><li>优先级：命令行 &gt; 环境配置文件 &gt; 默认配置文件</li></ul></li></ul></li><li><p>默认配置与环境配置同时生效；</p></li><li><p>同名配置项，<strong>Profile</strong> 配置优先；</p></li></ul><h3 id="_10-1-2-profile-条件装配功能" tabindex="-1"><a class="header-anchor" href="#_10-1-2-profile-条件装配功能" aria-hidden="true">#</a> 10.1.2 <code>@Profile</code> 条件装配功能</h3><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@Configuration(proxyBeanMethods = false)
@Profile(&quot;production&quot;)
public class ProductionConfiguration {
    // ...
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-1-3-profile-分组" tabindex="-1"><a class="header-anchor" href="#_10-1-3-profile-分组" aria-hidden="true">#</a> 10.1.3 Profile 分组</h3><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code><span class="token key attr-name">spring.profiles.group.production[0]</span><span class="token punctuation">=</span><span class="token value attr-value">proddb</span>
<span class="token key attr-name">spring.profiles.group.production[1]</span><span class="token punctuation">=</span><span class="token value attr-value">prodmq</span>

<span class="token comment"># 使用：--spring.profiles.active=production 激活</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_10-2-外部化配置" tabindex="-1"><a class="header-anchor" href="#_10-2-外部化配置" aria-hidden="true">#</a> 10.2 外部化配置</h2><p>https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config</p><p>Spring Boot uses a very particular <code>PropertySource</code> order that is designed to allow sensible overriding of values. Properties are considered in the following order (with values from lower items overriding earlier ones):</p><ol><li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li><li><code>@PropertySource</code> annotations on your <code>@Configuration</code> classes. Please note that such property sources are not added to the <code>Environment</code> until the application context is being refreshed. This is too late to configure certain properties such as <code>logging.*</code> and <code>spring.main.*</code> which are read before refresh begins.</li><li><strong>Config data (such as</strong> <code>application.properties</code> <strong>files)</strong></li><li>A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</li><li>OS environment variables.</li><li>Java System properties (<code>System.getProperties()</code>).</li><li>JNDI attributes from <code>java:comp/env</code>.</li><li><code>ServletContext</code> init parameters.</li><li><code>ServletConfig</code> init parameters.</li><li>Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</li><li>Command line arguments.</li><li><code>properties</code> attribute on your tests. Available on <code>@SpringBootTest</code> and the <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests" target="_blank" rel="noopener noreferrer">test annotations for testing a particular slice of your application<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</li><li><code>@TestPropertySource</code> annotations on your tests.</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-devtools-globalsettings" target="_blank" rel="noopener noreferrer">Devtools global settings properties<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> in the <code>$HOME/.config/spring-boot</code> directory when devtools is active.</li></ol><p>Config data files are considered in the following order:</p><ol><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files" target="_blank" rel="noopener noreferrer">Application properties<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> packaged inside your jar (<code>application.properties</code> and YAML variants).</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific" target="_blank" rel="noopener noreferrer">Profile-specific application properties<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> packaged inside your jar (<code>application-{profile}.properties</code> and YAML variants).</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files" target="_blank" rel="noopener noreferrer">Application properties<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> outside of your packaged jar (<code>application.properties</code> and YAML variants).</li><li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific" target="_blank" rel="noopener noreferrer">Profile-specific application properties<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> outside of your packaged jar (<code>application-{profile}.properties</code> and YAML variants).</li></ol><h3 id="_10-2-1-外部配置源" tabindex="-1"><a class="header-anchor" href="#_10-2-1-外部配置源" aria-hidden="true">#</a> 10.2.1 外部配置源</h3><p>常用：<strong>Java</strong> 属性文件、环境变量、命令行参数、**YAML **文件。</p><h3 id="_10-2-2-配置文件查找位置" tabindex="-1"><a class="header-anchor" href="#_10-2-2-配置文件查找位置" aria-hidden="true">#</a> 10.2.2 配置文件查找位置</h3><p>越往下优先级越高，会覆盖上面的配置：</p><ol><li><strong>classpath</strong> 根路径；</li><li><strong>classpath</strong> 根路径下 <strong>config</strong> 目录；</li><li><strong>jar</strong> 包当前目录；</li><li><strong>jar</strong> 包当前目录的 <strong>config</strong> 目录；</li><li><strong>/config</strong> 子目录的直接子目录。</li></ol><h3 id="_10-2-3-配置文件加载顺序" tabindex="-1"><a class="header-anchor" href="#_10-2-3-配置文件加载顺序" aria-hidden="true">#</a> 10.2.3 配置文件加载顺序：</h3><ol><li>当前jar包内部的application.properties和application.yml</li><li>当前jar包内部的application-{profile}.properties 和 application-{profile}.yml</li><li>引用的外部jar包的application.properties和application.yml</li><li>引用的外部jar包的application-{profile}.properties 和 application-{profile}.yml</li></ol><h3 id="_10-2-4-指定环境优先-外部优先-后面的可以覆盖前面的同名配置项" tabindex="-1"><a class="header-anchor" href="#_10-2-4-指定环境优先-外部优先-后面的可以覆盖前面的同名配置项" aria-hidden="true">#</a> 10.2.4 指定环境优先，外部优先，后面的可以覆盖前面的同名配置项</h3><h2 id="_10-3-自定义-starter" tabindex="-1"><a class="header-anchor" href="#_10-3-自定义-starter" aria-hidden="true">#</a> 10.3 自定义 starter</h2><h3 id="_10-3-1-starter-启动原理" tabindex="-1"><a class="header-anchor" href="#_10-3-1-starter-启动原理" aria-hidden="true">#</a> 10.3.1 starter 启动原理</h3><ol><li><strong>starter-pom</strong> 引入 <strong>autoconfigurer</strong> 包；</li></ol><p><img src="https://qiniu.dyl.fit/starter 启动原理.png" alt="starter 启动原理"></p><ol start="2"><li><strong>autoconfigure</strong> 包中配置使用 <strong>META-INF/spring.factories</strong> 中 <code>EnableAutoConfiguration</code> 的值，使得项目启动时加载指定的自动配置类；</li><li>编写自动配置类 <code>xxxAutoConfiguration</code> -&gt; <code>xxxxProperties</code>；</li><li>编写业务：``@Configuration<code>、</code>@Conditional<code>、</code>@EnableConfigurationProperties<code>、</code>@Bean`......</li></ol><p>引入 <strong>starter</strong> --- <code>xxxAutoConfiguration</code> --- <code>容器中放入组件</code> ---- 绑定 <code>xxxProperties</code> ---- 配置项</p><h3 id="_10-3-2-自定义-starter" tabindex="-1"><a class="header-anchor" href="#_10-3-2-自定义-starter" aria-hidden="true">#</a> 10.3.2 自定义 starter</h3><p>atguigu-hello-spring-boot-starter（启动器）</p><p>atguigu-hello-spring-boot-starter-autoconfigure（自动配置包）</p><h2 id="_10-4-springboot-原理" tabindex="-1"><a class="header-anchor" href="#_10-4-springboot-原理" aria-hidden="true">#</a> 10.4 SpringBoot 原理</h2><p>Spring原理【<a href="https://www.bilibili.com/video/BV1gW411W7wy?p=1" target="_blank" rel="noopener noreferrer">Spring注解<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>】、<strong>SpringMVC</strong> 原理、自动配置原理</p><h3 id="_10-4-1-springboot-启动过程" tabindex="-1"><a class="header-anchor" href="#_10-4-1-springboot-启动过程" aria-hidden="true">#</a> 10.4.1 SpringBoot 启动过程</h3><ol><li>创建 <code>SpringApplication</code>； <ol><li>保存一些信息；</li><li>用工具类 <code>ClassUtils</code> 获取到应用类型为<code>Servlet</code>、还可能为 Reactive 或 None；</li><li>去 <strong>spring.factories</strong> 找 <code>Bootstrapper</code>； <ul><li><code>List&lt;Bootstrapper&gt; bootstrappers</code></li></ul></li><li>去 <strong>spring.factories</strong> 找 <code>ApplicationContextInitializer</code>； <ul><li><code>List&lt;ApplicationContextInitializer&lt;?&gt;&gt; initializers</code></li></ul></li><li>去 <strong>spring.factories</strong> 找 <code>ApplicationListener</code><ul><li><code>List&lt;ApplicationListener&lt;?&gt;&gt; listeners</code></li></ul></li></ol></li><li>运行 <code>SpringApplication</code>。 <ol><li><code>StopWatch</code> 用于监听整个应用的启动停止；</li><li>记录应用的启动时间；</li><li>调用 <code>createBootstrapContext()</code> 创建引导上下文（<code>Context</code> 环境）； <ul><li>获取到所有之前的 <code>bootstrappers</code> 挨个执行 <code>intitialize()</code> 来设置引导启动器上下文环境</li></ul></li><li>让当前应用进入 java.awt.<code>headless</code> 模式（自力更生模式）；</li><li>获取所有 <code>RunListener</code>（运行监听器），为了方便所有 <code>Listener</code> 进行事件感知； <ul><li><code>getSpringFactoriesInstances()</code> 去 <strong>spring.factories</strong> 找<code>SpringApplicationRunListener</code></li></ul></li><li>遍历 <code>SpringApplicationRunListener</code> 调用 <code>starting()</code> 方法； <ul><li>相当于通知所有感兴趣系统正在启动过程的人，项目正在 starting</li></ul></li><li>保存命令行参数 <code>ApplicationArguments</code>；</li><li>准备环境 <code>prepareEnvironment()</code>； <ol><li>返回或者创建基础环境信息对象 <code>StandardServletEnvironment</code>；</li><li>配置环境信息对象； <ul><li>读取所有的配置源的配置属性值</li></ul></li><li>绑定环境信息；</li><li>监听器调用 `listener.environmentPrepared() 通知所有的监听器当前环境准备完成。</li></ol></li><li>创建 <strong>IOC</strong> 容器 <code>createApplicationContext</code>； <ol><li>根据项目类型（<code>Servlet</code>）创建容器；</li><li>当前会创建 <code>AnnotationConfigServletWebServerApplicationContext</code>。</li></ol></li><li>准备<code>ApplicationContext</code>容器的基本信息 <code>prepareContext()</code><ol><li>保存环境信息；</li><li>IOC容器的后置处理流程；</li><li>应用初始化器 <code>applyInitializers()</code>； <ol><li>遍历所有的 <code>ApplicationContextInitializer</code>，调用 <code>initialize()</code>来对容器进行初始化扩展功能;</li><li>遍历所有的 <code>listener</code> 调用 <code>contextPrepared()</code>。通知所有的监听器 <code>EventPublishRunListenr</code> 上下文准备完成。</li></ol></li><li>所有的监听器调用 <code>contextLoaded()</code>，通知所有的监听器上下文加载完成；</li></ol></li><li>刷新容器 <code>refreshContext()</code>； <ol><li>创建容器中的所有组件（Spring 注解）</li></ol></li><li>容器刷新完成后工作 <code>afterRefresh()</code>;</li><li>所有监听器调用 <code>listeners.started(context)</code> 通知所有的监听器启动完成；</li><li>调用所有 <code>callRunners()</code>； <ol><li>获取容器中的 <code>ApplicationRunner </code>；</li><li>获取容器中的 <code>CommandLineRunner</code> （执行数据初始化等操作）；</li><li>合并所有 <strong>runner</strong> 并且按照 <code>@Order</code> 进行排序；</li><li>遍历所有的 <strong>runner</strong> 调用 <code>run()</code> 方法。</li></ol></li><li>如果以上有异常； <ul><li>调用 <code>Listener</code> 的 <code>failed()</code> 方法通知所有的监听器 <strong>failed</strong></li></ul></li><li>调用所有监听器的 <code>listeners.running(context)</code>通知所有的监听器正在运行；</li><li><strong>running</strong> 如果有问题，继续调调用 <code>Listener</code> 的 <code>failed()</code> 方法通知所有的监听器 <strong>failed</strong>。</li></ol></li></ol><blockquote><p>Spring 的核心方法实际调用的是抽象类 <code>ApplicationContext.refresh()</code> 方法。该方法是一种模版方法的设计模式，定义了方法的执行顺序和骨架，其中 <code>onRefresh()</code> 是一个抽象方法，由具体子类实现。</p><p>因为启动的是 <strong>Web</strong> 版的容器因此执行的是 <code>ServletWebServerApplicationContext.refresh()</code> 方法。该方法从容器中获得一个 <code>ServletWebServerFactory</code> 工厂（如果有多个工厂，则抛异常），根据工厂对象获得 <code>WebServer</code> 对象。</p><p>因为内嵌 <strong>Tomcat</strong>，所以是 <code>TomcatWevServer</code> 后续通过 <code>new Tomcat()</code> 并执行 <code>start()</code> 启动 <strong>Tomcat</strong> 服务器。</p></blockquote><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>public interface Bootstrapper {
	/**
	 * Initialize the given {@link BootstrapRegistry} with any required registrations.
	 * @param registry the registry to initialize
	 */
	void intitialize(BootstrapRegistry registry);
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://qiniu.dyl.fit/容器初始化器.png" alt="容器初始化器"></p><p><img src="https://qiniu.dyl.fit/springapplicationRunListener.png" alt="img"></p><p><img src="https://qiniu.dyl.fit/监听器.png" alt="监听器"></p><div class="language-Java ext-Java line-numbers-mode"><pre class="language-Java"><code>@FunctionalInterface
public interface ApplicationRunner {
	/**
	 * Callback used to run the bean.
	 * @param args incoming application arguments
	 * @throws Exception on error
	 */
	void run(ApplicationArguments args) throws Exception;
}

@FunctionalInterface
public interface CommandLineRunner {
	/**
	 * Callback used to run the bean.
	 * @param args incoming main method arguments
	 * @throws Exception on error
	 */
	void run(String... args) throws Exception;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10-4-2-application-events-and-listeners" tabindex="-1"><a class="header-anchor" href="#_10-4-2-application-events-and-listeners" aria-hidden="true">#</a> 10.4.2 Application Events and Listeners</h3><p>https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-application-events-and-listeners</p><p><code>ApplicationContextInitializer</code></p><p><code>ApplicationListener</code></p><p><code>SpringApplicationRunListener</code></p><h3 id="_10-4-3-applicationrunner-与-commandlinerunner" tabindex="-1"><a class="header-anchor" href="#_10-4-3-applicationrunner-与-commandlinerunner" aria-hidden="true">#</a> 10.4.3 <code>ApplicationRunner</code> 与 <code>CommandLineRunner</code></h3></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/xingheDYL/Blog/edit/master/docs/views/notes/Spring/SpringBoot 2 雷神视频总结.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2023/7/13 16:43:26</span></div><!----></footer><!----><div class="waline-wrapper" style="display:block;" darkmode="false"><div data-waline provider="Waline"><div class="wl-comment"><!--v-if--><div class="wl-panel"><div class="wl-header item3"><!--[--><div class="wl-header-item"><label for="nick">昵称</label><input id="wl-nick" class="wl-input wl-nick" name="nick" type="text" value></div><div class="wl-header-item"><label for="mail">邮箱</label><input id="wl-mail" class="wl-input wl-mail" name="mail" type="email" value></div><div class="wl-header-item"><label for="link">网址</label><input id="wl-link" class="wl-input wl-link" name="link" type="text" value></div><!--]--></div><textarea id="wl-edit" class="wl-editor" placeholder="请留言。(填写邮箱可在被回复时收到邮件提醒)"></textarea><div class="wl-preview" style="display:none;"><hr><h4>预览:</h4><!-- eslint-disable-next-line vue/no-v-html --><div class="wl-content"></div></div><div class="wl-footer"><div class="wl-actions"><a href="https://guides.github.com/features/mastering-markdown/" title="Markdown Guide" aria-label="Markdown is supported" class="wl-action" target="_blank" rel="noreferrer"><svg width="16" height="16" ariahidden="true"><path d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z" fill="currentColor"></path></svg></a><button class="wl-action" title="表情" style="display:none;"><svg viewbox="0 0 1024 1024" width="24" height="24"><path d="M563.2 463.3 677 540c1.7 1.2 3.7 1.8 5.8 1.8.7 0 1.4-.1 2-.2 2.7-.5 5.1-2.1 6.6-4.4l25.3-37.8c1.5-2.3 2.1-5.1 1.6-7.8s-2.1-5.1-4.4-6.6l-73.6-49.1 73.6-49.1c2.3-1.5 3.9-3.9 4.4-6.6.5-2.7 0-5.5-1.6-7.8l-25.3-37.8a10.1 10.1 0 0 0-6.6-4.4c-.7-.1-1.3-.2-2-.2-2.1 0-4.1.6-5.8 1.8l-113.8 76.6c-9.2 6.2-14.7 16.4-14.7 27.5.1 11 5.5 21.3 14.7 27.4zM387 348.8h-45.5c-5.7 0-10.4 4.7-10.4 10.4v153.3c0 5.7 4.7 10.4 10.4 10.4H387c5.7 0 10.4-4.7 10.4-10.4V359.2c0-5.7-4.7-10.4-10.4-10.4zm333.8 241.3-41-20a10.3 10.3 0 0 0-8.1-.5c-2.6.9-4.8 2.9-5.9 5.4-30.1 64.9-93.1 109.1-164.4 115.2-5.7.5-9.9 5.5-9.5 11.2l3.9 45.5c.5 5.3 5 9.5 10.3 9.5h.9c94.8-8 178.5-66.5 218.6-152.7 2.4-5 .3-11.2-4.8-13.6zm186-186.1c-11.9-42-30.5-81.4-55.2-117.1-24.1-34.9-53.5-65.6-87.5-91.2-33.9-25.6-71.5-45.5-111.6-59.2-41.2-14-84.1-21.1-127.8-21.1h-1.2c-75.4 0-148.8 21.4-212.5 61.7-63.7 40.3-114.3 97.6-146.5 165.8-32.2 68.1-44.3 143.6-35.1 218.4 9.3 74.8 39.4 145 87.3 203.3.1.2.3.3.4.5l36.2 38.4c1.1 1.2 2.5 2.1 3.9 2.6 73.3 66.7 168.2 103.5 267.5 103.5 73.3 0 145.2-20.3 207.7-58.7 37.3-22.9 70.3-51.5 98.1-85 27.1-32.7 48.7-69.5 64.2-109.1 15.5-39.7 24.4-81.3 26.6-123.8 2.4-43.6-2.5-87-14.5-129zm-60.5 181.1c-8.3 37-22.8 72-43 104-19.7 31.1-44.3 58.6-73.1 81.7-28.8 23.1-61 41-95.7 53.4-35.6 12.7-72.9 19.1-110.9 19.1-82.6 0-161.7-30.6-222.8-86.2l-34.1-35.8c-23.9-29.3-42.4-62.2-55.1-97.7-12.4-34.7-18.8-71-19.2-107.9-.4-36.9 5.4-73.3 17.1-108.2 12-35.8 30-69.2 53.4-99.1 31.7-40.4 71.1-72 117.2-94.1 44.5-21.3 94-32.6 143.4-32.6 49.3 0 97 10.8 141.8 32 34.3 16.3 65.3 38.1 92 64.8 26.1 26 47.5 56 63.6 89.2 16.2 33.2 26.6 68.5 31 105.1 4.6 37.5 2.7 75.3-5.6 112.3z" fill="currentColor"></path></svg></button><button class="wl-action" title="表情包"><svg width="24" height="24" fill="currentcolor" viewbox="0 0 24 24"><path style="transform: translateY(0.5px)" d="M18.968 10.5H15.968V11.484H17.984V12.984H15.968V15H14.468V9H18.968V10.5V10.5ZM8.984 9C9.26533 9 9.49967 9.09367 9.687 9.281C9.87433 9.46833 9.968 9.70267 9.968 9.984V10.5H6.499V13.5H8.468V12H9.968V14.016C9.968 14.2973 9.87433 14.5317 9.687 14.719C9.49967 14.9063 9.26533 15 8.984 15H5.984C5.70267 15 5.46833 14.9063 5.281 14.719C5.09367 14.5317 5 14.2973 5 14.016V9.985C5 9.70367 5.09367 9.46933 5.281 9.282C5.46833 9.09467 5.70267 9.001 5.984 9.001H8.984V9ZM11.468 9H12.968V15H11.468V9V9Z"></path><path d="M18.5 3H5.75C3.6875 3 2 4.6875 2 6.75V18C2 20.0625 3.6875 21.75 5.75 21.75H18.5C20.5625 21.75 22.25 20.0625 22.25 18V6.75C22.25 4.6875 20.5625 3 18.5 3ZM20.75 18C20.75 19.2375 19.7375 20.25 18.5 20.25H5.75C4.5125 20.25 3.5 19.2375 3.5 18V6.75C3.5 5.5125 4.5125 4.5 5.75 4.5H18.5C19.7375 4.5 20.75 5.5125 20.75 6.75V18Z"></path></svg></button><input id="wl-image-upload" class="upload" type="file" accept=".png,.jpg,.jpeg,.webp,.bmp,.gif"><label for="wl-image-upload" class="wl-action" title="上传图片"><svg viewbox="0 0 1024 1024" width="24" height="24"><path d="M784 112H240c-88 0-160 72-160 160v480c0 88 72 160 160 160h544c88 0 160-72 160-160V272c0-88-72-160-160-160zm96 640c0 52.8-43.2 96-96 96H240c-52.8 0-96-43.2-96-96V272c0-52.8 43.2-96 96-96h544c52.8 0 96 43.2 96 96v480z" fill="currentColor"></path><path d="M352 480c52.8 0 96-43.2 96-96s-43.2-96-96-96-96 43.2-96 96 43.2 96 96 96zm0-128c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm462.4 379.2-3.2-3.2-177.6-177.6c-25.6-25.6-65.6-25.6-91.2 0l-80 80-36.8-36.8c-25.6-25.6-65.6-25.6-91.2 0L200 728c-4.8 6.4-8 14.4-8 24 0 17.6 14.4 32 32 32 9.6 0 16-3.2 22.4-9.6L380.8 640l134.4 134.4c6.4 6.4 14.4 9.6 24 9.6 17.6 0 32-14.4 32-32 0-9.6-4.8-17.6-9.6-24l-52.8-52.8 80-80L769.6 776c6.4 4.8 12.8 8 20.8 8 17.6 0 32-14.4 32-32 0-8-3.2-16-8-20.8z" fill="currentColor"></path></svg></label><button class="wl-action" title="预览"><svg viewbox="0 0 1024 1024" width="24" height="24"><path d="M710.816 654.301c70.323-96.639 61.084-230.578-23.705-314.843-46.098-46.098-107.183-71.109-172.28-71.109-65.008 0-126.092 25.444-172.28 71.109-45.227 46.098-70.756 107.183-70.756 172.106 0 64.923 25.444 126.007 71.194 172.106 46.099 46.098 107.184 71.109 172.28 71.109 51.414 0 100.648-16.212 142.824-47.404l126.53 126.006c7.058 7.06 16.297 10.979 26.406 10.979 10.105 0 19.343-3.919 26.402-10.979 14.467-14.467 14.467-38.172 0-52.723L710.816 654.301zm-315.107-23.265c-65.88-65.88-65.88-172.54 0-238.42 32.069-32.07 74.245-49.149 119.471-49.149 45.227 0 87.407 17.603 119.472 49.149 65.88 65.879 65.88 172.539 0 238.42-63.612 63.178-175.242 63.178-238.943 0zm0 0" fill="currentColor"></path><path d="M703.319 121.603H321.03c-109.8 0-199.469 89.146-199.469 199.38v382.034c0 109.796 89.236 199.38 199.469 199.38h207.397c20.653 0 37.384-16.645 37.384-37.299 0-20.649-16.731-37.296-37.384-37.296H321.03c-68.582 0-124.352-55.77-124.352-124.267V321.421c0-68.496 55.77-124.267 124.352-124.267h382.289c68.582 0 124.352 55.771 124.352 124.267V524.72c0 20.654 16.736 37.299 37.385 37.299 20.654 0 37.384-16.645 37.384-37.299V320.549c-.085-109.8-89.321-198.946-199.121-198.946zm0 0" fill="currentColor"></path></svg></button></div><div class="wl-info"><div class="wl-text-number">0 <!--v-if-->  字</div><button class="wl-btn">登录</button><button class="wl-btn primary" title="Cmd|Ctrl + Enter"><!--[-->提交<!--]--></button></div><div class="wl-gif-popup"><input type="text" placeholder="搜索表情包"><div class="wl-gallery" style="gap:6px;"><!--[--><!--]--></div><div class="wl-loading"><svg width="30" height="30" viewbox="0 0 100 100" preserveaspectratio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokewidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributename="transform" type="rotate" repeatcount="indefinite" dur="1s" values="0 50 50;360 50 50" keytimes="0;1"></animateTransform></circle></svg></div></div><div class="wl-emoji-popup"><!--[--><!--]--><!--v-if--></div></div></div><!--v-if--></div><div class="wl-count"><!--v-if--> 评论</div><div class="wl-cards"><!--[--><!--]--></div><!--[--><div class="wl-loading"><svg width="30" height="30" viewbox="0 0 100 100" preserveaspectratio="xMidYMid"><circle cx="50" cy="50" fill="none" stroke="currentColor" strokewidth="4" r="40" stroke-dasharray="85 30"><animateTransform attributename="transform" type="rotate" repeatcount="indefinite" dur="1s" values="0 50 50;360 50 50" keytimes="0;1"></animateTransform></circle></svg></div><!--]--><!-- Copyright Information --><div class="wl-power"> Powered by <a href="https://github.com/walinejs/waline" target="_blank" rel="noreferrer"> Waline </a> v2.6.2</div></div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn" target="_blank"> 皖ICP备2021015742号</a></div><div class="copyright">Copyright © 2022 DYL</div></footer><!--]--></div><!--]--><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.c80e5150.js" defer></script>
  </body>
</html>
